!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.KLGraph=e():t.KLGraph=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=161)}([function(t,e,n){var r;try{r=n(34)}catch(t){}r||(r=window._),t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=r(""),o=r({}),a=r(function(){}),s={};s.uuid=function(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return e},s.isArray=function(t){return Array.isArray?Array.isArray(t):null!=t&&t instanceof Array},s.isString=function(t){return null!=t&&("undefined"==typeof t?"undefined":r(t))==i},s.isObject=function(t){return null!=t&&("undefined"==typeof t?"undefined":r(t))===o},s.isFunction=function(t){return null!=t&&("undefined"==typeof t?"undefined":r(t))===a},s.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},s.nextPow2=function(t){t-=1;for(var e,n=1;(e=t>>n)>0;)t|=e,n*=2;return t+1},s.extend=function(){var t,e,n={},r=arguments.length;for(t=r-1;t>=0;t--)for(e in arguments[t])n[e]=arguments[t][e];return n},s.getDistance=function(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)},s.normalize=function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return 0==e?[0,0]:[t[0]/e,t[1]/e]},s.getAngle=function(t,e,n,r){var i=(t*n+e*r)/(Math.sqrt(t*t+e*e)*Math.sqrt(n*n+r*r));return Math.acos(i)},s.inRect=function(t,e,n,r,i,o){return t>=n&&t<=n+i&&e>=r&&e<=r+o},s.inLine=function(t,e,n,r,i,o,a){var s=t-n,u=e-r,c=i-n,f=o-r,h=s*c+u*f,l=c*c+f*f;if(h<0||l<.1)return!1;if(h*h/l>l)return!1;var d=-1;d=h/l;var p,v;p=n+d*c,v=r+d*f;var g=t-p,y=e-v,_=Math.sqrt(g*g+y*y);return _<=a};var u="\\s*([+-]?\\d+)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",f=/^#([0-9a-f]{6})$/,h=new RegExp("^rgba\\("+[u,u,u,c]+"\\)$"),l=new RegExp("^rgb\\("+[u,u,u]+"\\)$");s.parseColor=function(t){t=(t+"").trim().toLowerCase();var e,n;if(e=f.exec(t))return n=parseInt(e[1],16),{r:n>>16&255,g:n>>8&255,b:255&n,a:255};if(e=h.exec(t))return{r:+e[1],g:+e[2],b:+e[3],a:255*+e[4]};if(e=l.exec(t))return{r:+e[1],g:+e[2],b:+e[3],a:255};throw"not valid color format"},s.getBBox=function(t){if(!t||0==t.length)return{x:0,y:0,w:0,h:0};if(1==t.length)return{x:t[0].x,y:t[0].y,w:0,h:0};var e=1/0,n=1/0,r=-(1/0),i=-(1/0);return t.forEach(function(t){t.x<e&&(e=t.x),t.x>r&&(r=t.x),t.y<n&&(n=t.y),t.y>i&&(i=t.y)}),{x:e,y:n,w:r-e,h:i-n}},s.getPointOnQuadraticCurve=function(t,e,n,r,i,o,a){return[Math.pow(1-t,2)*e+2*(1-t)*t*o+Math.pow(t,2)*r,Math.pow(1-t,2)*n+2*(1-t)*t*a+Math.pow(t,2)*i]},s.getPointTangentOnQuadraticCurve=function(t,e,n,r,i,o,a){var u=s.getPointOnQuadraticCurve(t,e,n,r,i,o,a),c=s.getPointOnQuadraticCurve(t+.001,e,n,r,i,o,a);return s.normalize([c[0]-u[0],c[1]-u[1]])},s.isPointOnQuadraticCurve=function(t,e,n,r,i,o,a,u,c){var f=s.getDistance(n,r,i,o);if(Math.abs(t-n)>f||Math.abs(e-r)>f)return!1;for(var h,l=s.getDistance(t,e,n,r),d=s.getDistance(t,e,i,o),p=.5,v=l<d?-.01:.01,g=.001,y=100,_=s.getPointOnQuadraticCurve(p,n,r,i,o,a,u),m=s.getDistance(t,e,_[0],_[1]);y-- >0&&p>=0&&p<=1&&m>c&&(v>g||v<-g);)h=m,_=s.getPointOnQuadraticCurve(p,n,r,i,o,a,u),m=s.getDistance(t,e,_[0],_[1]),m>h?(v=-v/2,p+=v):p+v<0||p+v>1?(v/=2,m=h):p+=v;return m<c},s.getControlPos=function(t,e,n,r,i,o,a){a=a;var u=i%2==1?1:-1;u*=o?1:-1,a*=u*(i+1>>1);var c=s.normalize([e-r,n-t]);return[c[0]*a+(t+n)/2,c[1]*a+(e+r)/2]},s.repeat=function(){function t(r,i){return n>=e?i():(r(),n++,void setTimeout(t,0))}var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=0;return t},e.default=s},function(t,e,n){"use strict";function r(t,e,n,r){var i;do i=y.uniqueId(r);while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function i(t){var e=(new _).setGraph(t.graph());return y.forEach(t.nodes(),function(n){e.setNode(n,t.node(n))}),y.forEach(t.edges(),function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e}function o(t){var e=new _({multigraph:t.isMultigraph()}).setGraph(t.graph());return y.forEach(t.nodes(),function(n){t.children(n).length||e.setNode(n,t.node(n))}),y.forEach(t.edges(),function(n){e.setEdge(n,t.edge(n))}),e}function a(t){var e=y.map(t.nodes(),function(e){var n={};return y.forEach(t.outEdges(e),function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight}),n});return y.zipObject(t.nodes(),e)}function s(t){var e=y.map(t.nodes(),function(e){var n={};return y.forEach(t.inEdges(e),function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight}),n});return y.zipObject(t.nodes(),e)}function u(t,e){var n=t.x,r=t.y,i=e.x-n,o=e.y-r,a=t.width/2,s=t.height/2;if(!i&&!o)throw new Error("Not possible to find intersection inside of the rectangle");var u,c;return Math.abs(o)*a>Math.abs(i)*s?(o<0&&(s=-s),u=s*i/o,c=s):(i<0&&(a=-a),u=a,c=a*o/i),{x:n+u,y:r+c}}function c(t){var e=y.map(y.range(d(t)+1),function(){return[]});return y.forEach(t.nodes(),function(n){var r=t.node(n),i=r.rank;y.isUndefined(i)||(e[i][r.order]=n)}),e}function f(t){var e=y.minBy(y.map(t.nodes(),function(e){return t.node(e).rank}));y.forEach(t.nodes(),function(n){var r=t.node(n);y.has(r,"rank")&&(r.rank-=e)})}function h(t){var e=y.minBy(y.map(t.nodes(),function(e){return t.node(e).rank})),n=[];y.forEach(t.nodes(),function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)});var r=0,i=t.graph().nodeRankFactor;y.forEach(n,function(e,n){y.isUndefined(e)&&n%i!==0?--r:r&&y.forEach(e,function(e){t.node(e).rank+=r})})}function l(t,e,n,i){var o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=i),r(t,"border",o,e)}function d(t){return y.max(y.map(t.nodes(),function(e){var n=t.node(e).rank;if(!y.isUndefined(n))return n}))}function p(t,e){var n={lhs:[],rhs:[]};return y.forEach(t,function(t){e(t)?n.lhs.push(t):n.rhs.push(t)}),n}function v(t,e){var n=y.now();try{return e()}finally{console.log(t+" time: "+(y.now()-n)+"ms")}}function g(t,e){return e()}var y=n(0),_=n(4).Graph;t.exports={addDummyNode:r,simplify:i,asNonCompoundGraph:o,successorWeights:a,predecessorWeights:s,intersectRect:u,buildLayerMatrix:c,normalizeRanks:f,removeEmptyRanks:h,addBorderNode:l,maxRank:d,partition:p,time:v,notime:g}},function(t,e,n){var r;try{r=n(34)}catch(t){}r||(r=window._),t.exports=r},function(t,e,n){var r;try{r=n(126)}catch(t){}r||(r=window.graphlib),t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){r(this,t),this.clearListeners()}return i(t,[{key:"on",value:function(t,e){if(t&&e){this._listener[t]=this._listener[t]||[];for(var n=this._listener[t],r=0,i=n.length;r<i;r++)if(e==n[r])return;return this._listener[t].push(e),this}}},{key:"off",value:function(t,e){if(t){var n;if((n=this._listener[t])&&!(n.length<1))if(e){for(var r=0,i=n.length;r<i;r++)if(e==n[r]){n.splice(r,1);break}}else this._listener[t]=[]}}},{key:"emit",value:function(t,e){if(t){var n,r;if((n=this._listener[t])&&!(n.length<1)){n=n.slice();for(var i=0,o=n.length;i<o;i++)r=n[i],r.apply(null,e)}}}},{key:"clearListeners",value:function(){this._listener={}}}]),t}();e.default=o},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";function r(t){return"undefined"!=typeof t.leaves||"undefined"!=typeof t.groups}Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(38),a=n(19),s=n(18),u=n(8),c=n(10),f=n(35),h=n(37);!function(t){t[t.start=0]="start",t[t.tick=1]="tick",t[t.end=2]="end"}(i=e.EventType||(e.EventType={}));var l=function(){function t(){var e=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:t.getSourceIndex,getTargetIndex:t.getTargetIndex,setLength:t.setLinkLength,getType:function(t){return"function"==typeof e._linkType?e._linkType(t):0}}}return t.prototype.on=function(t,e){return this.event||(this.event={}),"string"==typeof t?this.event[i[t]]=e:this.event[t]=e,this},t.prototype.trigger=function(t){this.event&&"undefined"!=typeof this.event[t.type]&&this.event[t.type](t)},t.prototype.kick=function(){for(;!this.tick(););},t.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:i.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var t,e,n=this._nodes.length;this._links.length;for(this._descent.locks.clear(),e=0;e<n;++e)if(t=this._nodes[e],t.fixed){"undefined"!=typeof t.px&&"undefined"!=typeof t.py||(t.px=t.x,t.py=t.y);var r=[t.px,t.py];this._descent.locks.add(e,r)}var o=this._descent.rungeKutta();return 0===o?this._alpha=0:"undefined"!=typeof this._lastStress&&(this._alpha=o),this._lastStress=o,this.updateNodePositions(),this.trigger({type:i.tick,alpha:this._alpha,stress:this._lastStress}),!1},t.prototype.updateNodePositions=function(){for(var t,e=this._descent.x[0],n=this._descent.x[1],r=this._nodes.length;r--;)t=this._nodes[r],t.x=e[r],t.y=n[r]},t.prototype.nodes=function(t){if(!t){if(0===this._nodes.length&&this._links.length>0){var e=0;this._links.forEach(function(t){e=Math.max(e,t.source,t.target)}),this._nodes=new Array(++e);for(var n=0;n<e;++n)this._nodes[n]={}}return this._nodes}return this._nodes=t,this},t.prototype.groups=function(t){var e=this;return t?(this._groups=t,this._rootGroup={},this._groups.forEach(function(t){"undefined"==typeof t.padding&&(t.padding=1),"undefined"!=typeof t.leaves&&t.leaves.forEach(function(n,r){"number"==typeof n&&((t.leaves[r]=e._nodes[n]).parent=t)}),"undefined"!=typeof t.groups&&t.groups.forEach(function(n,r){"number"==typeof n&&((t.groups[r]=e._groups[n]).parent=t)})}),this._rootGroup.leaves=this._nodes.filter(function(t){return"undefined"==typeof t.parent}),this._rootGroup.groups=this._groups.filter(function(t){return"undefined"==typeof t.parent}),this):this._groups},t.prototype.powerGraphGroups=function(t){var e=o.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(e.groups),t(e),this},t.prototype.avoidOverlaps=function(t){return arguments.length?(this._avoidOverlaps=t,this):this._avoidOverlaps},t.prototype.handleDisconnected=function(t){return arguments.length?(this._handleDisconnected=t,this):this._handleDisconnected},t.prototype.flowLayout=function(t,e){return arguments.length||(t="y"),this._directedLinkConstraints={axis:t,getMinSeparation:"number"==typeof e?function(){return e}:e},this},t.prototype.links=function(t){return arguments.length?(this._links=t,this):this._links},t.prototype.constraints=function(t){return arguments.length?(this._constraints=t,this):this._constraints},t.prototype.distanceMatrix=function(t){return arguments.length?(this._distanceMatrix=t,this):this._distanceMatrix},t.prototype.size=function(t){return t?(this._canvasSize=t,this):this._canvasSize},t.prototype.defaultNodeSize=function(t){return t?(this._defaultNodeSize=t,this):this._defaultNodeSize},t.prototype.groupCompactness=function(t){return t?(this._groupCompactness=t,this):this._groupCompactness},t.prototype.linkDistance=function(t){return t?(this._linkDistance="function"==typeof t?t:+t,this._linkLengthCalculator=null,this):this._linkDistance},t.prototype.linkType=function(t){return this._linkType=t,this},t.prototype.convergenceThreshold=function(t){return t?(this._threshold="function"==typeof t?t:+t,this):this._threshold},t.prototype.alpha=function(t){return arguments.length?(t=+t,this._alpha?t>0?this._alpha=t:this._alpha=0:t>0&&(this._running||(this._running=!0,this.trigger({type:i.start,alpha:this._alpha=t}),this.kick())),this):this._alpha},t.prototype.getLinkLength=function(t){return"function"==typeof this._linkDistance?+this._linkDistance(t):this._linkDistance},t.setLinkLength=function(t,e){t.length=e},t.prototype.getLinkType=function(t){return"function"==typeof this._linkType?this._linkType(t):0},t.prototype.symmetricDiffLinkLengths=function(t,e){var n=this;return void 0===e&&(e=1),this.linkDistance(function(e){return t*e.length}),this._linkLengthCalculator=function(){return a.symmetricDiffLinkLengths(n._links,n.linkAccessor,e)},this},t.prototype.jaccardLinkLengths=function(t,e){var n=this;return void 0===e&&(e=1),this.linkDistance(function(e){return t*e.length}),this._linkLengthCalculator=function(){return a.jaccardLinkLengths(n._links,n.linkAccessor,e)},this},t.prototype.start=function(e,n,r,i,o){var f=this;void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=!0);var h,l=this.nodes().length,d=l+2*this._groups.length,p=(this._links.length,this._canvasSize[0]),v=this._canvasSize[1],g=new Array(d),y=new Array(d),_=null,m=this._avoidOverlaps;this._nodes.forEach(function(t,e){t.index=e,"undefined"==typeof t.x&&(t.x=p/2,t.y=v/2),g[e]=t.x,y[e]=t.y}),this._linkLengthCalculator&&this._linkLengthCalculator();var x;this._distanceMatrix?x=this._distanceMatrix:(x=new c.Calculator(d,this._links,t.getSourceIndex,t.getTargetIndex,function(t){return f.getLinkLength(t)}).DistanceMatrix(),_=s.Descent.createSquareMatrix(d,function(){return 2}),this._links.forEach(function(t){"number"==typeof t.source&&(t.source=f._nodes[t.source]),"number"==typeof t.target&&(t.target=f._nodes[t.target])}),this._links.forEach(function(e){var n=t.getSourceIndex(e),r=t.getTargetIndex(e);_[n][r]=_[r][n]=e.weight||1}));var b=s.Descent.createSquareMatrix(d,function(t,e){return x[t][e]});if(this._rootGroup&&"undefined"!=typeof this._rootGroup.groups){var h=l,E=function(t,e,n,r){_[t][e]=_[e][t]=n,b[t][e]=b[e][t]=r};this._groups.forEach(function(t){E(h,h+1,f._groupCompactness,.1),g[h]=0,y[h++]=0,g[h]=0,y[h++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var w=this._constraints||[];this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,w=w.concat(a.generateDirectedEdgeConstraints(l,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new s.Descent([g,y],b),this._descent.locks.clear();for(var h=0;h<l;++h){var P=this._nodes[h];if(P.fixed){P.px=P.x,P.py=P.y;var k=[P.x,P.y];this._descent.locks.add(h,k)}}if(this._descent.threshold=this._threshold,this.initialLayout(e,g,y),w.length>0&&(this._descent.project=new u.Projection(this._nodes,this._groups,this._rootGroup,w).projectFunctions()),this._descent.run(n),this.separateOverlappingComponents(p,v),this.avoidOverlaps(m),m&&(this._nodes.forEach(function(t,e){t.x=g[e],t.y=y[e]}),this._descent.project=new u.Projection(this._nodes,this._groups,this._rootGroup,w,!0).projectFunctions(),this._nodes.forEach(function(t,e){g[e]=t.x,y[e]=t.y})),this._descent.G=_,this._descent.run(r),i){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=l,this._descent.scaleSnapByMaxH=l!=d;var T=s.Descent.createSquareMatrix(d,function(t,e){return t>=l||e>=l?_[t][e]:0});this._descent.G=T,this._descent.run(i)}return this.updateNodePositions(),this.separateOverlappingComponents(p,v),o?this.resume():this},t.prototype.initialLayout=function(e,n,r){if(this._groups.length>0&&e>0){var i=this._nodes.length,o=this._links.map(function(t){return{source:t.source.index,target:t.target.index}}),a=this._nodes.map(function(t){return{index:t.index}});this._groups.forEach(function(t,e){a.push({index:t.index=i+e})}),this._groups.forEach(function(t,e){"undefined"!=typeof t.leaves&&t.leaves.forEach(function(e){return o.push({source:t.index,target:e.index})}),"undefined"!=typeof t.groups&&t.groups.forEach(function(e){return o.push({source:t.index,target:e.index})})}),(new t).size(this.size()).nodes(a).links(o).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(e,0,0,0,!1),this._nodes.forEach(function(t){n[t.index]=a[t.index].x,r[t.index]=a[t.index].y})}else this._descent.run(e)},t.prototype.separateOverlappingComponents=function(t,e){var n=this;if(!this._distanceMatrix&&this._handleDisconnected){var r=this._descent.x[0],i=this._descent.x[1];this._nodes.forEach(function(t,e){t.x=r[e],t.y=i[e]});var o=h.separateGraphs(this._nodes,this._links);h.applyPacking(o,t,e,this._defaultNodeSize),this._nodes.forEach(function(t,e){n._descent.x[0][e]=t.x,n._descent.x[1][e]=t.y,t.bounds&&(t.bounds.setXCentre(t.x),t.bounds.setYCentre(t.y))})}},t.prototype.resume=function(){return this.alpha(.1)},t.prototype.stop=function(){return this.alpha(0)},t.prototype.prepareEdgeRouting=function(t){void 0===t&&(t=0),this._visibilityGraph=new f.TangentVisibilityGraph(this._nodes.map(function(e){return e.bounds.inflate(-t).vertices()}))},t.prototype.routeEdge=function(t,e,n){void 0===e&&(e=5);var r=[],i=new f.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),o={x:t.source.x,y:t.source.y},a={x:t.target.x,y:t.target.y},s=i.addPoint(o,t.source.index),h=i.addPoint(a,t.target.index);i.addEdgeIfVisible(o,a,t.source.index,t.target.index),"undefined"!=typeof n&&n(i);var l=function(t){return t.source.id},d=function(t){return t.target.id},p=function(t){return t.length()},v=new c.Calculator(i.V.length,i.E,l,d,p),g=v.PathFromNodeToNode(s.id,h.id);if(1===g.length||g.length===i.V.length){var y=u.makeEdgeBetween(t.source.innerBounds,t.target.innerBounds,e);r=[y.sourceIntersection,y.arrowStart]}else{for(var _=g.length-2,m=i.V[g[_]].p,x=i.V[g[0]].p,r=[t.source.innerBounds.rayIntersection(m.x,m.y)],b=_;b>=0;--b)r.push(i.V[g[b]].p);r.push(u.makeEdgeTo(x,t.target.innerBounds,e))}return r},t.getSourceIndex=function(t){return"number"==typeof t.source?t.source:t.source.index},t.getTargetIndex=function(t){return"number"==typeof t.target?t.target:t.target.index},t.linkId=function(e){return t.getSourceIndex(e)+"-"+t.getTargetIndex(e)},t.dragStart=function(e){r(e)?t.storeOffset(e,t.dragOrigin(e)):(t.stopNode(e),e.fixed|=2)},t.stopNode=function(t){t.px=t.x,t.py=t.y},t.storeOffset=function(e,n){"undefined"!=typeof e.leaves&&e.leaves.forEach(function(e){e.fixed|=2,t.stopNode(e),e._dragGroupOffsetX=e.x-n.x,e._dragGroupOffsetY=e.y-n.y}),"undefined"!=typeof e.groups&&e.groups.forEach(function(e){return t.storeOffset(e,n)})},t.dragOrigin=function(t){return r(t)?{x:t.bounds.cx(),y:t.bounds.cy()}:t},t.drag=function(e,n){r(e)?("undefined"!=typeof e.leaves&&e.leaves.forEach(function(t){e.bounds.setXCentre(n.x),e.bounds.setYCentre(n.y),t.px=t._dragGroupOffsetX+n.x,t.py=t._dragGroupOffsetY+n.y}),"undefined"!=typeof e.groups&&e.groups.forEach(function(e){return t.drag(e,n)})):(e.px=n.x,e.py=n.y)},t.dragEnd=function(e){r(e)?("undefined"!=typeof e.leaves&&e.leaves.forEach(function(e){t.dragEnd(e),delete e._dragGroupOffsetX,delete e._dragGroupOffsetY}),"undefined"!=typeof e.groups&&e.groups.forEach(t.dragEnd)):e.fixed&=-7},t.mouseOver=function(t){t.fixed|=4,t.px=t.x,t.py=t.y},t.mouseOut=function(t){t.fixed&=-5},t}();e.Layout=l},function(t,e,n){"use strict";function r(t){return t.bounds="undefined"!=typeof t.leaves?t.leaves.reduce(function(t,e){return e.bounds.union(t)},x.empty()):x.empty(),"undefined"!=typeof t.groups&&(t.bounds=t.groups.reduce(function(t,e){return r(e).union(t)},t.bounds)),t.bounds=t.bounds.inflate(t.padding),t.bounds}function i(t,e,n){var r=t.rayIntersection(e.cx(),e.cy())||{x:t.cx(),y:t.cy()},i=e.rayIntersection(t.cx(),t.cy())||{x:e.cx(),y:e.cy()},o=i.x-r.x,a=i.y-r.y,s=Math.sqrt(o*o+a*a),u=s-n;return{sourceIntersection:r,targetIntersection:i,arrowStart:{x:r.x+u*o/s,y:r.y+u*a/s}}}function o(t,e,n){var r=e.rayIntersection(t.x,t.y);r||(r={x:e.cx(),y:e.cy()});var i=r.x-t.x,o=r.y-t.y,a=Math.sqrt(i*i+o*o);return{x:r.x-n*i/a,y:r.y-n*o/a}}function a(t,e){return t.pos>e.pos?1:t.pos<e.pos?-1:t.isOpen?-1:e.isOpen?1:0}function s(){return new m.RBTree(function(t,e){return t.pos-e.pos})}function u(t,e,n,r){void 0===r&&(r=!1);var i=t.padding,o="undefined"!=typeof t.groups?t.groups.length:0,a="undefined"!=typeof t.leaves?t.leaves.length:0,s=o?t.groups.reduce(function(t,r){return t.concat(u(r,e,n,!0))},[]):[],f=(r?2:0)+a+o,h=new Array(f),l=new Array(f),d=0,p=function(t,e){l[d]=t,h[d++]=e};if(r){var v=t.bounds,g=e.getCentre(v),y=e.getSize(v)/2,_=e.getOpen(v),m=e.getClose(v),x=g-y+i/2,b=g+y-i/2;t.minVar.desiredPosition=x,p(e.makeRect(_,m,x,i),t.minVar),t.maxVar.desiredPosition=b,p(e.makeRect(_,m,b,i),t.maxVar)}a&&t.leaves.forEach(function(t){return p(t.bounds,t.variable)}),o&&t.groups.forEach(function(t){var n=t.bounds;p(e.makeRect(e.getOpen(n),e.getClose(n),e.getCentre(n),e.getSize(n)),t.minVar)});var E=c(l,h,e,n);return o&&(h.forEach(function(t){t.cOut=[],t.cIn=[]}),E.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),t.groups.forEach(function(t){var n=(t.padding-e.getSize(t.bounds))/2;t.minVar.cIn.forEach(function(t){return t.gap+=n}),t.minVar.cOut.forEach(function(e){e.left=t.maxVar,e.gap+=n})})),s.concat(E)}function c(t,e,n,r){var i,o=t.length,u=2*o;console.assert(e.length>=o);var c=new Array(u);for(i=0;i<o;++i){var f=t[i],h=new b(e[i],f,n.getCentre(f));c[i]=new E(!0,h,n.getOpen(f)),c[i+o]=new E(!1,h,n.getClose(f))}c.sort(a);var l=new Array,d=s();for(i=0;i<u;++i){var p=c[i],h=p.v;if(p.isOpen)d.insert(h),n.findNeighbours(h,d);else{d.remove(h);var v=function(t,e){var i=(n.getSize(t.r)+n.getSize(e.r))/2+r;l.push(new _.Constraint(t.v,e.v,i))},g=function(t,e,n){for(var r,i=h[t].iterator();null!==(r=i[t]());)n(r,h),r[e].remove(h)};g("prev","next",function(t,e){return v(t,e)}),g("next","prev",function(t,e){return v(e,t)})}}return console.assert(0===d.size),l}function f(t,e){var n=function(n,r){for(var i,o=e.findIter(t);null!==(i=o[n]());){var a=i.r.overlapX(t.r);if((a<=0||a<=i.r.overlapY(t.r))&&(t[n].insert(i),i[r].insert(t)),a<=0)break}};n("next","prev"),n("prev","next")}function h(t,e){var n=function(n,r){var i=e.findIter(t)[n]();null!==i&&i.r.overlapX(t.r)>0&&(t[n].insert(i),i[r].insert(t))};n("next","prev"),n("prev","next")}function l(t,e){return c(t,e,w,1e-6)}function d(t,e){return c(t,e,P,1e-6)}function p(t){return u(t,w,1e-6)}function v(t){return u(t,P,1e-6)}function g(t){var e=t.map(function(t){return new _.Variable(t.cx())}),n=l(t,e),r=new _.Solver(e,n);r.solve(),e.forEach(function(e,n){return t[n].setXCentre(e.position())}),e=t.map(function(t){return new _.Variable(t.cy())}),n=d(t,e),r=new _.Solver(e,n),r.solve(),e.forEach(function(e,n){return t[n].setYCentre(e.position())})}var y=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var _=n(20),m=n(40);e.computeGroupBounds=r;var x=function(){function t(t,e,n,r){this.x=t,this.X=e,this.y=n,this.Y=r}return t.empty=function(){return new t(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},t.prototype.cx=function(){return(this.x+this.X)/2},t.prototype.cy=function(){return(this.y+this.Y)/2},t.prototype.overlapX=function(t){var e=this.cx(),n=t.cx();return e<=n&&t.x<this.X?this.X-t.x:n<=e&&this.x<t.X?t.X-this.x:0},t.prototype.overlapY=function(t){var e=this.cy(),n=t.cy();return e<=n&&t.y<this.Y?this.Y-t.y:n<=e&&this.y<t.Y?t.Y-this.y:0},t.prototype.setXCentre=function(t){var e=t-this.cx();this.x+=e,this.X+=e},t.prototype.setYCentre=function(t){var e=t-this.cy();this.y+=e,this.Y+=e},t.prototype.width=function(){return this.X-this.x},t.prototype.height=function(){return this.Y-this.y},t.prototype.union=function(e){return new t(Math.min(this.x,e.x),Math.max(this.X,e.X),Math.min(this.y,e.y),Math.max(this.Y,e.Y))},t.prototype.lineIntersections=function(e,n,r,i){for(var o=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],a=[],s=0;s<4;++s){var u=t.lineIntersection(e,n,r,i,o[s][0],o[s][1],o[s][2],o[s][3]);null!==u&&a.push({x:u.x,y:u.y})}return a},t.prototype.rayIntersection=function(t,e){var n=this.lineIntersections(this.cx(),this.cy(),t,e);return n.length>0?n[0]:null},t.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},t.lineIntersection=function(t,e,n,r,i,o,a,s){var u=n-t,c=a-i,f=r-e,h=s-o,l=h*u-c*f;if(0==l)return null;var d=t-i,p=e-o,v=c*p-h*d,g=v/l,y=u*p-f*d,_=y/l;return g>=0&&g<=1&&_>=0&&_<=1?{x:t+g*u,y:e+g*f}:null},t.prototype.inflate=function(e){return new t(this.x-e,this.X+e,this.y-e,this.Y+e)},t}();e.Rectangle=x,e.makeEdgeBetween=i,e.makeEdgeTo=o;var b=function(){function t(t,e,n){this.v=t,this.r=e,this.pos=n,this.prev=s(),this.next=s()}return t}(),E=function(){function t(t,e,n){this.isOpen=t,this.v=e,this.pos=n}return t}(),w={getCentre:function(t){return t.cx()},getOpen:function(t){return t.y},getClose:function(t){return t.Y},getSize:function(t){return t.width()},makeRect:function(t,e,n,r){return new x(n-r/2,n+r/2,t,e)},findNeighbours:f},P={getCentre:function(t){return t.cy()},getOpen:function(t){return t.x},getClose:function(t){return t.X},getSize:function(t){return t.height()},makeRect:function(t,e,n,r){return new x(t,e,n-r/2,n+r/2)},findNeighbours:h};e.generateXConstraints=l,e.generateYConstraints=d,e.generateXGroupConstraints=p,e.generateYGroupConstraints=v,e.removeOverlaps=g;var k=function(t){function e(e,n){var r=t.call(this,0,n)||this;return r.index=e,r}return y(e,t),e}(_.Variable);e.IndexedVariable=k;var T=function(){function t(t,e,n,i,o){void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=!1);var a=this;if(this.nodes=t,this.groups=e,this.rootGroup=n,this.avoidOverlaps=o,this.variables=t.map(function(t,e){return t.variable=new k(e,1)}),i&&this.createConstraints(i),o&&n&&"undefined"!=typeof n.groups){t.forEach(function(t){if(!t.width||!t.height)return void(t.bounds=new x(t.x,t.x,t.y,t.y));var e=t.width/2,n=t.height/2;t.bounds=new x(t.x-e,t.x+e,t.y-n,t.y+n)}),r(n);var s=t.length;e.forEach(function(t){a.variables[s]=t.minVar=new k(s++,"undefined"!=typeof t.stiffness?t.stiffness:.01),a.variables[s]=t.maxVar=new k(s++,"undefined"!=typeof t.stiffness?t.stiffness:.01)})}}return t.prototype.createSeparation=function(t){return new _.Constraint(this.nodes[t.left].variable,this.nodes[t.right].variable,t.gap,"undefined"!=typeof t.equality&&t.equality)},t.prototype.makeFeasible=function(t){var e=this;if(this.avoidOverlaps){var n="x",r="width";"x"===t.axis&&(n="y",r="height");var i=t.offsets.map(function(t){return e.nodes[t.node]}).sort(function(t,e){return t[n]-e[n]}),o=null;i.forEach(function(t){if(o){var e=o[n]+o[r];e>t[n]&&(t[n]=e)}o=t})}},t.prototype.createAlignment=function(t){var e=this,n=this.nodes[t.offsets[0].node].variable;this.makeFeasible(t);var r="x"===t.axis?this.xConstraints:this.yConstraints;t.offsets.slice(1).forEach(function(t){var i=e.nodes[t.node].variable;r.push(new _.Constraint(n,i,t.offset,!0))})},t.prototype.createConstraints=function(t){var e=this,n=function(t){return"undefined"==typeof t.type||"separation"===t.type};this.xConstraints=t.filter(function(t){return"x"===t.axis&&n(t)}).map(function(t){return e.createSeparation(t)}),this.yConstraints=t.filter(function(t){return"y"===t.axis&&n(t)}).map(function(t){return e.createSeparation(t)}),t.filter(function(t){return"alignment"===t.type}).forEach(function(t){return e.createAlignment(t)})},t.prototype.setupVariablesAndBounds=function(t,e,n,r){this.nodes.forEach(function(i,o){i.fixed?(i.variable.weight=i.fixedWeight?i.fixedWeight:1e3,n[o]=r(i)):i.variable.weight=1;var a=(i.width||0)/2,s=(i.height||0)/2,u=t[o],c=e[o];i.bounds=new x(u-a,u+a,c-s,c+s)})},t.prototype.xProject=function(t,e,n){(this.rootGroup||this.avoidOverlaps||this.xConstraints)&&this.project(t,e,t,n,function(t){return t.px},this.xConstraints,p,function(t){return t.bounds.setXCentre(n[t.variable.index]=t.variable.position())},function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.x=e-i,t.bounds.X=r+i})},t.prototype.yProject=function(t,e,n){(this.rootGroup||this.yConstraints)&&this.project(t,e,e,n,function(t){return t.py},this.yConstraints,v,function(t){return t.bounds.setYCentre(n[t.variable.index]=t.variable.position())},function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.y=e-i,t.bounds.Y=r+i})},t.prototype.projectFunctions=function(){var t=this;return[function(e,n,r){return t.xProject(e,n,r)},function(e,n,r){return t.yProject(e,n,r)}]},t.prototype.project=function(t,e,n,i,o,a,s,u,c){this.setupVariablesAndBounds(t,e,i,o),this.rootGroup&&this.avoidOverlaps&&(r(this.rootGroup),a=a.concat(s(this.rootGroup))),this.solve(this.variables,a,n,i),this.nodes.forEach(u),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(c),r(this.rootGroup))},t.prototype.solve=function(t,e,n,r){var i=new _.Solver(t,e);i.setStartingPositions(n),i.setDesiredPositions(r),i.solve()},t}();e.Projection=T},function(t,e,n){"use strict";function r(t){function e(r){var i=t.node(r);if(o.has(n,r))return i.rank;n[r]=!0;var a=o.minBy(o.map(t.outEdges(r),function(n){return e(n.w)-t.edge(n).minlen}));return a!==Number.POSITIVE_INFINITY&&void 0!==a&&null!==a||(a=0),i.rank=a}var n={};o.forEach(t.sources(),e)}function i(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}var o=n(0);t.exports={longestPath:r,slack:i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(39),i=function(){function t(t,e){this.id=t,this.distance=e}return t}(),o=function(){function t(t){this.id=t,this.neighbours=[]}return t}(),a=function(){function t(t,e,n){this.node=t,this.prev=e,this.d=n}return t}(),s=function(){function t(t,e,n,r,a){this.n=t,this.es=e,this.neighbours=new Array(this.n);for(var s=this.n;s--;)this.neighbours[s]=new o(s);for(s=this.es.length;s--;){var u=this.es[s],c=n(u),f=r(u),h=a(u);this.neighbours[c].neighbours.push(new i(f,h)),this.neighbours[f].neighbours.push(new i(c,h))}}return t.prototype.DistanceMatrix=function(){for(var t=new Array(this.n),e=0;e<this.n;++e)t[e]=this.dijkstraNeighbours(e);return t},t.prototype.DistancesFromNode=function(t){return this.dijkstraNeighbours(t)},t.prototype.PathFromNodeToNode=function(t,e){return this.dijkstraNeighbours(t,e)},t.prototype.PathFromNodeToNodeWithPrevCost=function(t,e,n){var i=new r.PriorityQueue(function(t,e){return t.d<=e.d}),o=this.neighbours[t],s=new a(o,null,0),u={};for(i.push(s);!i.empty()&&(s=i.pop(),o=s.node,o.id!==e);)for(var c=o.neighbours.length;c--;){var f=o.neighbours[c],h=this.neighbours[f.id];if(!s.prev||h.id!==s.prev.node.id){var l=h.id+","+o.id;if(!(l in u&&u[l]<=s.d)){var d=s.prev?n(s.prev.node.id,o.id,h.id):0,p=s.d+f.distance+d;u[l]=p,i.push(new a(h,s,p))}}}for(var v=[];s.prev;)s=s.prev,
v.push(s.node.id);return v},t.prototype.dijkstraNeighbours=function(t,e){void 0===e&&(e=-1);for(var n=new r.PriorityQueue(function(t,e){return t.d<=e.d}),i=this.neighbours.length,o=new Array(i);i--;){var a=this.neighbours[i];a.d=i===t?0:Number.POSITIVE_INFINITY,a.q=n.push(a)}for(;!n.empty();){var s=n.pop();if(o[s.id]=s.d,s.id===e){for(var u=[],c=s;"undefined"!=typeof c.prev;)u.push(c.prev.id),c=c.prev;return u}for(i=s.neighbours.length;i--;){var f=s.neighbours[i],c=this.neighbours[f.id],h=s.d+f.distance;s.d!==Number.MAX_VALUE&&c.d>h&&(c.d=h,c.prev=s,n.reduceKey(c.q,c,function(t,e){return t.q=e}))}}return o},t}();e.Calculator=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){return t=+t,e-=t,function(n){return t+e*n}}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(5),f=r(c),h=n(45),l=r(h),d=function(t){function e(t,n){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(!t)throw"must have a obj";return n=n||"",r.objs=t,r.type=n,r.interpolates=null,r.timer=(0,l.default)(r.timerHandle.bind(r)),r._duration=0,e.list.push(r),r}return a(e,t),u(e,[{key:"timerHandle",value:function(t){var e=t/this._duration;e=Math.min(e,1);var n,r,i;if(Array.isArray(this.interpolates))for(var o=0,a=this.interpolates.length;o<a;o++){n=this.objs[o],i=this.interpolates[o];for(r in i)n[r]=i[r](e)}else{n=this.objs,i=this.interpolates;for(r in i)n[r]=i[r](e)}this.emit("change",[e]),t>=this._duration&&this.stop(!0)}},{key:"duration",value:function(t){return this._duration=t,this}},{key:"to",value:function(t){if(Array.isArray(t)&&t.length!==this.objs.length)return console.error("toObjs lenght not eq objs length"),this.stop(),this;var e,n,r;if(Array.isArray(t)){this.interpolates=[];for(var i=0,o=t.length;i<o;i++){e=t[i],r={};for(n in e)r[n]=s(this.objs[i][n],e[n]);this.interpolates.push(r)}}else{e=t,r={};for(n in e)r[n]=s(this.objs[n],e[n]);this.interpolates=r}return this}},{key:"stop",value:function(t){this.timer&&(this.timer.stop(),this.timer=null,this.objs=null,this.interpolates=null,t&&this.emit("end"),e.remove(this.objs))}}],[{key:"remove",value:function(t,n){var r=e.list;e.list=[],r.forEach(function(r){r.objs==t?r.stop(n):e.list.push(r)})}},{key:"removeByType",value:function(t,n){var r=e.list;e.list=[],r.forEach(function(r){r.type===t?r.stop(n):e.list.push(r)})}},{key:"removeAll",value:function(t){e.list.forEach(function(e){e.stop(t)}),e.list=[]}}]),e}(f.default);d.list=[],e.default=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n="FLOAT";for(var r in E)if(t[r]==e)return r;return console.error("gl type not found"),n}function o(t,e){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),o=0;o<r;++o){var a=t.getActiveAttrib(e,o);a&&(n[a.name]={},n[a.name].type=i(t,a.type),n[a.name].size=a.size,n[a.name].location=t.getAttribLocation(e,a.name))}return n}function a(t,e){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),o=0;o<r;++o){var a=t.getActiveUniform(e,o);if(a){var s=a.name;"[0]"===s.substr(-3)&&(s=s.substr(0,s.length-3)),n[s]={},n[s].type=i(t,a.type),n[s].size=a.size,n[s].location=t.getUniformLocation(e,s)}}return n}function s(t,e){e=e||{};var n,r={config:{},strip:0},i=0;for(var o in t)n=t[o].type,r.config[o]={},r.config[o].start=i,r.config[o].components=E[n].components,i+=E[n].components;return r.strip=i,r}function u(t,e,n){var r=n.config,i=n.strip,o=[];for(var a in e)a in r&&void 0!=r[a]?(t.vertexAttribPointer(e[a].location,r[a].components,t.FLOAT,!1,4*i,4*r[a].start),t.enableVertexAttribArray(e[a].location)):o.push("shader need attribute: "+a);return o.length?o.join("\n"):null}function c(t,e){var n,r=[];for(var i in t)t.hasOwnProperty(i)?void 0!=e[i]?(n=t[i].type,b.default.isArray(e[i])&&e[i].length!=E[n].components*t[i].size&&r.push("attribute ["+i+"]: size need "+E[n].components)):r.push("attribute ["+i+"]: is undefined"):r.push("shader need attribute: "+i);return r.length?r:null}function f(t){var e=0;for(var n in t)e+=t[n].components;return e}function h(t,e,n){var r,i=[],o=0;for(var a in e)a in n&&void 0!=n[a]?(r=e[a].type,"SAMPLER_2D"===r?(t.activeTexture(t.TEXTURE0+o),t.bindTexture(t.TEXTURE_2D,n[a]),w[r](t,e[a].location,o),o++):w[r](t,e[a].location,n[a])):i.push("shader need uniform: "+a);return i.length?i.join("\n"):null}function l(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=t.createShader(n);t.shaderSource(o,e),t.compileShader(o),r=t.getShaderParameter(o,t.COMPILE_STATUS);var a=n==t.VERTEX_SHADER?"VERTEX_SHADER":"FRAGMENT_SHADER";return r?o:(console.error("Compiling shader error{"+i+"|"+a+"}:"+t.getShaderInfoLog(o)),t.deleteShader(o),null)}function d(t,e){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=t.createProgram();for(o.shaders={},n=0;n<e.length;++n)t.attachShader(o,e[n]),o.shaders["shader"+n]=e[n];return t.linkProgram(o),r=t.getProgramParameter(o,t.LINK_STATUS),r?o:(console.error("Linking program error{"+i+"}:"+t.getProgramInfoLog(o)),t.deleteProgram(o),null)}function p(t){var e,n=0,r=t;for(var i in r)r.hasOwnProperty(i)&&(e=r[i],e.offset=n,n+=e.components);return{stride:n,attributes:r}}function v(t,e){var n;return n=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),n}function g(t,e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]={},n[r].components=e[r].components,n[r].data=e[r].data,n[r].buffer=v(t,n[r].data));return n}function y(t,e,n){if(!t)return null;t instanceof Array||(t=[t]);for(var r=new Array(e*t.length),i=0;i<t.length;i++){var o=t[i],a=i*e,s=void 0,u=void 0;for(var c in o)if(o.hasOwnProperty(c))if(s=o[c],s instanceof Array){u=n[c].offset;for(var f=0;f<s.length;f++)r[u+f+a]=s[f]}else r[n[c].offset+a]=s}return r}function _(t,e,n){var r,i;for(var o in n)n.hasOwnProperty(o)&&e[o]&&(r=n[o],i=e[o].location,t.bindBuffer(t.ARRAY_BUFFER,r.buffer),t.vertexAttribPointer(i,r.components,t.FLOAT,!1,0,0),t.enableVertexAttribArray(i),t.vertexAttribDivisor(i,0))}function m(t,e,n){var r,i,o=n.attributes;t.bindBuffer(t.ARRAY_BUFFER,n.buffer);for(var a in o)o.hasOwnProperty(a)&&e[a]&&(r=o[a],i=e[a].location,t.vertexAttribPointer(i,r.components,t.FLOAT,!1,4*n.stride,4*r.offset),t.enableVertexAttribArray(i),t.vertexAttribDivisor(i,1))}Object.defineProperty(e,"__esModule",{value:!0}),e.GlType=e.GLComType=void 0,e.getActiveAttributes=o,e.getActiveUniforms=a,e.calTypeOffset=s,e.vertexAttribPointer=u,e.checkAttrValid=c,e.calculateStrip=f,e.setUniforms=h,e.loadShader=l,e.loadProgram=d,e.getInterpolateBuffersInfo=p,e.createBufferData=v,e.createInstanceBufferData=g,e.mapDataToArray=y,e.setInstanceBuffers=_,e.setInterpolateAttrBuffers=m;var x=n(1),b=r(x),E=(e.GLComType={FLOAT:{glType:"FLOAT",bytes:4},BYTE:{glType:"BYTE",bytes:1},SHORT:{glType:"SHORT",bytes:2},UNSIGNED_BYTE:{glType:"UNSIGNED_BYTE",bytes:1},UNSIGNED_SHORT:{glType:"UNSIGNED_SHORT",bytes:2}},e.GlType={FLOAT:{components:1,glType:"FLOAT"},FLOAT_VEC2:{components:2,glType:"FLOAT_VEC2"},FLOAT_VEC3:{components:3,glType:"FLOAT_VEC3"},FLOAT_VEC4:{components:4,glType:"FLOAT_VEC4"},INT:{components:1,glType:"INT"},INT_VEC2:{components:2,glType:"INT_VEC2"},INT_VEC3:{components:3,glType:"INT_VEC3"},INT_VEC4:{components:4,glType:"INT_VEC4"},BOOL:{components:1,glType:"BOOL"},BOOL_VEC2:{components:2,glType:"BOOL_VEC2"},BOOL_VEC3:{components:3,glType:"BOOL_VEC3"},BOOL_VEC4:{components:4,glType:"BOOL_VEC4"},FLOAT_MAT2:{components:4,glType:"FLOAT_MAT2"},FLOAT_MAT3:{components:9,glType:"FLOAT_MAT3"},FLOAT_MAT4:{components:16,glType:"FLOAT_MAT4"},SAMPLER_2D:{components:1,glType:"SAMPLER_2D"},SAMPLER_CUBE:{components:1,glType:"SAMPLER_CUBE"}}),w={FLOAT:function(t,e,n){t.uniform1f(e,n)},FLOAT_VEC2:function(t,e,n){t.uniform2fv(e,n)},FLOAT_VEC3:function(t,e,n){t.uniform3fv(e,n)},FLOAT_VEC4:function(t,e,n){t.uniform4fv(e,n)},FLOAT_MAT2:function(t,e,n){t.uniformMatrix2fv(e,!1,n)},FLOAT_MAT3:function(t,e,n){t.uniformMatrix3fv(e,!1,n)},FLOAT_MAT4:function(t,e,n){t.uniformMatrix4fv(e,!1,n)},SAMPLER_2D:function(t,e,n){n.length?t.uniform1iv(e,n):t.uniform1i(e,n)}}},function(t,e,n){"use strict";function r(){}function i(t,e){var n=new r;if(t instanceof r)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,o=-1,a=t.length;if(null==e)for(;++o<a;)n.set(o,t[o]);else for(;++o<a;)n.set(e(i=t[o],o,t),i)}else if(t)for(var s in t)n.set(s,t[s]);return n}n.d(e,"b",function(){return o});var o="$";r.prototype=i.prototype={constructor:r,has:function(t){return o+t in this},get:function(t){return this[o+t]},set:function(t,e){return this[o+t]=e,this},remove:function(t){var e=o+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===o&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===o&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===o&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===o&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===o&&++t;return t},empty:function(){for(var t in this)if(t[0]===o)return!1;return!0},each:function(t){for(var e in this)e[0]===o&&t(this[e],e.slice(1),this)}},e.a=i},function(t,e,n){"use strict";e.a=function(){return 1e-6*(Math.random()-.5)}},function(t,e,n){"use strict";e.a=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}},function(t,e,n){"use strict";function r(){return m||(E(i),m=b.now()+x)}function i(){m=0}function o(){this._call=this._time=this._next=null}function a(t,e,n){var r=new o;return r.restart(t,e,n),r}function s(){r(),++p;for(var t,e=l;e;)(t=m-e._time)>=0&&e._call.call(null,t),e=e._next;--p}function u(){m=(_=b.now())+x,p=v=0;try{s()}finally{p=0,f(),m=0}}function c(){var t=b.now(),e=t-_;e>y&&(x-=e,_=t)}function f(){for(var t,e,n=l,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:l=e);d=t,h(r)}function h(t){if(!p){v&&(v=clearTimeout(v));var e=t-m;e>24?(t<1/0&&(v=setTimeout(u,t-b.now()-x)),g&&(g=clearInterval(g))):(g||(_=b.now(),g=setInterval(c,y)),p=1,E(u))}}e.c=r,e.b=o,e.a=a;var l,d,p=0,v=0,g=0,y=1e3,_=0,m=0,x=0,b="object"==typeof performance&&performance.now?performance:Date,E="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};o.prototype=a.prototype={constructor:o,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?r():+n)+(null==e?0:+e),this._next||d===this||(d?d._next=this:l=this,d=this),this._call=t,this._time=n,h()},stop:function(){this._call&&(this._call=null,this._time=1/0,h())}}},function(t,e,n){"use strict";function r(t){this._isDirected=!c.has(t,"directed")||t.directed,this._isMultigraph=!!c.has(t,"multigraph")&&t.multigraph,this._isCompound=!!c.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=c.constant(void 0),this._defaultEdgeLabelFn=c.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[h]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function i(t,e){t[e]?t[e]++:t[e]=1}function o(t,e){--t[e]||delete t[e]}function a(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}return i+l+o+l+(c.isUndefined(r)?f:r)}function s(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return r&&(s.name=r),s}function u(t,e){return a(t,e.v,e.w,e.name)}var c=n(3);t.exports=r;var f="\0",h="\0",l="";r.prototype._nodeCount=0,r.prototype._edgeCount=0,r.prototype.isDirected=function(){return this._isDirected},r.prototype.isMultigraph=function(){return this._isMultigraph},r.prototype.isCompound=function(){return this._isCompound},r.prototype.setGraph=function(t){return this._label=t,this},r.prototype.graph=function(){return this._label},r.prototype.setDefaultNodeLabel=function(t){return c.isFunction(t)||(t=c.constant(t)),this._defaultNodeLabelFn=t,this},r.prototype.nodeCount=function(){return this._nodeCount},r.prototype.nodes=function(){return c.keys(this._nodes)},r.prototype.sources=function(){var t=this;return c.filter(this.nodes(),function(e){return c.isEmpty(t._in[e])})},r.prototype.sinks=function(){var t=this;return c.filter(this.nodes(),function(e){return c.isEmpty(t._out[e])})},r.prototype.setNodes=function(t,e){var n=arguments,r=this;return c.each(t,function(t){n.length>1?r.setNode(t,e):r.setNode(t)}),this},r.prototype.setNode=function(t,e){return c.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=h,this._children[t]={},this._children[h][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},r.prototype.node=function(t){return this._nodes[t]},r.prototype.hasNode=function(t){return c.has(this._nodes,t)},r.prototype.removeNode=function(t){var e=this;if(c.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],c.each(this.children(t),function(t){e.setParent(t)}),delete this._children[t]),c.each(c.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],c.each(c.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},r.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(c.isUndefined(e))e=h;else{e+="";for(var n=e;!c.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},r.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},r.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==h)return e}},r.prototype.children=function(t){if(c.isUndefined(t)&&(t=h),this._isCompound){var e=this._children[t];if(e)return c.keys(e)}else{if(t===h)return this.nodes();if(this.hasNode(t))return[]}},r.prototype.predecessors=function(t){var e=this._preds[t];if(e)return c.keys(e)},r.prototype.successors=function(t){var e=this._sucs[t];if(e)return c.keys(e)},r.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return c.union(e,this.successors(t))},r.prototype.isLeaf=function(t){var e;return e=this.isDirected()?this.successors(t):this.neighbors(t),0===e.length},r.prototype.filterNodes=function(t){function e(t){var o=r.parent(t);return void 0===o||n.hasNode(o)?(i[t]=o,o):o in i?i[o]:e(o)}var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var r=this;c.each(this._nodes,function(e,r){t(r)&&n.setNode(r,e)}),c.each(this._edgeObjs,function(t){n.hasNode(t.v)&&n.hasNode(t.w)&&n.setEdge(t,r.edge(t))});var i={};return this._isCompound&&c.each(n.nodes(),function(t){n.setParent(t,e(t))}),n},r.prototype.setDefaultEdgeLabel=function(t){return c.isFunction(t)||(t=c.constant(t)),this._defaultEdgeLabelFn=t,this},r.prototype.edgeCount=function(){return this._edgeCount},r.prototype.edges=function(){return c.values(this._edgeObjs)},r.prototype.setPath=function(t,e){var n=this,r=arguments;return c.reduce(t,function(t,i){return r.length>1?n.setEdge(t,i,e):n.setEdge(t,i),i}),this},r.prototype.setEdge=function(){var t,e,n,r,o=!1,u=arguments[0];"object"==typeof u&&null!==u&&"v"in u?(t=u.v,e=u.w,n=u.name,2===arguments.length&&(r=arguments[1],o=!0)):(t=u,e=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],o=!0)),t=""+t,e=""+e,c.isUndefined(n)||(n=""+n);var f=a(this._isDirected,t,e,n);if(c.has(this._edgeLabels,f))return o&&(this._edgeLabels[f]=r),this;if(!c.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[f]=o?r:this._defaultEdgeLabelFn(t,e,n);var h=s(this._isDirected,t,e,n);return t=h.v,e=h.w,Object.freeze(h),this._edgeObjs[f]=h,i(this._preds[e],t),i(this._sucs[t],e),this._in[e][f]=h,this._out[t][f]=h,this._edgeCount++,this},r.prototype.edge=function(t,e,n){var r=1===arguments.length?u(this._isDirected,arguments[0]):a(this._isDirected,t,e,n);return this._edgeLabels[r]},r.prototype.hasEdge=function(t,e,n){var r=1===arguments.length?u(this._isDirected,arguments[0]):a(this._isDirected,t,e,n);return c.has(this._edgeLabels,r)},r.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?u(this._isDirected,arguments[0]):a(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],o(this._preds[e],t),o(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},r.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=c.values(n);return e?c.filter(r,function(t){return t.v===e}):r}},r.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=c.values(n);return e?c.filter(r,function(t){return t.w===e}):r}},r.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.locks={}}return t.prototype.add=function(t,e){this.locks[t]=e},t.prototype.clear=function(){this.locks={}},t.prototype.isEmpty=function(){for(var t in this.locks)return!1;return!0},t.prototype.apply=function(t){for(var e in this.locks)t(Number(e),this.locks[e])},t}();e.Locks=r;var i=function(){function t(t,e,n){void 0===n&&(n=null),this.D=e,this.G=n,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new o,this.project=null,this.x=t,this.k=t.length;var i=this.n=t[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new r,this.minD=Number.MAX_VALUE;for(var a,s=i;s--;)for(a=i;--a>s;){var u=e[s][a];u>0&&u<this.minD&&(this.minD=u)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),s=this.k;s--;){for(this.g[s]=new Array(i),this.H[s]=new Array(i),a=i;a--;)this.H[s][a]=new Array(i);this.Hd[s]=new Array(i),this.a[s]=new Array(i),this.b[s]=new Array(i),this.c[s]=new Array(i),this.d[s]=new Array(i),this.e[s]=new Array(i),this.ia[s]=new Array(i),this.ib[s]=new Array(i),this.xtmp[s]=new Array(i)}}return t.createSquareMatrix=function(t,e){for(var n=new Array(t),r=0;r<t;++r){n[r]=new Array(t);for(var i=0;i<t;++i)n[r][i]=e(r,i)}return n},t.prototype.offsetDir=function(){for(var t=this,e=new Array(this.k),n=0,r=0;r<this.k;++r){var i=e[r]=this.random.getNextBetween(.01,1)-.5;n+=i*i}return n=Math.sqrt(n),e.map(function(e){return e*=t.minD/n})},t.prototype.computeDerivatives=function(t){var e=this,n=this.n;if(!(n<1)){for(var r,i=new Array(this.k),o=new Array(this.k),a=new Array(this.k),s=0,u=0;u<n;++u){for(r=0;r<this.k;++r)a[r]=this.g[r][u]=0;for(var c=0;c<n;++c)if(u!==c){for(var f=n;f--;){var h=0;for(r=0;r<this.k;++r){var l=i[r]=t[r][u]-t[r][c];h+=o[r]=l*l}if(h>1e-9)break;var d=this.offsetDir();for(r=0;r<this.k;++r)t[r][c]+=d[r]}var p=Math.sqrt(h),v=this.D[u][c],g=null!=this.G?this.G[u][c]:1;if(g>1&&p>v||!isFinite(v))for(r=0;r<this.k;++r)this.H[r][u][c]=0;else{g>1&&(g=1);var y=v*v,_=2*g*(p-v)/(y*p),m=p*p*p,x=2*-g/(y*m);for(isFinite(_)||console.log(_),r=0;r<this.k;++r)this.g[r][u]+=i[r]*_,a[r]-=this.H[r][u][c]=x*(m+v*(o[r]-h)+p*h)}}for(r=0;r<this.k;++r)s=Math.max(s,this.H[r][u][u]=a[r])}for(var b=this.snapGridSize/2,E=this.snapGridSize,w=this.snapStrength,P=w/(b*b),k=this.numGridSnapNodes,u=0;u<k;++u)for(r=0;r<this.k;++r){var T=this.x[r][u],A=T/E,I=A%1,S=A-I,C=Math.abs(I),l=C<=.5?T-S*E:T>0?T-(S+1)*E:T-(S-1)*E;-b<l&&l<=b&&(this.scaleSnapByMaxH?(this.g[r][u]+=s*P*l,this.H[r][u][u]+=s*P):(this.g[r][u]+=P*l,this.H[r][u][u]+=P))}this.locks.isEmpty()||this.locks.apply(function(n,i){for(r=0;r<e.k;++r)e.H[r][n][n]+=s,e.g[r][n]-=s*(i[r]-t[r][n])})}},t.dotProd=function(t,e){for(var n=0,r=t.length;r--;)n+=t[r]*e[r];return n},t.rightMultiply=function(e,n,r){for(var i=e.length;i--;)r[i]=t.dotProd(e[i],n)},t.prototype.computeStepSize=function(e){for(var n=0,r=0,i=0;i<this.k;++i)n+=t.dotProd(this.g[i],e[i]),t.rightMultiply(this.H[i],e[i],this.Hd[i]),r+=t.dotProd(e[i],this.Hd[i]);return 0!==r&&isFinite(r)?1*n/r:0},t.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var t=this.computeStepSize(this.g),e=0;e<this.k;++e)this.takeDescentStep(this.x[e],this.g[e],t);return this.computeStress()},t.copy=function(t,e){for(var n=t.length,r=e[0].length,i=0;i<n;++i)for(var o=0;o<r;++o)e[i][o]=t[i][o]},t.prototype.stepAndProject=function(e,n,r,i){t.copy(e,n),this.takeDescentStep(n[0],r[0],i),this.project&&this.project[0](e[0],e[1],n[0]),this.takeDescentStep(n[1],r[1],i),this.project&&this.project[1](n[0],e[1],n[1]);for(var o=2;o<this.k;o++)this.takeDescentStep(n[o],r[o],i)},t.mApply=function(t,e,n){for(var r=t;r-- >0;)for(var i=e;i-- >0;)n(r,i)},t.prototype.matrixApply=function(e){t.mApply(this.k,this.n,e)},t.prototype.computeNextPosition=function(t,e){var n=this;this.computeDerivatives(t);var r=this.computeStepSize(this.g);if(this.stepAndProject(t,e,this.g,r),this.project){this.matrixApply(function(r,i){return n.e[r][i]=t[r][i]-e[r][i]});var i=this.computeStepSize(this.e);i=Math.max(.2,Math.min(i,1)),this.stepAndProject(t,e,this.e,i)}},t.prototype.run=function(t){for(var e=Number.MAX_VALUE,n=!1;!n&&t-- >0;){var r=this.rungeKutta();n=Math.abs(e/r-1)<this.threshold,e=r}return e},t.prototype.rungeKutta=function(){var e=this;this.computeNextPosition(this.x,this.a),t.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),t.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var n=0;return this.matrixApply(function(t,r){var i=(e.a[t][r]+2*e.b[t][r]+2*e.c[t][r]+e.d[t][r])/6,o=e.x[t][r]-i;n+=o*o,e.x[t][r]=i}),n},t.mid=function(e,n,r){t.mApply(e.length,e[0].length,function(t,i){return r[t][i]=e[t][i]+(n[t][i]-e[t][i])/2})},t.prototype.takeDescentStep=function(t,e,n){for(var r=0;r<this.n;++r)t[r]=t[r]-n*e[r]},t.prototype.computeStress=function(){for(var t=0,e=0,n=this.n-1;e<n;++e)for(var r=e+1,i=this.n;r<i;++r){for(var o=0,a=0;a<this.k;++a){var s=this.x[a][e]-this.x[a][r];o+=s*s}o=Math.sqrt(o);var u=this.D[e][r];if(isFinite(u)){var c=u-o,f=u*u;t+=c*c/f}}return t},t.zeroDistance=1e-10,t}();e.Descent=i;var o=function(){function t(t){void 0===t&&(t=1),this.seed=t,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return t.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},t.prototype.getNextBetween=function(t,e){return t+this.getNext()*(e-t)},t}();e.PseudoRandom=o},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)n[r]={};for(var r in e)n[r]={};return Object.keys(n).length}function i(t,e){var n=0;for(var r in t)"undefined"!=typeof e[r]&&++n;return n}function o(t,e){var n={},r=function(t,e){"undefined"==typeof n[t]&&(n[t]={}),n[t][e]={}};return t.forEach(function(t){var n=e.getSourceIndex(t),i=e.getTargetIndex(t);r(n,i),r(i,n)}),n}function a(t,e,n,r){var i=o(t,r);t.forEach(function(t){var o=i[r.getSourceIndex(t)],a=i[r.getTargetIndex(t)];r.setLength(t,1+e*n(o,a))})}function s(t,e,n){void 0===n&&(n=1),a(t,n,function(t,e){return Math.sqrt(r(t,e)-i(t,e))},e)}function u(t,e,n){void 0===n&&(n=1),a(t,n,function(t,e){return Math.min(Object.keys(t).length,Object.keys(e).length)<1.1?0:i(t,e)/r(t,e)},e)}function c(t,e,n,r){var i=f(t,e,r),o={};i.forEach(function(t,e){return t.forEach(function(t){return o[t]=e})});var a=[];return e.forEach(function(t){var e=r.getSourceIndex(t),i=r.getTargetIndex(t),s=o[e],u=o[i];s!==u&&a.push({axis:n,left:e,right:i,gap:r.getMinSeparation(t)})}),a}function f(t,e,n){function r(t){t.index=t.lowlink=o++,a.push(t),t.onStack=!0;for(var e=0,n=t.out;e<n.length;e++){var i=n[e];"undefined"==typeof i.index?(r(i),t.lowlink=Math.min(t.lowlink,i.lowlink)):i.onStack&&(t.lowlink=Math.min(t.lowlink,i.index))}if(t.lowlink===t.index){for(var u=[];a.length&&(i=a.pop(),i.onStack=!1,u.push(i),i!==t););s.push(u.map(function(t){return t.id}))}}for(var i=[],o=0,a=[],s=[],u=0;u<t;u++)i.push({id:u,out:[]});for(var c=0,f=e;c<f.length;c++){var h=f[c],l=i[n.getSourceIndex(h)],d=i[n.getTargetIndex(h)];l.out.push(d)}for(var p=0,v=i;p<v.length;p++){var g=v[p];"undefined"==typeof g.index&&r(g)}return s}Object.defineProperty(e,"__esModule",{value:!0}),e.symmetricDiffLinkLengths=s,e.jaccardLinkLengths=u,e.generateDirectedEdgeConstraints=c,e.stronglyConnectedComponents=f},function(t,e,n){"use strict";function r(t,e,n){for(var r=t.map(function(t){return new a(t.desiredCenter)}),i=[],s=t.length,u=0;u<s-1;u++){var f=t[u],h=t[u+1];i.push(new o(r[u],r[u+1],(f.size+h.size)/2))}var l=r[0],d=r[s-1],p=t[0].size/2,v=t[s-1].size/2,g=null,y=null;e&&(g=new a(e,1e3*l.weight),r.push(g),i.push(new o(g,l,p))),n&&(y=new a(n,1e3*d.weight),r.push(y),i.push(new o(d,y,v)));var _=new c(r,i);return _.solve(),{newCenters:r.slice(0,t.length).map(function(t){return t.position()}),lowerBound:g?g.position():l.position()-p,upperBound:y?y.position():d.position()+v}}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.scale=t,this.AB=0,this.AD=0,this.A2=0}return t.prototype.addVariable=function(t){var e=this.scale/t.scale,n=t.offset/t.scale,r=t.weight;this.AB+=r*e*n,this.AD+=r*e*t.desiredPosition,this.A2+=r*e*e},t.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},t}();e.PositionStats=i;var o=function(){function t(t,e,n,r){void 0===r&&(r=!1),this.left=t,this.right=e,this.gap=n,this.equality=r,this.active=!1,this.unsatisfiable=!1,this.left=t,this.right=e,this.gap=n,this.equality=r}return t.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},t}();e.Constraint=o;var a=function(){function t(t,e,n){void 0===e&&(e=1),void 0===n&&(n=1),this.desiredPosition=t,this.weight=e,this.scale=n,this.offset=0}return t.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},t.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},t.prototype.visitNeighbours=function(t,e){var n=function(n,r){return n.active&&t!==r&&e(n,r)};this.cOut.forEach(function(t){return n(t,t.right)}),this.cIn.forEach(function(t){return n(t,t.left)})},t}();e.Variable=a;var s=function(){function t(t){this.vars=[],t.offset=0,this.ps=new i(t.scale),this.addVariable(t)}return t.prototype.addVariable=function(t){t.block=this,this.vars.push(t),this.ps.addVariable(t),this.posn=this.ps.getPosn()},t.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var t=0,e=this.vars.length;t<e;++t)this.ps.addVariable(this.vars[t]);this.posn=this.ps.getPosn()},t.prototype.compute_lm=function(t,e,n){var r=this,i=t.dfdv();return t.visitNeighbours(e,function(e,o){var a=r.compute_lm(o,t,n);o===e.right?(i+=a*e.left.scale,e.lm=a):(i+=a*e.right.scale,e.lm=-a),n(e)}),i/t.scale},t.prototype.populateSplitBlock=function(t,e){var n=this;t.visitNeighbours(e,function(e,r){r.offset=t.offset+(r===e.right?e.gap:-e.gap),n.addVariable(r),n.populateSplitBlock(r,t)})},t.prototype.traverse=function(t,e,n,r){var i=this;void 0===n&&(n=this.vars[0]),void 0===r&&(r=null),n.visitNeighbours(r,function(r,o){e.push(t(r)),i.traverse(t,e,o,n)})},t.prototype.findMinLM=function(){var t=null;return this.compute_lm(this.vars[0],null,function(e){!e.equality&&(null===t||e.lm<t.lm)&&(t=e)}),t},t.prototype.findMinLMBetween=function(t,e){this.compute_lm(t,null,function(){});var n=null;return this.findPath(t,null,e,function(t,e){!t.equality&&t.right===e&&(null===n||t.lm<n.lm)&&(n=t)}),n},t.prototype.findPath=function(t,e,n,r){var i=this,o=!1;return t.visitNeighbours(e,function(e,a){o||a!==n&&!i.findPath(a,t,n,r)||(o=!0,r(e,a))}),o},t.prototype.isActiveDirectedPathBetween=function(t,e){if(t===e)return!0;for(var n=t.cOut.length;n--;){var r=t.cOut[n];if(r.active&&this.isActiveDirectedPathBetween(r.right,e))return!0}return!1},t.split=function(e){return e.active=!1,[t.createSplitBlock(e.left),t.createSplitBlock(e.right)]},t.createSplitBlock=function(e){var n=new t(e);return n.populateSplitBlock(e,null),n},t.prototype.splitBetween=function(e,n){var r=this.findMinLMBetween(e,n);if(null!==r){var i=t.split(r);return{constraint:r,lb:i[0],rb:i[1]}}return null},t.prototype.mergeAcross=function(t,e,n){e.active=!0;for(var r=0,i=t.vars.length;r<i;++r){var o=t.vars[r];o.offset+=n,this.addVariable(o)}this.posn=this.ps.getPosn()},t.prototype.cost=function(){for(var t=0,e=this.vars.length;e--;){var n=this.vars[e],r=n.position()-n.desiredPosition;t+=r*r*n.weight}return t},t}();e.Block=s;var u=function(){function t(t){this.vs=t;var e=t.length;for(this.list=new Array(e);e--;){var n=new s(t[e]);this.list[e]=n,n.blockInd=e}}return t.prototype.cost=function(){for(var t=0,e=this.list.length;e--;)t+=this.list[e].cost();return t},t.prototype.insert=function(t){t.blockInd=this.list.length,this.list.push(t)},t.prototype.remove=function(t){var e=this.list.length-1,n=this.list[e];this.list.length=e,t!==n&&(this.list[t.blockInd]=n,n.blockInd=t.blockInd)},t.prototype.merge=function(t){var e=t.left.block,n=t.right.block,r=t.right.offset-t.left.offset-t.gap;e.vars.length<n.vars.length?(n.mergeAcross(e,t,r),this.remove(e)):(e.mergeAcross(n,t,-r),this.remove(n))},t.prototype.forEach=function(t){this.list.forEach(t)},t.prototype.updateBlockPositions=function(){this.list.forEach(function(t){return t.updateWeightedPosition()})},t.prototype.split=function(t){var e=this;this.updateBlockPositions(),this.list.forEach(function(n){var r=n.findMinLM();null!==r&&r.lm<c.LAGRANGIAN_TOLERANCE&&(n=r.left.block,s.split(r).forEach(function(t){return e.insert(t)}),e.remove(n),t.push(r))})},t}();e.Blocks=u;var c=function(){function t(t,e){this.vs=t,this.cs=e,this.vs=t,t.forEach(function(t){t.cIn=[],t.cOut=[]}),this.cs=e,e.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),this.inactive=e.map(function(t){return t.active=!1,t}),this.bs=null}return t.prototype.cost=function(){return this.bs.cost()},t.prototype.setStartingPositions=function(t){this.inactive=this.cs.map(function(t){return t.active=!1,t}),this.bs=new u(this.vs),this.bs.forEach(function(e,n){return e.posn=t[n]})},t.prototype.setDesiredPositions=function(t){this.vs.forEach(function(e,n){return e.desiredPosition=t[n]})},t.prototype.mostViolated=function(){for(var e=Number.MAX_VALUE,n=null,r=this.inactive,i=r.length,o=i,a=0;a<i;++a){var s=r[a];if(!s.unsatisfiable){var u=s.slack();if((s.equality||u<e)&&(e=u,n=s,o=a,s.equality))break}}return o!==i&&(e<t.ZERO_UPPERBOUND&&!n.active||n.equality)&&(r[o]=r[i-1],r.length=i-1),n},t.prototype.satisfy=function(){null==this.bs&&(this.bs=new u(this.vs)),this.bs.split(this.inactive);for(var e=null;(e=this.mostViolated())&&(e.equality||e.slack()<t.ZERO_UPPERBOUND&&!e.active);){
var n=e.left.block,r=e.right.block;if(n!==r)this.bs.merge(e);else{if(n.isActiveDirectedPathBetween(e.right,e.left)){e.unsatisfiable=!0;continue}var i=n.splitBetween(e.left,e.right);if(null===i){e.unsatisfiable=!0;continue}this.bs.insert(i.lb),this.bs.insert(i.rb),this.bs.remove(n),this.inactive.push(i.constraint),e.slack()>=0?this.inactive.push(e):this.bs.merge(e)}}},t.prototype.solve=function(){this.satisfy();for(var t=Number.MAX_VALUE,e=this.bs.cost();Math.abs(t-e)>1e-4;)this.satisfy(),t=e,e=this.bs.cost();return e},t.LAGRANGIAN_TOLERANCE=-1e-4,t.ZERO_UPPERBOUND=-1e-10,t}();e.Solver=c,e.removeOverlapInOneDimension=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={};r.normalize=function(){return[1,0,0,0,1,0,0,0,1]},r.matrixFromTranslate=function(t,e){return[1,0,0,0,1,0,t,e,1]},r.matrixFromRotation=function(t){var e=Math.cos(t),n=Math.sin(t);return[e,n,0,-n,e,0,0,0,1]},r.matrixFromScale=function(t,e){return[t,0,0,0,e,0,0,0,1]},r.invert=function(t){var e=3,n=t[0*e+0],r=t[0*e+1],i=t[0*e+2],o=t[1*e+0],a=t[1*e+1],s=t[1*e+2],u=t[2*e+0],c=t[2*e+1],f=t[2*e+2],h=n*(a*f-s*c)-r*(o*f-s*u)+i*(o*c-a*u);return[(a*f-s*c)/h,(i*c-r*f)/h,(r*s-i*a)/h,(s*u-o*f)/h,(n*f-i*u)/h,(i*o-n*s)/h,(o*c-a*u)/h,(r*u-n*c)/h,(n*a-r*o)/h]},r.multiply=function(t,e){var n=3,r=t[0*n+0],i=t[0*n+1],o=t[0*n+2],a=t[1*n+0],s=t[1*n+1],u=t[1*n+2],c=t[2*n+0],f=t[2*n+1],h=t[2*n+2],l=e[0*n+0],d=e[0*n+1],p=e[0*n+2],v=e[1*n+0],g=e[1*n+1],y=e[1*n+2],_=e[2*n+0],m=e[2*n+1],x=e[2*n+2];return[r*l+i*v+o*_,r*d+i*g+o*m,r*p+i*y+o*x,a*l+s*v+u*_,a*d+s*g+u*m,a*p+s*y+u*x,c*l+f*v+h*_,c*d+f*g+h*m,c*p+f*y+h*x]},r.transformPoint=function(t,e){var n=t[0],r=t[1],i=3,o=e[0*i+0],a=e[0*i+1],s=(e[0*i+2],e[1*i+0]),u=e[1*i+1],c=(e[1*i+2],e[2*i+0]),f=e[2*i+1];e[2*i+2];return[n*o+r*s+c,n*a+r*u+f]},r.rotateVector=function(t,e){var n=t[0],r=t[1],i=3,o=e[0*i+0],a=e[0*i+1],s=(e[0*i+2],e[1*i+0]),u=e[1*i+1];e[1*i+2],e[2*i+0],e[2*i+1],e[2*i+2];return[n*o+r*s,n*a+r*u]},r.multiMatrix=function(t){return t.reduce(function(t,e){return r.multiply(t,e)})},e.default=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),c=r(u),f=n(5),h=r(f),l=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t=t||{},n.read(t),n}return a(e,t),s(e,[{key:"clear",value:function(){this.nodes=[],this.edges=[],this.nodesIndex=Object.create(null),this.edgesIndex=Object.create(null),this.inEdgesIndex=Object.create(null),this.outEdgesIndex=Object.create(null),this.groups=Object.create(null),this.curveGroup=null}},{key:"read",value:function(t){t=t||{},this.clear(),t.groups&&(this.groups=t.groups),t.nodes&&t.nodes.forEach(function(t){t.hasOwnProperty("id")||(t.id=c.default.uuid()),t.id+="",this.nodesIndex[t.id]=t,this.nodes.push(t)}.bind(this)),t.edges&&t.edges.forEach(function(t){return t.hasOwnProperty("id")||(t.id=c.default.uuid()),t.id+="",t.source+="",t.target+="",t.source&&this.nodesIndex[t.source]?t.target&&this.nodesIndex[t.target]?(this.edgesIndex[t.id]=t,this.inEdgesIndex[t.target]=this.inEdgesIndex[t.target]||[],this.inEdgesIndex[t.target].push(t.id),this.outEdgesIndex[t.source]=this.outEdgesIndex[t.source]||[],this.outEdgesIndex[t.source].push(t.id),void this.edges.push(t)):(console.error(t),void console.error("no target node")):(console.error(t),void console.error("no source node"))}.bind(this)),this.createEdgeCurveCount(),this.emit("reset")}},{key:"createEdgeCurveCount",value:function(){var t,e,n,r=this.curveGroup={};this.edges.forEach(function(i){t=this.nodesIndex[i.source],e=this.nodesIndex[i.target],n=i.source+"&"+i.target,r[n]||(r[n]=r[i.target+"&"+i.source]={counter:0,source:i.source}),i._curveGroup=r[n],i.curveCount=r[n].counter,r[n].counter++,i.curveOrder=i.source==r[n].source}.bind(this))}},{key:"addNode",value:function(t){if(t=t||[],0!=t.length){c.default.isArray(t)||(t=[t]);for(var e,n=0;n<t.length;n++)e=t[n],e.id||(e.id=c.default.uuid()),e.id+="",this.nodesIndex[e.id]?console.error("node has existed."):(this.nodes.push(e),this.nodesIndex[e.id]=e);var r=t.map(function(t){return t.id});this.emit("add",["node",r])}}},{key:"removeNode",value:function(t){c.default.isArray(t)||(t=[t]),t.forEach(function(t){this._removeNode(t)}.bind(this)),this.emit("remove",["node",t])}},{key:"_removeNode",value:function(t){if(t&&this.nodesIndex[t]){for(var e=this.nodes,n=0;n<e.length;n++)if(e[n].id==t){e.splice(n,1);break}var r;r=this.inEdgesIndex[t],r&&r.length>0&&(r=r.slice(),r.forEach(function(t){this.removeEdge(t)}.bind(this))),r=this.outEdgesIndex[t],r&&r.length>0&&(r=r.slice(),r.forEach(function(t){this.removeEdge(t)}.bind(this))),this.nodesIndex[t]=null,this.inEdgesIndex[t]=null,this.outEdgesIndex[t]=null}}},{key:"addEdge",value:function(t){if(t=t||[],0!=t.length){c.default.isArray(t)||(t=[t]);for(var e,n=0;n<t.length;n++)e=t[n],e.id||(e.id=c.default.uuid()),e.id+="",e.source+="",e.target+="",this.edgesIndex[e.id]&&console.error(e,"edge has existed."),e.source&&this.nodesIndex[e.source]||console.error(e,"no source node"),e.target&&this.nodesIndex[e.target]||console.error(e,"no target node"),this.edges.push(e),this.edgesIndex[e.id]=e,this.inEdgesIndex[e.target]=this.inEdgesIndex[e.target]||[],this.inEdgesIndex[e.target].push(e.id),this.outEdgesIndex[e.source]=this.outEdgesIndex[e.source]||[],this.outEdgesIndex[e.source].push(e.id);this.createEdgeCurveCount();var r=t.map(function(t){return t.id});this.emit("add",["edge",r])}}},{key:"removeEdge",value:function(t){c.default.isArray(t)||(t=[t]),t.forEach(function(t){this._removeEdge(t)}.bind(this)),this.emit("remove",["edge",t])}},{key:"_removeEdge",value:function(t){if(t&&this.edgesIndex[t]){var e,n,r,i=this.edgesIndex[t];if(n=this.outEdgesIndex[i.source],n.length>0)for(var o=0;o<n.length;o++)if(n[o]==t){n.splice(o,1);break}if(r=this.inEdgesIndex[i.target],r.length>0)for(var o=0;o<r.length;o++)if(r[o]==t){r.splice(o,1);break}e=this.edges;for(var o=0;o<e.length;o++)if(e[o].id==t){e.splice(o,1);break}this.edgesIndex[t]=null}}},{key:"getNodes",value:function(){return this.nodes}},{key:"setNodeData",value:function(t,e){c.default.isArray(t)||(t=[t]);var n=c.default.isArray(e),r=[],i=[],o=[];t.forEach(function(t,a){var s=this.nodesIndex[t],u=n?e[a]:e,c=!1;(u.hasOwnProperty("x")||u.hasOwnProperty("y"))&&(c=!0);for(var f in u)s[f]=u[f];r.push(u),c&&(this.inEdgesIndex[t]&&this.inEdgesIndex[t].length>0&&this.inEdgesIndex[t].forEach(function(t){o.push(t),i.push({source:!0,target:!0})}),this.outEdgesIndex[t]&&this.outEdgesIndex[t].length>0&&this.outEdgesIndex[t].forEach(function(t){o.push(t),i.push({source:!0,target:!0})}))}.bind(this)),this.emit("change",["node",t,r]),o.length>0&&this.emit("change",["edge",o,i])}},{key:"setEdgeData",value:function(t,e){c.default.isArray(t)||(t=[t]);var n=c.default.isArray(e),r=[];t.forEach(function(t,i){var o=this.edgesIndex[t],a=n?e[i]:e;for(var s in a)o[s]=a[s];r.push(a)}.bind(this)),this.emit("change",["edge",t,r])}}]),e}(h.default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.instanceDataDefault={a_uv:{components:2,data:[0,0,1,0,0,1,1,0,0,1,1,1]},a_p:{components:2,data:[-.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,.5,-.5]}}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(1),f=i(c),h=n(21),l=i(h),d=n(44),p=i(d),v=n(5),g=i(v),y=n(60),_=(i(y),n(61)),m=i(_),x=n(59),b=i(x),E=n(46),w=i(E),P=n(11),k=i(P),T=n(43),A=n(63),I=i(A),S=n(23),C=n(12),M=r(C),O={MOVE:"move",DEFAULT:"default",POINTER:"pointer"},L=function(t){function e(t,n){o(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.context=t,r.config=r.context.config,r.container=n,r.graph=t.graph,r.needUpdate=!0,r.sampleRatio=1,r._destroy=!1,r.gl=null,r.initGl(),r.glResource=new p.default(r.gl),r.textureIcon=new b.default(r.config,r.gl),r.textureText=new m.default(r.config,r.gl),r.mouseType=O,r.mouseLock=!1,r.projectMatrix=null,r.camera={scale:1,positionX:0,positionY:0,rotation:0},r.saveDataFrame=null,r.saveDataTex=null,r.renderCache={graph:{layers:[],index:Object.create(null)},node:{layers:[],index:Object.create(null),filters:[],update:{map:Object.create(null),num:0}},edge:{layers:[],index:Object.create(null),filters:[],update:{map:Object.create(null),num:0}}},r.renderLayerMap=Object.create(null),r.renderOptions={},r.renderLayersConfig=r.config.renderLayersConfig||e.defaultLayersConfig,r.initEvent(),r.initDefaultHandler(),r.initIconTexture(),r.initTextTexture(),r.initRenderLayer(),w.default.call(r),r}return s(e,t),u(e,[{key:"destroy",value:function(){this.context=null,this.graph=null,this.textureIcon.destroy(),this.textureIcon=null,this.textureText.destroy(),this.textureText=null,this.container.parentNode.removeChild(this.container),this.container=null,this.renderCache=null,this.renderLayerMap=null,this.renderLayersConfig=null,this.clearRenderMap(),this.clearListeners(),this.glResource.clear(),this.glResource=null,this._destroy=!0}},{key:"initGl",value:function(){var t,e={preserveDrawingBuffer:!0,premultipliedAlpha:!0,alpha:!0,antialias:!0},n=this.container;if(t=n.getContext("experimental-webgl",e)||n.getContext("webgl",e),!t)throw new Error("browser not support WebGL!");if((0,T.addExtensionsToContext)(t),!t.drawArraysInstanced||!t.createVertexArray)throw new Error("browser not support drawArraysInstanced and createVertexArray.");this.gl=t}},{key:"initDefaultHandler",value:function(){this.getNodeLabelHandle=function(t){var e,n=[];if(t.label)for(e=0;e<t.label.length;e++)n.push(t.label.charAt(e));var r;return t.tag&&(r=t.tag,f.default.isArray(r)||(r=[r]),r.forEach(function(t){if(t.text)for(e=0;e<t.text.length;e++)n.push(t.text.charAt(e))})),n},this.getEdgeLabelHandle=function(t){var e,n=[];if(t.label)for(e=0;e<t.label.length;e++)n.push(t.label.charAt(e));return n},this.getNodeIconHandle=function(t){var e=[];t.icon&&e.push(t.icon);var n;return t.tag&&(n=t.tag,f.default.isArray(n)||(n=[n]),n.forEach(function(t){t.icon&&e.push(t.icon)})),e},this.getEdgeIconHandle=function(){return[]}}},{key:"initEvent",value:function(){function t(t,r){e(t,r),n(t,r)}function e(t,e){var n=r.textureText.textinfo.infos,i=[],o="node"==e?r.getNodeLabelHandle:r.getEdgeLabelHandle;t.forEach(function(t){var e=o(t);e.forEach(function(t){n[t]||i.push(t)})}),i.length>0&&r.textureText.addTexts(i)}function n(t,e){var n=r.textureIcon.iconinfo.infos,i=[],o="node"==e?r.getNodeIconHandle:r.getEdgeIconHandle;t.forEach(function(t){var e=o(t);e.forEach(function(t){n[t]||i.push(t)})}),i.length>0&&r.textureIcon.addIcons(i)}var r=this;this.graph.on("change",function(e,n,i){t(i,e),"node"==e?r.updateNodeRenderData(n,i):"edge"==e&&r.updateEdgeRenderData(n,i)}),this.graph.on("reset",function(){r.clearRenderCache(),r.initIconTexture(),r.initTextTexture()}),this.graph.on("add",function(e,n){f.default.isArray(n)||(n=[n]);var i=null;i="node"==e?n.map(function(t){return r.graph.nodesIndex[t]}):n.map(function(t){return r.graph.edgesIndex[t]}),t(i,e),"node"==e?r.updateNodeRenderData(n,null):"edge"==e&&r.updateEdgeRenderData(n,null)}),this.graph.on("remove",function(t,e){f.default.isArray(e)||(e=[e]),"node"==t?(r.setLayerResizeFlag(r.renderCache.node.layers),e.forEach(function(t){r.renderCache.node.index[t]&&delete r.renderCache.node.index[t]})):(r.setLayerResizeFlag(r.renderCache.edge.layers),e.forEach(function(t){r.renderCache.edge.index[t]&&delete r.renderCache.edge.index[t]}))})}},{key:"initTextTexture",value:function(){console.time("initTextTexture"),this.textureText.clear();var t=this.graph.nodes,e=this.graph.edges,n=this,r={},i=[];t.forEach(function(t){var e=n.getNodeLabelHandle(t);e.forEach(function(t){t&&!r[t]&&(r[t]=!0,i.push(t))})}),e.forEach(function(t){var e=n.getEdgeLabelHandle(t);e.forEach(function(t){t&&!r[t]&&(r[t]=!0,i.push(t))})}),i.length>0&&this.textureText.addTexts(i),console.timeEnd("initTextTexture")}},{key:"initIconTexture",value:function(){this.textureIcon.clear();var t=this.graph.nodes,e=this.graph.edges,n=this,r={},i=[];this.config.textureIcons&&this.config.textureIcons.length>0&&this.config.textureIcons.forEach(function(t){return i.push(t)}),t.forEach(function(t){var e=n.getNodeIconHandle(t);e.forEach(function(t){r[t]||(r[t]=!0,i.push(t))})}),e.forEach(function(t){var e=n.getEdgeIconHandle(t);e.forEach(function(t){r[t]||(r[t]=!0,i.push(t))})}),i.length>0&&this.textureIcon.addIcons(i)}},{key:"initRenderLayer",value:function(){var t,e=this.renderLayerMap,n=this.gl,r=this,i=this.renderLayersConfig;this.renderLayersConfig=[],i.forEach(function(i){var o=f.default.extend(i,{enable:!0,show:!0,option:{},filters:[]});if(e[o.name]=o,!o.custom){t=M.loadProgram(n,[M.loadShader(n,(0,I.default)(o.render.shaderVert),n.VERTEX_SHADER,o.name),M.loadShader(n,(0,I.default)(o.render.shaderFrag),n.FRAGMENT_SHADER,o.name)],o.name),t.activeAttributes=M.getActiveAttributes(n,t),t.activeUniforms=M.getActiveUniforms(n,t),o.instanceNum=0,o.interpolateInfo=null,o.render.attributes&&(o.interpolateInfo=M.getInterpolateBuffersInfo(o.render.attributes),o.interpolateInfo.buffer=n.createBuffer()),o.instanceData=M.createInstanceBufferData(n,o.render.instanceData||S.instanceDataDefault);var a=o.instanceData[Object.keys(o.instanceData)[0]];o.instanceElements=a.data.length/a.components,o.uniforms=null,o.program=t,o.tempData=[],o.needResize=!1,void 0==o.check&&(o.check=function(){return!0}),r.renderCache[o.context].layers.push(o.name),r.renderLayersConfig.push(o),o.render.init&&f.default.isFunction(o.render.init)&&o.render.init.call(o,r)}}.bind(this))}},{key:"clearRenderMap",value:function(){var t,e=this.renderLayerMap;this.gl;for(var n in e)t=e[n],t.option=null,t.filters=null,t.custom||(t.program.offsetConfig=null,t.program.activeAttributes=null,t.program.activeUniforms=null,t.program=null)}},{key:"render",value:function(){!this._destroy&&this.needUpdate&&(this.resizeCanvas(),this.updateChange(),this.updateContextCache("graph"),this.updateContextCache("node"),this.updateContextCache("edge"),this.resizeLayerData("graph"),this.resizeLayerData("node"),this.resizeLayerData("edge"),this.updateLayerUniformData(),this.draw(),this.needUpdate=!1)}},{key:"_setFlag",value:function(){var t=this.gl;t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.enable(t.BLEND),t.disable(t.DEPTH_TEST)}},{key:"_clear",value:function(){var t=this.gl;t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)}},{key:"draw",value:function(){var t,e,n,r,i,o,a,s;i=this.renderLayerMap,n=this.gl,this._clear(),this.emit("renderBefore",[this]);for(var u=0;u<this.renderLayersConfig.length;u++)if(e=this.renderLayersConfig[u],t=e.name,o=i[t].program,a=i[t].interpolateInfo,s=i[t].instanceData,e.enable&&e.show&&(!a||0!=e.instanceNum)){if(this._setFlag(),n.useProgram(o),M.setInstanceBuffers(n,o.activeAttributes,s),a&&M.setInterpolateAttrBuffers(n,o.activeAttributes,a),r=M.setUniforms(n,o.activeUniforms,i[t].uniforms))throw new Error("render layer[ "+t+" ] err:\n "+r);a?n.drawArraysInstanced(n.TRIANGLES,0,i[t].instanceElements,i[t].instanceNum):n.drawArrays(n.TRIANGLES,0,i[t].instanceElements)}this.emit("renderAfter",[this])}},{key:"updateChange",value:function(){var t,e,n;if(t=this.renderCache.node.update,t.num>0){n=t.map;for(e in n)this.updateCacheByData("node",this.graph.nodesIndex[e],n[e]);t.num=0,t.map=Object.create(null)}if(t=this.renderCache.edge.update,t.num>0){n=t.map;for(e in n)this.updateCacheByData("edge",this.graph.edgesIndex[e],n[e]);t.num=0,t.map=Object.create(null)}}},{key:"addChange",value:function(t,e,n){if("node"==t||"edge"==t||"graph"==t){var r,i;if("graph"===t);else{r=this.renderCache[t].update.map=this.renderCache[t].update.map||Object.create(null),r[e]?i=r[e]:r[e]=i={};for(var o in n)i[o]=n[o];this.renderCache[t].update.num++}}}},{key:"updateCacheByData",value:function(t,e,n,r){var i,o,a,s,u,c=this.renderCache[t].layers,f=this.renderLayerMap,h=this.gl;i="graph"==t?this.renderCache.graph.index:this.renderCache[t].index[e.id]=this.renderCache[t].index[e.id]||{},r=r||c,r.forEach(function(r){if(f[r].check(e)&&f[r].enable&&(!n||f[r].cache)){a=f[r].render.render.call(f[r],{dirtyAttr:n,data:e,config:this.config,graph:this.graph,render:this,textureText:this.textureText,option:f[r].option,renderOptions:this.renderOptions,textureIcon:this.textureIcon});var c=f[r].interpolateInfo;o=M.mapDataToArray(a,c.stride,c.attributes)||[],u=c.stride,i[r]=i[r]||{bufferStart:-1,data:[]},f[r].cache&&"graph"!==t?(f[r].needResize||o.length!==i[r].data.length?f[r].needResize=!0:(s=4*i[r].bufferStart,h.bindBuffer(h.ARRAY_BUFFER,c.buffer),h.bufferSubData(h.ARRAY_BUFFER,s,new Float32Array(o))),i[r].data=o):(i[r].data=o,f[r].needResize=!0)}}.bind(this))}},{key:"updateContextCache",value:function(t){if("node"==t||"edge"==t||"graph"==t){var e,n,r,i=(this.gl,this.renderLayerMap);if(r=[],n=this.renderCache[t].layers,n.forEach(function(t){!i[t].cache&&i[t].enable&&i[t].interpolateInfo&&r.push(t)}),"graph"===t)this.updateCacheByData(t,null,null,r);else{if(r.length<1)return;e="node"==t?this.graph.nodes:this.graph.edges;for(var o=0,a=e.length;o<a;o++)this.updateCacheByData(t,e[o],null,r)}}}},{key:"setLayerResizeFlag",value:function(t){if(t){f.default.isArray(t)||(t=[t]);var e=this.renderLayerMap;this.forceRender(),t.forEach(function(t){e[t].needResize=!0})}}},{key:"resizeLayerData",value:function(t){if("node"==t||"edge"==t||"graph"==t){var e,n,r,i,o,a=this.gl,s=this.renderLayerMap;if(n=this.renderCache[t].layers,o=[],n.forEach(function(t){s[t].needResize&&s[t].interpolateInfo&&(o.push(t),s[t].tempData=[])}),"graph"===t)o.forEach(function(t){s[t].tempData=this.renderCache.graph.index[t].data}.bind(this));else if(e="node"==t?this.graph.nodes:this.graph.edges,o.length>0)for(var u=0,c=e.length;u<c;u++)if(i=e[u],"edge"!=t||!this.graph.nodesIndex[i.source].filter&&!this.graph.nodesIndex[i.target].filter){if(this.renderCache[t].filters&&this.renderCache[t].filters.length){if(i.filter=this._checkFilters(this.renderCache[t].filters,i))continue}else i.filter=!1;r=this.renderCache[t].index[i.id];var f;for(var h in r)if(s[h].needResize){r[h].bufferStart=s[h].tempData.length,f=r[h].data;for(var l=0,d=f.length;l<d;l++)s[h].tempData.push(f[l]||0)}}else i.filter=!0;o.forEach(function(t){a.bindBuffer(a.ARRAY_BUFFER,s[t].interpolateInfo.buffer),a.bufferData(a.ARRAY_BUFFER,new Float32Array(s[t].tempData),a.DYNAMIC_DRAW),s[t].instanceNum=s[t].tempData.length/s[t].interpolateInfo.stride,s[t].cache=!0,s[t].needResize=!1,s[t].tempData=[]})}}},{key:"updateLayerUniformData",value:function(){var t,e,n=this.renderLayerMap;for(var r in n)if(!n[r].custom){if(t=n[r].render.getUniforms.call(n[r],{matrix:l.default.multiMatrix([this.getCameraMatrix(!0),this.projectMatrix]),camera:this.camera,config:this.config,graph:this.graph,render:this,option:n[r].option,sampleRatio:this.sampleRatio,textureText:this.textureText,textureIcon:this.textureIcon,renderOptions:this.renderOptions}),e=M.checkAttrValid(n[r].program.activeUniforms,t))throw e.join("\n");n[r].uniforms=t}}},{key:"updateNodeRenderData",value:function(t,e){f.default.isArray(t)||(t=[t]),f.default.isArray(e)||(e=[e]),this.forceRender(),t.forEach(function(t,n){this.addChange("node",t,e[n])}.bind(this))}},{key:"updateEdgeRenderData",value:function(t,e){Array.isArray(t)||(t=[t]),Array.isArray(e)||(e=[e]),this.forceRender(),t.forEach(function(t,n){this.addChange("edge",t,e[n])}.bind(this))}},{key:"clearRenderCache",value:function(t){this.forceRender();var e=this;if(t)f.default.isArray(t)||(t=[t]),t.forEach(function(t){e.renderLayerMap[t].custom||(e.renderLayerMap[t].cache=!1,e.renderLayerMap[t].interpolateInfo.bufferSize=0)});else{for(var n in e.renderLayerMap)e.renderLayerMap[n].custom||(e.renderLayerMap[n].cache=!1,e.renderLayerMap[n].instanceNum=0);e.renderCache.graph.index={},e.renderCache.node.index={},e.renderCache.edge.index={}}}},{key:"disableRenderLayer",value:function(t){this.forceRender();var e=this.renderLayerMap;f.default.isArray(t)||(t=[t]),t.forEach(function(t){e[t]&&(e[t].enable=!1)})}},{key:"enableRenderLayer",value:function(t){this.forceRender();var e=this.renderLayerMap;f.default.isArray(t)||(t=[t]),t.forEach(function(t){e[t]&&(e[t].enable=!0,e[t].cache=!1)})}},{key:"hideRenderLayer",value:function(t){this.forceRender();var e=this.renderLayerMap;f.default.isArray(t)||(t=[t]),t.forEach(function(t){e[t]&&(e[t].show=!1)})}},{key:"showRenderLayer",value:function(t){this.forceRender();var e=this.renderLayerMap;f.default.isArray(t)||(t=[t]),t.forEach(function(t){e[t]&&(e[t].show=!0)})}},{key:"updateByLayerFilter",value:function(t){if(t){this.forceRender();var e=this.renderLayerMap;f.default.isArray(t)||(t=[t]),t.forEach(function(t){e[t]&&(e[t].indexCache=!1)})}}},{key:"updateByContextFilter",value:function(t){var e=this.renderCache[t].layers,n=this.renderLayerMap;this.forceRender(),e.forEach(function(t){n[t].needResize=!0})}},{key:"setContextFilters",value:function(t,e){this.forceRender(),e=e||[],f.default.isArray(e)||(e=[e]);var n=this.renderLayerMap,r=this.renderCache[t].layers;r.forEach(function(t){n[t].needResize=!0}),this.renderCache[t].filters=e}},{key:"getContextFilters",value:function(t){return this.renderCache[t]?this.renderCache[t].filters:null}},{key:"setLayerOption",value:function(t,e){var n=this.renderLayerMap;if(n[t]){this.forceRender();for(var r in e)e.hasOwnProperty(r)&&(n[t].option[r]=e[r])}}},{key:"setMouseType",value:function(t){this.mouseLock||(this.container.style.cursor=t)}},{key:"setMouseLock",value:function(t){this.mouseLock=!!t}},{key:"getCameraMatrix",value:function(t){var e=l.default.multiMatrix([l.default.matrixFromScale(this.camera.scale,this.camera.scale),l.default.matrixFromRotation(this.camera.rotation),l.default.matrixFromTranslate(this.camera.positionX,this.camera.positionY)]);return t?l.default.invert(e):e}},{key:"resizeCanvas",value:function(){var t,e=this.sampleRatio;t=this.container;var n=t.clientWidth*e|0,r=t.clientHeight*e|0;t.width===n&&t.height===r||(t.width=n,t.height=r,this.gl.viewport(0,0,t.width,t.height)),this.projectMatrix=l.default.matrixFromScale(2/this.container.clientWidth,2/this.container.clientHeight)}},{key:"graphToDomPos",value:function(t){var e=this.container,n=l.default.transformPoint([t.x,t.y],this.getCameraMatrix(!0));return{x:n[0]+e.clientWidth/2,y:e.clientHeight/2-n[1]}}},{key:"domToCameraPos",value:function(t){var e=this.container;return{x:t.x-e.clientWidth/2,y:e.clientHeight/2-t.y}}},{key:"cameraToGraphPos",value:function(t,e){var n=e?l.default.rotateVector([t.x,t.y],this.getCameraMatrix()):l.default.transformPoint([t.x,t.y],this.getCameraMatrix());return{x:n[0],y:n[1]}}},{key:"forceRender",value:function(){this.needUpdate=!0}},{key:"zoomFromPosition",value:function(t,e,n,r){var i,o,a=this.camera.scale,s=t*a;if(s<this.config.zoomMin&&(s=this.config.zoomMin),s>this.config.zoomMax&&(s=this.config.zoomMax),null!=e&&null!=n){var u=l.default.rotateVector([e*(s-a)/a,n*(s-a)/a],this.getCameraMatrix());i=this.camera.positionX-u[0],o=this.camera.positionY-u[1]}r?this.zoomTo({positionX:i,positionY:o,scale:s},r):(this.camera.positionX=i,this.camera.positionY=o,this.camera.scale=s)}},{key:"zoomTo",value:function(t,e){k.default.removeByType("camera");var n=this;if(e)new k.default(this.camera,"camera").to(t).duration(e).on("change",function(){n.forceRender()});else{for(var r in t)this.camera[r]=t[r];this.forceRender()}}},{key:"saveData",value:function(){var t=this.gl;this.sampleRatio=16;var e=this.container.clientWidth*this.sampleRatio,n=this.container.clientHeight*this.sampleRatio;this.gl.viewport(0,0,e,n),this.saveDataFrame||(this.saveDataFrame=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.saveDataFrame),this.saveDataTex=t.createTexture(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.saveDataTex),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.saveDataTex,0),t.bindTexture(t.TEXTURE_2D,null)),t.bindFramebuffer(t.FRAMEBUFFER,this.saveDataFrame),this.render();var r=new Uint8Array(e*n*4);t.readPixels(0,0,e,n,t.RGBA,t.UNSIGNED_BYTE,r),t.bindFramebuffer(t.FRAMEBUFFER,null),this.sampleRatio=1,this.gl.viewport(0,0,this.container.clientWidth,this.container.clientHeight);var i=document.createElement("canvas");i.width=e,i.height=n;for(var o=i.getContext("2d"),a=o.createImageData(e,n),s=0,u=a.data.length;s<u;s++)a.data[s]=r[s];o.putImageData(a,0,0),i.toBlob(function(t){saveAs(t,"test.png")})}},{key:"_checkFilters",value:function(t,e){for(var n=!1,r=0;r<t.length&&!(n=t[r](e));r++);return n}}],[{key:"support",value:function(){if(e.hasOwnProperty("isSupport"))return e.isSupport;var t=null,n=document.createElement("canvas");return(t=n.getContext("experimental-webgl")||n.getContext("webgl"))?((0,T.addExtensionsToContext)(t),t.drawArraysInstanced&&t.createVertexArray?(e.isSupport=!0,e.isSupport):(console.error("browser not support drawArraysInstanced and createVertexArray."),e.isSupport=!1,e.isSupport)):(console.error("browser not support WebGL!"),e.isSupport=!1,e.isSupport)}}]),e}(g.default);e.default=L},function(t,e,n){"use strict";var r=(n(72),n(73),n(13));n.d(e,"a",function(){return r.a});n(71),n(74),n(70)},function(t,e,n){"use strict";function r(t){return t.x}function i(t){return t.y}var o=n(75),a=n(25),s=n(98);e.b=r,e.c=i;var u=10,c=Math.PI*(3-Math.sqrt(5));e.a=function(t){function e(){r(),m.call("tick",h),l<d&&(_.stop(),m.call("end",h))}function r(){var e,n,r=t.length;for(l+=(v-l)*p,y.each(function(t){t(l)}),e=0;e<r;++e)n=t[e],null==n.fx?n.x+=n.vx*=g:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=g:(n.y=n.fy,n.vy=0)}function i(){for(var e,n=0,r=t.length;n<r;++n){if(e=t[n],e.index=n,isNaN(e.x)||isNaN(e.y)){var i=u*Math.sqrt(n),o=n*c;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function f(e){return e.initialize&&e.initialize(t),e}var h,l=1,d=.001,p=1-Math.pow(d,1/300),v=0,g=.6,y=n.i(a.a)(),_=n.i(s.a)(e),m=n.i(o.a)("tick","end");return null==t&&(t=[]),i(),h={tick:r,restart:function(){return _.restart(e),h},stop:function(){return _.stop(),h},nodes:function(e){return arguments.length?(t=e,i(),y.each(f),h):t},alpha:function(t){return arguments.length?(l=+t,h):l},alphaMin:function(t){return arguments.length?(d=+t,h):d},alphaDecay:function(t){return arguments.length?(p=+t,h):+p},alphaTarget:function(t){return arguments.length?(v=+t,h):v},velocityDecay:function(t){return arguments.length?(g=1-t,h):1-g},force:function(t,e){return arguments.length>1?(null==e?y.remove(t):y.set(t,f(e)),h):y.get(t)},find:function(e,n,r){var i,o,a,s,u,c=0,f=t.length;for(null==r?r=1/0:r*=r,c=0;c<f;++c)s=t[c],i=e-s.x,o=n-s.y,a=i*i+o*o,a<r&&(u=s,r=a);return u},on:function(t,e){return arguments.length>1?(m.on(t,e),h):m.on(t)}}}},function(t,e,n){"use strict";var r=n(90);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";function r(t){var e=new u({directed:!1}),n=t.nodes()[0],r=t.nodeCount();e.setNode(n,{});for(var s,f;i(e,t)<r;)s=o(e,t),f=e.hasNode(s.v)?c(t,s):-c(t,s),a(e,t,f);return e}function i(t,e){function n(r){s.forEach(e.nodeEdges(r),function(i){var o=i.v,a=r===o?i.w:o;t.hasNode(a)||c(e,i)||(t.setNode(a,{}),t.setEdge(r,a,{}),n(a))})}return s.forEach(t.nodes(),n),t.nodeCount()}function o(t,e){return s.minBy(e.edges(),function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return c(e,n)})}function a(t,e,n){s.forEach(t.nodes(),function(t){e.node(t).rank+=n})}var s=n(0),u=n(4).Graph,c=n(9).slack;t.exports=r},function(t,e,n){function r(t,e,n){o.isArray(e)||(e=[e]);var r=(t.isDirected()?t.successors:t.neighbors).bind(t),a=[],s={};return o.each(e,function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);i(t,e,"post"===n,s,r,a)}),a}function i(t,e,n,r,a,s){o.has(r,e)||(r[e]=!0,n||s.push(e),o.each(a(e),function(e){i(t,e,n,r,a,s)}),n&&s.push(e))}var o=n(3);t.exports=r},function(t,e,n){function r(t,e,n,r){return i(t,String(e),n||s,r||function(e){return t.outEdges(e)})}function i(t,e,n,r){var i,o,s={},u=new a,c=function(t){var e=t.v!==i?t.v:t.w,r=s[e],a=n(t),c=o.distance+a;if(a<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+a);c<r.distance&&(r.distance=c,r.predecessor=i,u.decrease(e,c))};for(t.nodes().forEach(function(t){var n=t===e?0:Number.POSITIVE_INFINITY;s[t]={distance:n},u.add(t,n)});u.size()>0&&(i=u.removeMin(),o=s[i],o.distance!==Number.POSITIVE_INFINITY);)r(i).forEach(c);return s}var o=n(3),a=n(33);t.exports=r;var s=o.constant(1)},function(t,e,n){function r(t){function e(s){var u=o[s]={onStack:!0,lowlink:n,index:n++};if(r.push(s),t.successors(s).forEach(function(t){i.has(o,t)?o[t].onStack&&(u.lowlink=Math.min(u.lowlink,o[t].index)):(e(t),u.lowlink=Math.min(u.lowlink,o[t].lowlink))}),u.lowlink===u.index){var c,f=[];do c=r.pop(),o[c].onStack=!1,f.push(c);while(s!==c);a.push(f)}}var n=0,r=[],o={},a=[];return t.nodes().forEach(function(t){i.has(o,t)||e(t)}),a}var i=n(3);t.exports=r},function(t,e,n){function r(t){function e(s){if(o.has(r,s))throw new i;o.has(n,s)||(r[s]=!0,n[s]=!0,o.each(t.predecessors(s),e),delete r[s],a.push(s))}var n={},r={},a=[];if(o.each(t.sinks(),e),o.size(n)!==t.nodeCount())throw new i;return a}function i(){}var o=n(3);t.exports=r,r.CycleException=i},function(t,e,n){function r(){this._arr=[],this._keyIndices={}}var i=n(3);t.exports=r,r.prototype.size=function(){return this._arr.length},r.prototype.keys=function(){return this._arr.map(function(t){return t.key})},r.prototype.has=function(t){return i.has(this._keyIndices,t)},r.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},r.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},r.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!i.has(n,t)){var r=this._arr,o=r.length;return n[t]=o,r.push({key:t,priority:e}),this._decrease(o),!0}return!1},r.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},r.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,
this._decrease(n)},r.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},r.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&(e=t>>1,!(n[e].priority<r));)this._swap(t,e),t=e},r.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e}},function(t,e,n){(function(t,r){var i;(function(){function o(t,e){return t.set(e[0],e[1]),t}function a(t,e){return t.add(e),t}function s(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function u(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function c(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function f(t,e){for(var n=null==t?0:t.length;n--&&e(t[n],n,t)!==!1;);return t}function h(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function l(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function d(t,e){var n=null==t?0:t.length;return!!n&&P(t,e,0)>-1}function p(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function v(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function g(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function y(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function _(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function m(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function x(t){return t.split("")}function b(t){return t.match(Ve)||[]}function E(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function w(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function P(t,e,n){return e===e?K(t,e,n):w(t,T,n)}function k(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function T(t){return t!==t}function A(t,e){var n=null==t?0:t.length;return n?O(t,e)/n:Dt}function I(t){return function(e){return null==e?it:e[t]}}function S(t){return function(e){return null==t?it:t[e]}}function C(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function M(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function O(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==it&&(n=n===it?o:n+o)}return n}function L(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function R(t,e){return v(e,function(e){return[e,t[e]]})}function z(t){return function(e){return t(e)}}function N(t,e){return v(e,function(e){return t[e]})}function D(t,e){return t.has(e)}function j(t,e){for(var n=-1,r=t.length;++n<r&&P(e,t[n],0)>-1;);return n}function F(t,e){for(var n=t.length;n--&&P(e,t[n],0)>-1;);return n}function B(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}function U(t){return"\\"+nr[t]}function G(t,e){return null==t?it:t[e]}function V(t){return Yn.test(t)}function X(t){return qn.test(t)}function H(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function W(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function Y(t,e){return function(n){return t(e(n))}}function q(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==ht||(t[n]=ht,o[i++]=n)}return o}function $(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Q(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function K(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function Z(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}function J(t){return V(t)?et(t):mr(t)}function tt(t){return V(t)?nt(t):x(t)}function et(t){for(var e=Hn.lastIndex=0;Hn.test(t);)++e;return e}function nt(t){return t.match(Hn)||[]}function rt(t){return t.match(Wn)||[]}var it,ot="4.17.4",at=200,st="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ut="Expected a function",ct="__lodash_hash_undefined__",ft=500,ht="__lodash_placeholder__",lt=1,dt=2,pt=4,vt=1,gt=2,yt=1,_t=2,mt=4,xt=8,bt=16,Et=32,wt=64,Pt=128,kt=256,Tt=512,At=30,It="...",St=800,Ct=16,Mt=1,Ot=2,Lt=3,Rt=1/0,zt=9007199254740991,Nt=1.7976931348623157e308,Dt=NaN,jt=4294967295,Ft=jt-1,Bt=jt>>>1,Ut=[["ary",Pt],["bind",yt],["bindKey",_t],["curry",xt],["curryRight",bt],["flip",Tt],["partial",Et],["partialRight",wt],["rearg",kt]],Gt="[object Arguments]",Vt="[object Array]",Xt="[object AsyncFunction]",Ht="[object Boolean]",Wt="[object Date]",Yt="[object DOMException]",qt="[object Error]",$t="[object Function]",Qt="[object GeneratorFunction]",Kt="[object Map]",Zt="[object Number]",Jt="[object Null]",te="[object Object]",ee="[object Promise]",ne="[object Proxy]",re="[object RegExp]",ie="[object Set]",oe="[object String]",ae="[object Symbol]",se="[object Undefined]",ue="[object WeakMap]",ce="[object WeakSet]",fe="[object ArrayBuffer]",he="[object DataView]",le="[object Float32Array]",de="[object Float64Array]",pe="[object Int8Array]",ve="[object Int16Array]",ge="[object Int32Array]",ye="[object Uint8Array]",_e="[object Uint8ClampedArray]",me="[object Uint16Array]",xe="[object Uint32Array]",be=/\b__p \+= '';/g,Ee=/\b(__p \+=) '' \+/g,we=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Pe=/&(?:amp|lt|gt|quot|#39);/g,ke=/[&<>"']/g,Te=RegExp(Pe.source),Ae=RegExp(ke.source),Ie=/<%-([\s\S]+?)%>/g,Se=/<%([\s\S]+?)%>/g,Ce=/<%=([\s\S]+?)%>/g,Me=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oe=/^\w*$/,Le=/^\./,Re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ze=/[\\^$.*+?()[\]{}|]/g,Ne=RegExp(ze.source),De=/^\s+|\s+$/g,je=/^\s+/,Fe=/\s+$/,Be=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ue=/\{\n\/\* \[wrapped with (.+)\] \*/,Ge=/,? & /,Ve=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Xe=/\\(\\)?/g,He=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,We=/\w*$/,Ye=/^[-+]0x[0-9a-f]+$/i,qe=/^0b[01]+$/i,$e=/^\[object .+?Constructor\]$/,Qe=/^0o[0-7]+$/i,Ke=/^(?:0|[1-9]\d*)$/,Ze=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Je=/($^)/,tn=/['\n\r\u2028\u2029\\]/g,en="\\ud800-\\udfff",nn="\\u0300-\\u036f",rn="\\ufe20-\\ufe2f",on="\\u20d0-\\u20ff",an=nn+rn+on,sn="\\u2700-\\u27bf",un="a-z\\xdf-\\xf6\\xf8-\\xff",cn="\\xac\\xb1\\xd7\\xf7",fn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",hn="\\u2000-\\u206f",ln=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dn="A-Z\\xc0-\\xd6\\xd8-\\xde",pn="\\ufe0e\\ufe0f",vn=cn+fn+hn+ln,gn="['’]",yn="["+en+"]",_n="["+vn+"]",mn="["+an+"]",xn="\\d+",bn="["+sn+"]",En="["+un+"]",wn="[^"+en+vn+xn+sn+un+dn+"]",Pn="\\ud83c[\\udffb-\\udfff]",kn="(?:"+mn+"|"+Pn+")",Tn="[^"+en+"]",An="(?:\\ud83c[\\udde6-\\uddff]){2}",In="[\\ud800-\\udbff][\\udc00-\\udfff]",Sn="["+dn+"]",Cn="\\u200d",Mn="(?:"+En+"|"+wn+")",On="(?:"+Sn+"|"+wn+")",Ln="(?:"+gn+"(?:d|ll|m|re|s|t|ve))?",Rn="(?:"+gn+"(?:D|LL|M|RE|S|T|VE))?",zn=kn+"?",Nn="["+pn+"]?",Dn="(?:"+Cn+"(?:"+[Tn,An,In].join("|")+")"+Nn+zn+")*",jn="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Fn="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",Bn=Nn+zn+Dn,Un="(?:"+[bn,An,In].join("|")+")"+Bn,Gn="(?:"+[Tn+mn+"?",mn,An,In,yn].join("|")+")",Vn=RegExp(gn,"g"),Xn=RegExp(mn,"g"),Hn=RegExp(Pn+"(?="+Pn+")|"+Gn+Bn,"g"),Wn=RegExp([Sn+"?"+En+"+"+Ln+"(?="+[_n,Sn,"$"].join("|")+")",On+"+"+Rn+"(?="+[_n,Sn+Mn,"$"].join("|")+")",Sn+"?"+Mn+"+"+Ln,Sn+"+"+Rn,Fn,jn,xn,Un].join("|"),"g"),Yn=RegExp("["+Cn+en+an+pn+"]"),qn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$n=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Qn=-1,Kn={};Kn[le]=Kn[de]=Kn[pe]=Kn[ve]=Kn[ge]=Kn[ye]=Kn[_e]=Kn[me]=Kn[xe]=!0,Kn[Gt]=Kn[Vt]=Kn[fe]=Kn[Ht]=Kn[he]=Kn[Wt]=Kn[qt]=Kn[$t]=Kn[Kt]=Kn[Zt]=Kn[te]=Kn[re]=Kn[ie]=Kn[oe]=Kn[ue]=!1;var Zn={};Zn[Gt]=Zn[Vt]=Zn[fe]=Zn[he]=Zn[Ht]=Zn[Wt]=Zn[le]=Zn[de]=Zn[pe]=Zn[ve]=Zn[ge]=Zn[Kt]=Zn[Zt]=Zn[te]=Zn[re]=Zn[ie]=Zn[oe]=Zn[ae]=Zn[ye]=Zn[_e]=Zn[me]=Zn[xe]=!0,Zn[qt]=Zn[$t]=Zn[ue]=!1;var Jn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},tr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},er={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},nr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rr=parseFloat,ir=parseInt,or="object"==typeof t&&t&&t.Object===Object&&t,ar="object"==typeof self&&self&&self.Object===Object&&self,sr=or||ar||Function("return this")(),ur="object"==typeof e&&e&&!e.nodeType&&e,cr=ur&&"object"==typeof r&&r&&!r.nodeType&&r,fr=cr&&cr.exports===ur,hr=fr&&or.process,lr=function(){try{return hr&&hr.binding&&hr.binding("util")}catch(t){}}(),dr=lr&&lr.isArrayBuffer,pr=lr&&lr.isDate,vr=lr&&lr.isMap,gr=lr&&lr.isRegExp,yr=lr&&lr.isSet,_r=lr&&lr.isTypedArray,mr=I("length"),xr=S(Jn),br=S(tr),Er=S(er),wr=function t(e){function n(t){if(cu(t)&&!bl(t)&&!(t instanceof x)){if(t instanceof i)return t;if(bf.call(t,"__wrapped__"))return aa(t)}return new i(t)}function r(){}function i(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=it}function x(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=jt,this.__views__=[]}function S(){var t=new x(this.__wrapped__);return t.__actions__=Bi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Bi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Bi(this.__views__),t}function K(){if(this.__filtered__){var t=new x(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function et(){var t=this.__wrapped__.value(),e=this.__dir__,n=bl(t),r=e<0,i=n?t.length:0,o=Co(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,f=this.__iteratees__,h=f.length,l=0,d=Kf(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return bi(t,this.__actions__);var p=[];t:for(;u--&&l<d;){c+=e;for(var v=-1,g=t[c];++v<h;){var y=f[v],_=y.iteratee,m=y.type,x=_(g);if(m==Ot)g=x;else if(!x){if(m==Mt)continue t;break t}}p[l++]=g}return p}function nt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ve(){this.__data__=sh?sh(null):{},this.size=0}function en(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function nn(t){var e=this.__data__;if(sh){var n=e[t];return n===ct?it:n}return bf.call(e,t)?e[t]:it}function rn(t){var e=this.__data__;return sh?e[t]!==it:bf.call(e,t)}function on(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=sh&&e===it?ct:e,this}function an(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function sn(){this.__data__=[],this.size=0}function un(t){var e=this.__data__,n=Ln(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():zf.call(e,n,1),--this.size,!0}function cn(t){var e=this.__data__,n=Ln(e,t);return n<0?it:e[n][1]}function fn(t){return Ln(this.__data__,t)>-1}function hn(t,e){var n=this.__data__,r=Ln(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function ln(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function dn(){this.size=0,this.__data__={hash:new nt,map:new(rh||an),string:new nt}}function pn(t){var e=To(this,t).delete(t);return this.size-=e?1:0,e}function vn(t){return To(this,t).get(t)}function gn(t){return To(this,t).has(t)}function yn(t,e){var n=To(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function _n(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new ln;++e<n;)this.add(t[e])}function mn(t){return this.__data__.set(t,ct),this}function xn(t){return this.__data__.has(t)}function bn(t){var e=this.__data__=new an(t);this.size=e.size}function En(){this.__data__=new an,this.size=0}function wn(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Pn(t){return this.__data__.get(t)}function kn(t){return this.__data__.has(t)}function Tn(t,e){var n=this.__data__;if(n instanceof an){var r=n.__data__;if(!rh||r.length<at-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new ln(r)}return n.set(t,e),this.size=n.size,this}function An(t,e){var n=bl(t),r=!n&&xl(t),i=!n&&!r&&wl(t),o=!n&&!r&&!i&&Il(t),a=n||r||i||o,s=a?L(t.length,pf):[],u=s.length;for(var c in t)!e&&!bf.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||jo(c,u))||s.push(c);return s}function In(t){var e=t.length;return e?t[ni(0,e-1)]:it}function Sn(t,e){return na(Bi(t),Fn(e,0,t.length))}function Cn(t){return na(Bi(t))}function Mn(t,e,n){(n===it||$s(t[e],n))&&(n!==it||e in t)||Dn(t,e,n)}function On(t,e,n){var r=t[e];bf.call(t,e)&&$s(r,n)&&(n!==it||e in t)||Dn(t,e,n)}function Ln(t,e){for(var n=t.length;n--;)if($s(t[n][0],e))return n;return-1}function Rn(t,e,n,r){return mh(t,function(t,i,o){e(r,t,n(t),o)}),r}function zn(t,e){return t&&Ui(e,Xu(e),t)}function Nn(t,e){return t&&Ui(e,Hu(e),t)}function Dn(t,e,n){"__proto__"==e&&Ff?Ff(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function jn(t,e){for(var n=-1,r=e.length,i=sf(r),o=null==t;++n<r;)i[n]=o?it:Uu(t,e[n]);return i}function Fn(t,e,n){return t===t&&(n!==it&&(t=t<=n?t:n),e!==it&&(t=t>=e?t:e)),t}function Bn(t,e,n,r,i,o){var a,s=e&lt,u=e&dt,f=e&pt;if(n&&(a=i?n(t,r,i,o):n(t)),a!==it)return a;if(!uu(t))return t;var h=bl(t);if(h){if(a=Lo(t),!s)return Bi(t,a)}else{var l=Mh(t),d=l==$t||l==Qt;if(wl(t))return Ii(t,s);if(l==te||l==Gt||d&&!i){if(a=u||d?{}:Ro(t),!s)return u?Vi(t,Nn(a,t)):Gi(t,zn(a,t))}else{if(!Zn[l])return i?t:{};a=zo(t,l,Bn,s)}}o||(o=new bn);var p=o.get(t);if(p)return p;o.set(t,a);var v=f?u?Eo:bo:u?Hu:Xu,g=h?it:v(t);return c(g||t,function(r,i){g&&(i=r,r=t[i]),On(a,i,Bn(r,e,n,i,t,o))}),a}function Un(t){var e=Xu(t);return function(n){return Gn(n,t,e)}}function Gn(t,e,n){var r=n.length;if(null==t)return!r;for(t=lf(t);r--;){var i=n[r],o=e[i],a=t[i];if(a===it&&!(i in t)||!o(a))return!1}return!0}function Hn(t,e,n){if("function"!=typeof t)throw new vf(ut);return Rh(function(){t.apply(it,n)},e)}function Wn(t,e,n,r){var i=-1,o=d,a=!0,s=t.length,u=[],c=e.length;if(!s)return u;n&&(e=v(e,z(n))),r?(o=p,a=!1):e.length>=at&&(o=D,a=!1,e=new _n(e));t:for(;++i<s;){var f=t[i],h=null==n?f:n(f);if(f=r||0!==f?f:0,a&&h===h){for(var l=c;l--;)if(e[l]===h)continue t;u.push(f)}else o(e,h,r)||u.push(f)}return u}function Yn(t,e){var n=!0;return mh(t,function(t,r,i){return n=!!e(t,r,i)}),n}function qn(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(s===it?a===a&&!xu(a):n(a,s)))var s=a,u=o}return u}function Jn(t,e,n,r){var i=t.length;for(n=Tu(n),n<0&&(n=-n>i?0:i+n),r=r===it||r>i?i:Tu(r),r<0&&(r+=i),r=n>r?0:Au(r);n<r;)t[n++]=e;return t}function tr(t,e){var n=[];return mh(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function er(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Do),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?er(s,e-1,n,r,i):g(i,s):r||(i[i.length]=s)}return i}function nr(t,e){return t&&bh(t,e,Xu)}function or(t,e){return t&&Eh(t,e,Xu)}function ar(t,e){return l(e,function(e){return ou(t[e])})}function ur(t,e){e=Ti(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[ra(e[n++])];return n&&n==r?t:it}function cr(t,e,n){var r=e(t);return bl(t)?r:g(r,n(t))}function hr(t){return null==t?t===it?se:Jt:jf&&jf in lf(t)?So(t):Qo(t)}function lr(t,e){return t>e}function mr(t,e){return null!=t&&bf.call(t,e)}function wr(t,e){return null!=t&&e in lf(t)}function kr(t,e,n){return t>=Kf(e,n)&&t<Qf(e,n)}function Tr(t,e,n){for(var r=n?p:d,i=t[0].length,o=t.length,a=o,s=sf(o),u=1/0,c=[];a--;){var f=t[a];a&&e&&(f=v(f,z(e))),u=Kf(f.length,u),s[a]=!n&&(e||i>=120&&f.length>=120)?new _n(a&&f):it}f=t[0];var h=-1,l=s[0];t:for(;++h<i&&c.length<u;){var g=f[h],y=e?e(g):g;if(g=n||0!==g?g:0,!(l?D(l,y):r(c,y,n))){for(a=o;--a;){var _=s[a];if(!(_?D(_,y):r(t[a],y,n)))continue t}l&&l.push(y),c.push(g)}}return c}function Ar(t,e,n,r){return nr(t,function(t,i,o){e(r,n(t),i,o)}),r}function Ir(t,e,n){e=Ti(e,t),t=Zo(t,e);var r=null==t?t:t[ra(ka(e))];return null==r?it:s(r,t,n)}function Sr(t){return cu(t)&&hr(t)==Gt}function Cr(t){return cu(t)&&hr(t)==fe}function Mr(t){return cu(t)&&hr(t)==Wt}function Or(t,e,n,r,i){return t===e||(null==t||null==e||!cu(t)&&!cu(e)?t!==t&&e!==e:Lr(t,e,n,r,Or,i))}function Lr(t,e,n,r,i,o){var a=bl(t),s=bl(e),u=a?Vt:Mh(t),c=s?Vt:Mh(e);u=u==Gt?te:u,c=c==Gt?te:c;var f=u==te,h=c==te,l=u==c;if(l&&wl(t)){if(!wl(e))return!1;a=!0,f=!1}if(l&&!f)return o||(o=new bn),a||Il(t)?yo(t,e,n,r,i,o):_o(t,e,u,n,r,i,o);if(!(n&vt)){var d=f&&bf.call(t,"__wrapped__"),p=h&&bf.call(e,"__wrapped__");if(d||p){var v=d?t.value():t,g=p?e.value():e;return o||(o=new bn),i(v,g,n,r,o)}}return!!l&&(o||(o=new bn),mo(t,e,n,r,i,o))}function Rr(t){return cu(t)&&Mh(t)==Kt}function zr(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=lf(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var u=s[0],c=t[u],f=s[1];if(a&&s[2]){if(c===it&&!(u in t))return!1}else{var h=new bn;if(r)var l=r(c,f,u,t,e,h);if(!(l===it?Or(f,c,vt|gt,r,h):l))return!1}}return!0}function Nr(t){if(!uu(t)||Vo(t))return!1;var e=ou(t)?Af:$e;return e.test(ia(t))}function Dr(t){return cu(t)&&hr(t)==re}function jr(t){return cu(t)&&Mh(t)==ie}function Fr(t){return cu(t)&&su(t.length)&&!!Kn[hr(t)]}function Br(t){return"function"==typeof t?t:null==t?Rc:"object"==typeof t?bl(t)?Wr(t[0],t[1]):Hr(t):Gc(t)}function Ur(t){if(!Xo(t))return $f(t);var e=[];for(var n in lf(t))bf.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Gr(t){if(!uu(t))return $o(t);var e=Xo(t),n=[];for(var r in t)("constructor"!=r||!e&&bf.call(t,r))&&n.push(r);return n}function Vr(t,e){return t<e}function Xr(t,e){var n=-1,r=Qs(t)?sf(t.length):[];return mh(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Hr(t){var e=Ao(t);return 1==e.length&&e[0][2]?Wo(e[0][0],e[0][1]):function(n){return n===t||zr(n,t,e)}}function Wr(t,e){return Bo(t)&&Ho(e)?Wo(ra(t),e):function(n){var r=Uu(n,t);return r===it&&r===e?Vu(n,t):Or(e,r,vt|gt)}}function Yr(t,e,n,r,i){t!==e&&bh(e,function(o,a){if(uu(o))i||(i=new bn),qr(t,e,a,n,Yr,r,i);else{var s=r?r(t[a],o,a+"",t,e,i):it;s===it&&(s=o),Mn(t,a,s)}},Hu)}function qr(t,e,n,r,i,o,a){var s=t[n],u=e[n],c=a.get(u);if(c)return void Mn(t,n,c);var f=o?o(s,u,n+"",t,e,a):it,h=f===it;if(h){var l=bl(u),d=!l&&wl(u),p=!l&&!d&&Il(u);f=u,l||d||p?bl(s)?f=s:Ks(s)?f=Bi(s):d?(h=!1,f=Ii(u,!0)):p?(h=!1,f=zi(u,!0)):f=[]:yu(u)||xl(u)?(f=s,xl(s)?f=Su(s):(!uu(s)||r&&ou(s))&&(f=Ro(u))):h=!1}h&&(a.set(u,f),i(f,u,r,o,a),a.delete(u)),Mn(t,n,f)}function $r(t,e){var n=t.length;if(n)return e+=e<0?n:0,jo(e,n)?t[e]:it}function Qr(t,e,n){var r=-1;e=v(e.length?e:[Rc],z(ko()));var i=Xr(t,function(t,n,i){var o=v(e,function(e){return e(t)});return{criteria:o,index:++r,value:t}});return M(i,function(t,e){return Di(t,e,n)})}function Kr(t,e){return Zr(t,e,function(e,n){return Vu(t,n)})}function Zr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=ur(t,a);n(s,a)&&ui(o,Ti(a,t),s)}return o}function Jr(t){return function(e){return ur(e,t)}}function ti(t,e,n,r){var i=r?k:P,o=-1,a=e.length,s=t;for(t===e&&(e=Bi(e)),n&&(s=v(t,z(n)));++o<a;)for(var u=0,c=e[o],f=n?n(c):c;(u=i(s,f,u,r))>-1;)s!==t&&zf.call(s,u,1),zf.call(t,u,1);return t}function ei(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;jo(i)?zf.call(t,i,1):_i(t,i)}}return t}function ni(t,e){return t+Xf(th()*(e-t+1))}function ri(t,e,n,r){for(var i=-1,o=Qf(Vf((e-t)/(n||1)),0),a=sf(o);o--;)a[r?o:++i]=t,t+=n;return a}function ii(t,e){var n="";if(!t||e<1||e>zt)return n;do e%2&&(n+=t),e=Xf(e/2),e&&(t+=t);while(e);return n}function oi(t,e){return zh(Ko(t,e,Rc),t+"")}function ai(t){return In(rc(t))}function si(t,e){var n=rc(t);return na(n,Fn(e,0,n.length))}function ui(t,e,n,r){if(!uu(t))return t;e=Ti(e,t);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=ra(e[i]),c=n;if(i!=a){var f=s[u];c=r?r(f,u,s):it,c===it&&(c=uu(f)?f:jo(e[i+1])?[]:{})}On(s,u,c),s=s[u]}return t}function ci(t){return na(rc(t))}function fi(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=sf(i);++r<i;)o[r]=t[r+e];return o}function hi(t,e){var n;return mh(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function li(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=Bt){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!xu(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return di(t,e,Rc,n)}function di(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,a=e!==e,s=null===e,u=xu(e),c=e===it;i<o;){var f=Xf((i+o)/2),h=n(t[f]),l=h!==it,d=null===h,p=h===h,v=xu(h);if(a)var g=r||p;else g=c?p&&(r||l):s?p&&l&&(r||!d):u?p&&l&&!d&&(r||!v):!d&&!v&&(r?h<=e:h<e);g?i=f+1:o=f}return Kf(o,Ft)}function pi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!$s(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function vi(t){return"number"==typeof t?t:xu(t)?Dt:+t}function gi(t){if("string"==typeof t)return t;if(bl(t))return v(t,gi)+"";if(xu(t))return yh?yh.call(t):"";var e=t+"";return"0"==e&&1/t==-Rt?"-0":e}function yi(t,e,n){var r=-1,i=d,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=p;else if(o>=at){var c=e?null:Ah(t);if(c)return $(c);a=!1,i=D,u=new _n}else u=e?[]:s;t:for(;++r<o;){var f=t[r],h=e?e(f):f;if(f=n||0!==f?f:0,a&&h===h){for(var l=u.length;l--;)if(u[l]===h)continue t;e&&u.push(h),s.push(f)}else i(u,h,n)||(u!==s&&u.push(h),s.push(f))}return s}function _i(t,e){return e=Ti(e,t),t=Zo(t,e),null==t||delete t[ra(ka(e))]}function mi(t,e,n,r){return ui(t,e,n(ur(t,e)),r)}function xi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?fi(t,r?0:o,r?o+1:i):fi(t,r?o+1:0,r?i:o)}function bi(t,e){var n=t;return n instanceof x&&(n=n.value()),y(e,function(t,e){return e.func.apply(e.thisArg,g([t],e.args))},n)}function Ei(t,e,n){var r=t.length;if(r<2)return r?yi(t[0]):[];for(var i=-1,o=sf(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=Wn(o[i]||a,t[s],e,n));return yi(er(o,1),e,n)}function wi(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:it;n(a,t[r],s)}return a}function Pi(t){return Ks(t)?t:[]}function ki(t){return"function"==typeof t?t:Rc}function Ti(t,e){return bl(t)?t:Bo(t,e)?[t]:Nh(Mu(t))}function Ai(t,e,n){var r=t.length;return n=n===it?r:n,!e&&n>=r?t:fi(t,e,n)}function Ii(t,e){if(e)return t.slice();var n=t.length,r=Mf?Mf(n):new t.constructor(n);return t.copy(r),r}function Si(t){var e=new t.constructor(t.byteLength);return new Cf(e).set(new Cf(t)),e}function Ci(t,e){var n=e?Si(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Mi(t,e,n){var r=e?n(W(t),lt):W(t);return y(r,o,new t.constructor)}function Oi(t){var e=new t.constructor(t.source,We.exec(t));return e.lastIndex=t.lastIndex,e}function Li(t,e,n){var r=e?n($(t),lt):$(t);return y(r,a,new t.constructor)}function Ri(t){return gh?lf(gh.call(t)):{}}function zi(t,e){var n=e?Si(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ni(t,e){if(t!==e){var n=t!==it,r=null===t,i=t===t,o=xu(t),a=e!==it,s=null===e,u=e===e,c=xu(e);if(!s&&!c&&!o&&t>e||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function Di(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=Ni(i[r],o[r]);if(u){if(r>=s)return u;var c=n[r];return u*("desc"==c?-1:1)}}return t.index-e.index}function ji(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,c=Qf(o-a,0),f=sf(u+c),h=!r;++s<u;)f[s]=e[s];for(;++i<a;)(h||i<o)&&(f[n[i]]=t[i]);for(;c--;)f[s++]=t[i++];return f}function Fi(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,c=e.length,f=Qf(o-s,0),h=sf(f+c),l=!r;++i<f;)h[i]=t[i];for(var d=i;++u<c;)h[d+u]=e[u];for(;++a<s;)(l||i<o)&&(h[d+n[a]]=t[i++]);return h}function Bi(t,e){var n=-1,r=t.length;for(e||(e=sf(r));++n<r;)e[n]=t[n];return e}function Ui(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):it;u===it&&(u=t[s]),i?Dn(n,s,u):On(n,s,u)}return n}function Gi(t,e){return Ui(t,Sh(t),e)}function Vi(t,e){return Ui(t,Ch(t),e)}function Xi(t,e){return function(n,r){var i=bl(n)?u:Rn,o=e?e():{};return i(n,t,ko(r,2),o)}}function Hi(t){return oi(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:it,a=i>2?n[2]:it;for(o=t.length>3&&"function"==typeof o?(i--,o):it,a&&Fo(n[0],n[1],a)&&(o=i<3?it:o,i=1),e=lf(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}function Wi(t,e){return function(n,r){if(null==n)return n;if(!Qs(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=lf(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function Yi(t){return function(e,n,r){for(var i=-1,o=lf(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(n(o[u],u,o)===!1)break}return e}}function qi(t,e,n){function r(){var e=this&&this!==sr&&this instanceof r?o:t;return e.apply(i?n:this,arguments)}var i=e&yt,o=Ki(t);return r}function $i(t){return function(e){e=Mu(e);var n=V(e)?tt(e):it,r=n?n[0]:e.charAt(0),i=n?Ai(n,1).join(""):e.slice(1);return r[t]()+i}}function Qi(t){return function(e){return y(Sc(cc(e).replace(Vn,"")),t,"")}}function Ki(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=_h(t.prototype),r=t.apply(n,e);return uu(r)?r:n}}function Zi(t,e,n){function r(){for(var o=arguments.length,a=sf(o),u=o,c=Po(r);u--;)a[u]=arguments[u];var f=o<3&&a[0]!==c&&a[o-1]!==c?[]:q(a,c);if(o-=f.length,o<n)return co(t,e,eo,r.placeholder,it,a,f,it,it,n-o);var h=this&&this!==sr&&this instanceof r?i:t;return s(h,this,a)}var i=Ki(t);return r}function Ji(t){return function(e,n,r){var i=lf(e);if(!Qs(e)){var o=ko(n,3);e=Xu(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:it}}function to(t){return xo(function(e){var n=e.length,r=n,o=i.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new vf(ut);if(o&&!s&&"wrapper"==wo(a))var s=new i([],!0)}for(r=s?r:n;++r<n;){a=e[r];var u=wo(a),c="wrapper"==u?Ih(a):it;s=c&&Go(c[0])&&c[1]==(Pt|xt|Et|kt)&&!c[4].length&&1==c[9]?s[wo(c[0])].apply(s,c[3]):1==a.length&&Go(a)?s[u]():s.thru(a)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&bl(r))return s.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function eo(t,e,n,r,i,o,a,s,u,c){function f(){for(var y=arguments.length,_=sf(y),m=y;m--;)_[m]=arguments[m];if(p)var x=Po(f),b=B(_,x);if(r&&(_=ji(_,r,i,p)),o&&(_=Fi(_,o,a,p)),y-=b,p&&y<c){var E=q(_,x);return co(t,e,eo,f.placeholder,n,_,E,s,u,c-y)}var w=l?n:this,P=d?w[t]:t;return y=_.length,s?_=Jo(_,s):v&&y>1&&_.reverse(),h&&u<y&&(_.length=u),this&&this!==sr&&this instanceof f&&(P=g||Ki(P)),P.apply(w,_)}var h=e&Pt,l=e&yt,d=e&_t,p=e&(xt|bt),v=e&Tt,g=d?it:Ki(t);return f}function no(t,e){return function(n,r){return Ar(n,t,e(r),{})}}function ro(t,e){return function(n,r){var i;if(n===it&&r===it)return e;if(n!==it&&(i=n),r!==it){if(i===it)return r;"string"==typeof n||"string"==typeof r?(n=gi(n),r=gi(r)):(n=vi(n),r=vi(r)),i=t(n,r)}return i}}function io(t){return xo(function(e){return e=v(e,z(ko())),oi(function(n){var r=this;return t(e,function(t){return s(t,r,n)})})})}function oo(t,e){e=e===it?" ":gi(e);var n=e.length;if(n<2)return n?ii(e,t):e;var r=ii(e,Vf(t/J(e)));return V(e)?Ai(tt(r),0,t).join(""):r.slice(0,t)}function ao(t,e,n,r){function i(){for(var e=-1,u=arguments.length,c=-1,f=r.length,h=sf(f+u),l=this&&this!==sr&&this instanceof i?a:t;++c<f;)h[c]=r[c];for(;u--;)h[c++]=arguments[++e];return s(l,o?n:this,h)}var o=e&yt,a=Ki(t);return i}function so(t){return function(e,n,r){return r&&"number"!=typeof r&&Fo(e,n,r)&&(n=r=it),e=ku(e),n===it?(n=e,e=0):n=ku(n),r=r===it?e<n?1:-1:ku(r),ri(e,n,r,t)}}function uo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Iu(e),n=Iu(n)),t(e,n)}}function co(t,e,n,r,i,o,a,s,u,c){var f=e&xt,h=f?a:it,l=f?it:a,d=f?o:it,p=f?it:o;e|=f?Et:wt,e&=~(f?wt:Et),e&mt||(e&=~(yt|_t));var v=[t,e,i,d,h,p,l,s,u,c],g=n.apply(it,v);return Go(t)&&Lh(g,v),g.placeholder=r,ta(g,t,e)}function fo(t){var e=hf[t];return function(t,n){if(t=Iu(t),n=null==n?0:Kf(Tu(n),292)){var r=(Mu(t)+"e").split("e"),i=e(r[0]+"e"+(+r[1]+n));return r=(Mu(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}function ho(t){return function(e){var n=Mh(e);return n==Kt?W(e):n==ie?Q(e):R(e,t(e))}}function lo(t,e,n,r,i,o,a,s){var u=e&_t;if(!u&&"function"!=typeof t)throw new vf(ut);var c=r?r.length:0;if(c||(e&=~(Et|wt),r=i=it),a=a===it?a:Qf(Tu(a),0),s=s===it?s:Tu(s),c-=i?i.length:0,e&wt){var f=r,h=i;r=i=it}var l=u?it:Ih(t),d=[t,e,n,r,i,f,h,o,a,s];if(l&&qo(d,l),t=d[0],e=d[1],n=d[2],r=d[3],i=d[4],s=d[9]=d[9]===it?u?0:t.length:Qf(d[9]-c,0),!s&&e&(xt|bt)&&(e&=~(xt|bt)),e&&e!=yt)p=e==xt||e==bt?Zi(t,e,s):e!=Et&&e!=(yt|Et)||i.length?eo.apply(it,d):ao(t,e,n,r);else var p=qi(t,e,n);var v=l?wh:Lh;return ta(v(p,d),t,e)}function po(t,e,n,r){return t===it||$s(t,_f[n])&&!bf.call(r,n)?e:t}function vo(t,e,n,r,i,o){return uu(t)&&uu(e)&&(o.set(e,t),Yr(t,e,it,vo,o),o.delete(e)),t}function go(t){return yu(t)?it:t}function yo(t,e,n,r,i,o){var a=n&vt,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var f=-1,h=!0,l=n&gt?new _n:it;for(o.set(t,e),o.set(e,t);++f<s;){var d=t[f],p=e[f];if(r)var v=a?r(p,d,f,e,t,o):r(d,p,f,t,e,o);if(v!==it){if(v)continue;h=!1;break}if(l){if(!m(e,function(t,e){if(!D(l,e)&&(d===t||i(d,t,n,r,o)))return l.push(e)})){h=!1;break}}else if(d!==p&&!i(d,p,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function _o(t,e,n,r,i,o,a){switch(n){case he:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case fe:return!(t.byteLength!=e.byteLength||!o(new Cf(t),new Cf(e)));case Ht:case Wt:case Zt:return $s(+t,+e);case qt:return t.name==e.name&&t.message==e.message;case re:case oe:return t==e+"";case Kt:var s=W;case ie:var u=r&vt;if(s||(s=$),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=gt,a.set(t,e);var f=yo(s(t),s(e),r,i,o,a);
return a.delete(t),f;case ae:if(gh)return gh.call(t)==gh.call(e)}return!1}function mo(t,e,n,r,i,o){var a=n&vt,s=bo(t),u=s.length,c=bo(e),f=c.length;if(u!=f&&!a)return!1;for(var h=u;h--;){var l=s[h];if(!(a?l in e:bf.call(e,l)))return!1}var d=o.get(t);if(d&&o.get(e))return d==e;var p=!0;o.set(t,e),o.set(e,t);for(var v=a;++h<u;){l=s[h];var g=t[l],y=e[l];if(r)var _=a?r(y,g,l,e,t,o):r(g,y,l,t,e,o);if(!(_===it?g===y||i(g,y,n,r,o):_)){p=!1;break}v||(v="constructor"==l)}if(p&&!v){var m=t.constructor,x=e.constructor;m!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof x&&x instanceof x)&&(p=!1)}return o.delete(t),o.delete(e),p}function xo(t){return zh(Ko(t,it,ya),t+"")}function bo(t){return cr(t,Xu,Sh)}function Eo(t){return cr(t,Hu,Ch)}function wo(t){for(var e=t.name+"",n=ch[e],r=bf.call(ch,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Po(t){var e=bf.call(n,"placeholder")?n:t;return e.placeholder}function ko(){var t=n.iteratee||zc;return t=t===zc?Br:t,arguments.length?t(arguments[0],arguments[1]):t}function To(t,e){var n=t.__data__;return Uo(e)?n["string"==typeof e?"string":"hash"]:n.map}function Ao(t){for(var e=Xu(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Ho(i)]}return e}function Io(t,e){var n=G(t,e);return Nr(n)?n:it}function So(t){var e=bf.call(t,jf),n=t[jf];try{t[jf]=it;var r=!0}catch(t){}var i=Pf.call(t);return r&&(e?t[jf]=n:delete t[jf]),i}function Co(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Kf(e,t+a);break;case"takeRight":t=Qf(t,e-a)}}return{start:t,end:e}}function Mo(t){var e=t.match(Ue);return e?e[1].split(Ge):[]}function Oo(t,e,n){e=Ti(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=ra(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=null==t?0:t.length,!!i&&su(i)&&jo(a,i)&&(bl(t)||xl(t)))}function Lo(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&bf.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Ro(t){return"function"!=typeof t.constructor||Xo(t)?{}:_h(Of(t))}function zo(t,e,n,r){var i=t.constructor;switch(e){case fe:return Si(t);case Ht:case Wt:return new i(+t);case he:return Ci(t,r);case le:case de:case pe:case ve:case ge:case ye:case _e:case me:case xe:return zi(t,r);case Kt:return Mi(t,r,n);case Zt:case oe:return new i(t);case re:return Oi(t);case ie:return Li(t,r,n);case ae:return Ri(t)}}function No(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Be,"{\n/* [wrapped with "+e+"] */\n")}function Do(t){return bl(t)||xl(t)||!!(Nf&&t&&t[Nf])}function jo(t,e){return e=null==e?zt:e,!!e&&("number"==typeof t||Ke.test(t))&&t>-1&&t%1==0&&t<e}function Fo(t,e,n){if(!uu(n))return!1;var r=typeof e;return!!("number"==r?Qs(n)&&jo(e,n.length):"string"==r&&e in n)&&$s(n[e],t)}function Bo(t,e){if(bl(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!xu(t))||(Oe.test(t)||!Me.test(t)||null!=e&&t in lf(e))}function Uo(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Go(t){var e=wo(t),r=n[e];if("function"!=typeof r||!(e in x.prototype))return!1;if(t===r)return!0;var i=Ih(r);return!!i&&t===i[0]}function Vo(t){return!!wf&&wf in t}function Xo(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||_f;return t===n}function Ho(t){return t===t&&!uu(t)}function Wo(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==it||t in lf(n)))}}function Yo(t){var e=zs(t,function(t){return n.size===ft&&n.clear(),t}),n=e.cache;return e}function qo(t,e){var n=t[1],r=e[1],i=n|r,o=i<(yt|_t|Pt),a=r==Pt&&n==xt||r==Pt&&n==kt&&t[7].length<=e[8]||r==(Pt|kt)&&e[7].length<=e[8]&&n==xt;if(!o&&!a)return t;r&yt&&(t[2]=e[2],i|=n&yt?0:mt);var s=e[3];if(s){var u=t[3];t[3]=u?ji(u,s,e[4]):s,t[4]=u?q(t[3],ht):e[4]}return s=e[5],s&&(u=t[5],t[5]=u?Fi(u,s,e[6]):s,t[6]=u?q(t[5],ht):e[6]),s=e[7],s&&(t[7]=s),r&Pt&&(t[8]=null==t[8]?e[8]:Kf(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function $o(t){var e=[];if(null!=t)for(var n in lf(t))e.push(n);return e}function Qo(t){return Pf.call(t)}function Ko(t,e,n){return e=Qf(e===it?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Qf(r.length-e,0),a=sf(o);++i<o;)a[i]=r[e+i];i=-1;for(var u=sf(e+1);++i<e;)u[i]=r[i];return u[e]=n(a),s(t,this,u)}}function Zo(t,e){return e.length<2?t:ur(t,fi(e,0,-1))}function Jo(t,e){for(var n=t.length,r=Kf(e.length,n),i=Bi(t);r--;){var o=e[r];t[r]=jo(o,n)?i[o]:it}return t}function ta(t,e,n){var r=e+"";return zh(t,No(r,oa(Mo(r),n)))}function ea(t){var e=0,n=0;return function(){var r=Zf(),i=Ct-(r-n);if(n=r,i>0){if(++e>=St)return arguments[0]}else e=0;return t.apply(it,arguments)}}function na(t,e){var n=-1,r=t.length,i=r-1;for(e=e===it?r:e;++n<e;){var o=ni(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function ra(t){if("string"==typeof t||xu(t))return t;var e=t+"";return"0"==e&&1/t==-Rt?"-0":e}function ia(t){if(null!=t){try{return xf.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function oa(t,e){return c(Ut,function(n){var r="_."+n[0];e&n[1]&&!d(t,r)&&t.push(r)}),t.sort()}function aa(t){if(t instanceof x)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=Bi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function sa(t,e,n){e=(n?Fo(t,e,n):e===it)?1:Qf(Tu(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=sf(Vf(r/e));i<r;)a[o++]=fi(t,i,i+=e);return a}function ua(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}function ca(){var t=arguments.length;if(!t)return[];for(var e=sf(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return g(bl(n)?Bi(n):[n],er(e,1))}function fa(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:Tu(e),fi(t,e<0?0:e,r)):[]}function ha(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:Tu(e),e=r-e,fi(t,0,e<0?0:e)):[]}function la(t,e){return t&&t.length?xi(t,ko(e,3),!0,!0):[]}function da(t,e){return t&&t.length?xi(t,ko(e,3),!0):[]}function pa(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Fo(t,e,n)&&(n=0,r=i),Jn(t,e,n,r)):[]}function va(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Tu(n);return i<0&&(i=Qf(r+i,0)),w(t,ko(e,3),i)}function ga(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==it&&(i=Tu(n),i=n<0?Qf(r+i,0):Kf(i,r-1)),w(t,ko(e,3),i,!0)}function ya(t){var e=null==t?0:t.length;return e?er(t,1):[]}function _a(t){var e=null==t?0:t.length;return e?er(t,Rt):[]}function ma(t,e){var n=null==t?0:t.length;return n?(e=e===it?1:Tu(e),er(t,e)):[]}function xa(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}function ba(t){return t&&t.length?t[0]:it}function Ea(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Tu(n);return i<0&&(i=Qf(r+i,0)),P(t,e,i)}function wa(t){var e=null==t?0:t.length;return e?fi(t,0,-1):[]}function Pa(t,e){return null==t?"":qf.call(t,e)}function ka(t){var e=null==t?0:t.length;return e?t[e-1]:it}function Ta(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==it&&(i=Tu(n),i=i<0?Qf(r+i,0):Kf(i,r-1)),e===e?Z(t,e,i):w(t,T,i,!0)}function Aa(t,e){return t&&t.length?$r(t,Tu(e)):it}function Ia(t,e){return t&&t.length&&e&&e.length?ti(t,e):t}function Sa(t,e,n){return t&&t.length&&e&&e.length?ti(t,e,ko(n,2)):t}function Ca(t,e,n){return t&&t.length&&e&&e.length?ti(t,e,it,n):t}function Ma(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=ko(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return ei(t,i),n}function Oa(t){return null==t?t:eh.call(t)}function La(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Fo(t,e,n)?(e=0,n=r):(e=null==e?0:Tu(e),n=n===it?r:Tu(n)),fi(t,e,n)):[]}function Ra(t,e){return li(t,e)}function za(t,e,n){return di(t,e,ko(n,2))}function Na(t,e){var n=null==t?0:t.length;if(n){var r=li(t,e);if(r<n&&$s(t[r],e))return r}return-1}function Da(t,e){return li(t,e,!0)}function ja(t,e,n){return di(t,e,ko(n,2),!0)}function Fa(t,e){var n=null==t?0:t.length;if(n){var r=li(t,e,!0)-1;if($s(t[r],e))return r}return-1}function Ba(t){return t&&t.length?pi(t):[]}function Ua(t,e){return t&&t.length?pi(t,ko(e,2)):[]}function Ga(t){var e=null==t?0:t.length;return e?fi(t,1,e):[]}function Va(t,e,n){return t&&t.length?(e=n||e===it?1:Tu(e),fi(t,0,e<0?0:e)):[]}function Xa(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:Tu(e),e=r-e,fi(t,e<0?0:e,r)):[]}function Ha(t,e){return t&&t.length?xi(t,ko(e,3),!1,!0):[]}function Wa(t,e){return t&&t.length?xi(t,ko(e,3)):[]}function Ya(t){return t&&t.length?yi(t):[]}function qa(t,e){return t&&t.length?yi(t,ko(e,2)):[]}function $a(t,e){return e="function"==typeof e?e:it,t&&t.length?yi(t,it,e):[]}function Qa(t){if(!t||!t.length)return[];var e=0;return t=l(t,function(t){if(Ks(t))return e=Qf(t.length,e),!0}),L(e,function(e){return v(t,I(e))})}function Ka(t,e){if(!t||!t.length)return[];var n=Qa(t);return null==e?n:v(n,function(t){return s(e,it,t)})}function Za(t,e){return wi(t||[],e||[],On)}function Ja(t,e){return wi(t||[],e||[],ui)}function ts(t){var e=n(t);return e.__chain__=!0,e}function es(t,e){return e(t),t}function ns(t,e){return e(t)}function rs(){return ts(this)}function is(){return new i(this.value(),this.__chain__)}function os(){this.__values__===it&&(this.__values__=Pu(this.value()));var t=this.__index__>=this.__values__.length,e=t?it:this.__values__[this.__index__++];return{done:t,value:e}}function as(){return this}function ss(t){for(var e,n=this;n instanceof r;){var i=aa(n);i.__index__=0,i.__values__=it,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e}function us(){var t=this.__wrapped__;if(t instanceof x){var e=t;return this.__actions__.length&&(e=new x(this)),e=e.reverse(),e.__actions__.push({func:ns,args:[Oa],thisArg:it}),new i(e,this.__chain__)}return this.thru(Oa)}function cs(){return bi(this.__wrapped__,this.__actions__)}function fs(t,e,n){var r=bl(t)?h:Yn;return n&&Fo(t,e,n)&&(e=it),r(t,ko(e,3))}function hs(t,e){var n=bl(t)?l:tr;return n(t,ko(e,3))}function ls(t,e){return er(_s(t,e),1)}function ds(t,e){return er(_s(t,e),Rt)}function ps(t,e,n){return n=n===it?1:Tu(n),er(_s(t,e),n)}function vs(t,e){var n=bl(t)?c:mh;return n(t,ko(e,3))}function gs(t,e){var n=bl(t)?f:xh;return n(t,ko(e,3))}function ys(t,e,n,r){t=Qs(t)?t:rc(t),n=n&&!r?Tu(n):0;var i=t.length;return n<0&&(n=Qf(i+n,0)),mu(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&P(t,e,n)>-1}function _s(t,e){var n=bl(t)?v:Xr;return n(t,ko(e,3))}function ms(t,e,n,r){return null==t?[]:(bl(e)||(e=null==e?[]:[e]),n=r?it:n,bl(n)||(n=null==n?[]:[n]),Qr(t,e,n))}function xs(t,e,n){var r=bl(t)?y:C,i=arguments.length<3;return r(t,ko(e,4),n,i,mh)}function bs(t,e,n){var r=bl(t)?_:C,i=arguments.length<3;return r(t,ko(e,4),n,i,xh)}function Es(t,e){var n=bl(t)?l:tr;return n(t,Ns(ko(e,3)))}function ws(t){var e=bl(t)?In:ai;return e(t)}function Ps(t,e,n){e=(n?Fo(t,e,n):e===it)?1:Tu(e);var r=bl(t)?Sn:si;return r(t,e)}function ks(t){var e=bl(t)?Cn:ci;return e(t)}function Ts(t){if(null==t)return 0;if(Qs(t))return mu(t)?J(t):t.length;var e=Mh(t);return e==Kt||e==ie?t.size:Ur(t).length}function As(t,e,n){var r=bl(t)?m:hi;return n&&Fo(t,e,n)&&(e=it),r(t,ko(e,3))}function Is(t,e){if("function"!=typeof e)throw new vf(ut);return t=Tu(t),function(){if(--t<1)return e.apply(this,arguments)}}function Ss(t,e,n){return e=n?it:e,e=t&&null==e?t.length:e,lo(t,Pt,it,it,it,it,e)}function Cs(t,e){var n;if("function"!=typeof e)throw new vf(ut);return t=Tu(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=it),n}}function Ms(t,e,n){e=n?it:e;var r=lo(t,xt,it,it,it,it,it,e);return r.placeholder=Ms.placeholder,r}function Os(t,e,n){e=n?it:e;var r=lo(t,bt,it,it,it,it,it,e);return r.placeholder=Os.placeholder,r}function Ls(t,e,n){function r(e){var n=l,r=d;return l=d=it,_=e,v=t.apply(r,n)}function i(t){return _=t,g=Rh(s,e),m?r(t):v}function o(t){var n=t-y,r=t-_,i=e-n;return x?Kf(i,p-r):i}function a(t){var n=t-y,r=t-_;return y===it||n>=e||n<0||x&&r>=p}function s(){var t=cl();return a(t)?u(t):void(g=Rh(s,o(t)))}function u(t){return g=it,b&&l?r(t):(l=d=it,v)}function c(){g!==it&&Th(g),_=0,l=y=d=g=it}function f(){return g===it?v:u(cl())}function h(){var t=cl(),n=a(t);if(l=arguments,d=this,y=t,n){if(g===it)return i(y);if(x)return g=Rh(s,e),r(y)}return g===it&&(g=Rh(s,e)),v}var l,d,p,v,g,y,_=0,m=!1,x=!1,b=!0;if("function"!=typeof t)throw new vf(ut);return e=Iu(e)||0,uu(n)&&(m=!!n.leading,x="maxWait"in n,p=x?Qf(Iu(n.maxWait)||0,e):p,b="trailing"in n?!!n.trailing:b),h.cancel=c,h.flush=f,h}function Rs(t){return lo(t,Tt)}function zs(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new vf(ut);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(zs.Cache||ln),n}function Ns(t){if("function"!=typeof t)throw new vf(ut);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Ds(t){return Cs(2,t)}function js(t,e){if("function"!=typeof t)throw new vf(ut);return e=e===it?e:Tu(e),oi(t,e)}function Fs(t,e){if("function"!=typeof t)throw new vf(ut);return e=null==e?0:Qf(Tu(e),0),oi(function(n){var r=n[e],i=Ai(n,0,e);return r&&g(i,r),s(t,this,i)})}function Bs(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new vf(ut);return uu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ls(t,e,{leading:r,maxWait:e,trailing:i})}function Us(t){return Ss(t,1)}function Gs(t,e){return vl(ki(e),t)}function Vs(){if(!arguments.length)return[];var t=arguments[0];return bl(t)?t:[t]}function Xs(t){return Bn(t,pt)}function Hs(t,e){return e="function"==typeof e?e:it,Bn(t,pt,e)}function Ws(t){return Bn(t,lt|pt)}function Ys(t,e){return e="function"==typeof e?e:it,Bn(t,lt|pt,e)}function qs(t,e){return null==e||Gn(t,e,Xu(e))}function $s(t,e){return t===e||t!==t&&e!==e}function Qs(t){return null!=t&&su(t.length)&&!ou(t)}function Ks(t){return cu(t)&&Qs(t)}function Zs(t){return t===!0||t===!1||cu(t)&&hr(t)==Ht}function Js(t){return cu(t)&&1===t.nodeType&&!yu(t)}function tu(t){if(null==t)return!0;if(Qs(t)&&(bl(t)||"string"==typeof t||"function"==typeof t.splice||wl(t)||Il(t)||xl(t)))return!t.length;var e=Mh(t);if(e==Kt||e==ie)return!t.size;if(Xo(t))return!Ur(t).length;for(var n in t)if(bf.call(t,n))return!1;return!0}function eu(t,e){return Or(t,e)}function nu(t,e,n){n="function"==typeof n?n:it;var r=n?n(t,e):it;return r===it?Or(t,e,it,n):!!r}function ru(t){if(!cu(t))return!1;var e=hr(t);return e==qt||e==Yt||"string"==typeof t.message&&"string"==typeof t.name&&!yu(t)}function iu(t){return"number"==typeof t&&Yf(t)}function ou(t){if(!uu(t))return!1;var e=hr(t);return e==$t||e==Qt||e==Xt||e==ne}function au(t){return"number"==typeof t&&t==Tu(t)}function su(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=zt}function uu(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function cu(t){return null!=t&&"object"==typeof t}function fu(t,e){return t===e||zr(t,e,Ao(e))}function hu(t,e,n){return n="function"==typeof n?n:it,zr(t,e,Ao(e),n)}function lu(t){return gu(t)&&t!=+t}function du(t){if(Oh(t))throw new cf(st);return Nr(t)}function pu(t){return null===t}function vu(t){return null==t}function gu(t){return"number"==typeof t||cu(t)&&hr(t)==Zt}function yu(t){if(!cu(t)||hr(t)!=te)return!1;var e=Of(t);if(null===e)return!0;var n=bf.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&xf.call(n)==kf}function _u(t){return au(t)&&t>=-zt&&t<=zt}function mu(t){return"string"==typeof t||!bl(t)&&cu(t)&&hr(t)==oe}function xu(t){return"symbol"==typeof t||cu(t)&&hr(t)==ae}function bu(t){return t===it}function Eu(t){return cu(t)&&Mh(t)==ue}function wu(t){return cu(t)&&hr(t)==ce}function Pu(t){if(!t)return[];if(Qs(t))return mu(t)?tt(t):Bi(t);if(Df&&t[Df])return H(t[Df]());var e=Mh(t),n=e==Kt?W:e==ie?$:rc;return n(t)}function ku(t){if(!t)return 0===t?t:0;if(t=Iu(t),t===Rt||t===-Rt){var e=t<0?-1:1;return e*Nt}return t===t?t:0}function Tu(t){var e=ku(t),n=e%1;return e===e?n?e-n:e:0}function Au(t){return t?Fn(Tu(t),0,jt):0}function Iu(t){if("number"==typeof t)return t;if(xu(t))return Dt;if(uu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=uu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(De,"");var n=qe.test(t);return n||Qe.test(t)?ir(t.slice(2),n?2:8):Ye.test(t)?Dt:+t}function Su(t){return Ui(t,Hu(t))}function Cu(t){return t?Fn(Tu(t),-zt,zt):0===t?t:0}function Mu(t){return null==t?"":gi(t)}function Ou(t,e){var n=_h(t);return null==e?n:zn(n,e)}function Lu(t,e){return E(t,ko(e,3),nr)}function Ru(t,e){return E(t,ko(e,3),or)}function zu(t,e){return null==t?t:bh(t,ko(e,3),Hu)}function Nu(t,e){return null==t?t:Eh(t,ko(e,3),Hu)}function Du(t,e){return t&&nr(t,ko(e,3))}function ju(t,e){return t&&or(t,ko(e,3))}function Fu(t){return null==t?[]:ar(t,Xu(t))}function Bu(t){return null==t?[]:ar(t,Hu(t))}function Uu(t,e,n){var r=null==t?it:ur(t,e);return r===it?n:r}function Gu(t,e){return null!=t&&Oo(t,e,mr)}function Vu(t,e){return null!=t&&Oo(t,e,wr)}function Xu(t){return Qs(t)?An(t):Ur(t)}function Hu(t){return Qs(t)?An(t,!0):Gr(t)}function Wu(t,e){var n={};return e=ko(e,3),nr(t,function(t,r,i){Dn(n,e(t,r,i),t)}),n}function Yu(t,e){var n={};return e=ko(e,3),nr(t,function(t,r,i){Dn(n,r,e(t,r,i))}),n}function qu(t,e){return $u(t,Ns(ko(e)))}function $u(t,e){if(null==t)return{};var n=v(Eo(t),function(t){return[t]});return e=ko(e),Zr(t,n,function(t,n){return e(t,n[0])})}function Qu(t,e,n){e=Ti(e,t);var r=-1,i=e.length;for(i||(i=1,t=it);++r<i;){var o=null==t?it:t[ra(e[r])];o===it&&(r=i,o=n),t=ou(o)?o.call(t):o}return t}function Ku(t,e,n){return null==t?t:ui(t,e,n)}function Zu(t,e,n,r){return r="function"==typeof r?r:it,null==t?t:ui(t,e,n,r)}function Ju(t,e,n){var r=bl(t),i=r||wl(t)||Il(t);if(e=ko(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:uu(t)&&ou(o)?_h(Of(t)):{}}return(i?c:nr)(t,function(t,r,i){return e(n,t,r,i)}),n}function tc(t,e){return null==t||_i(t,e)}function ec(t,e,n){return null==t?t:mi(t,e,ki(n))}function nc(t,e,n,r){return r="function"==typeof r?r:it,null==t?t:mi(t,e,ki(n),r)}function rc(t){return null==t?[]:N(t,Xu(t))}function ic(t){return null==t?[]:N(t,Hu(t))}function oc(t,e,n){return n===it&&(n=e,e=it),n!==it&&(n=Iu(n),n=n===n?n:0),e!==it&&(e=Iu(e),e=e===e?e:0),Fn(Iu(t),e,n)}function ac(t,e,n){return e=ku(e),n===it?(n=e,e=0):n=ku(n),t=Iu(t),kr(t,e,n)}function sc(t,e,n){if(n&&"boolean"!=typeof n&&Fo(t,e,n)&&(e=n=it),n===it&&("boolean"==typeof e?(n=e,e=it):"boolean"==typeof t&&(n=t,t=it)),t===it&&e===it?(t=0,e=1):(t=ku(t),e===it?(e=t,t=0):e=ku(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=th();return Kf(t+i*(e-t+rr("1e-"+((i+"").length-1))),e)}return ni(t,e)}function uc(t){return td(Mu(t).toLowerCase())}function cc(t){return t=Mu(t),t&&t.replace(Ze,xr).replace(Xn,"")}function fc(t,e,n){t=Mu(t),e=gi(e);var r=t.length;n=n===it?r:Fn(Tu(n),0,r);var i=n;return n-=e.length,n>=0&&t.slice(n,i)==e}function hc(t){return t=Mu(t),t&&Ae.test(t)?t.replace(ke,br):t}function lc(t){return t=Mu(t),t&&Ne.test(t)?t.replace(ze,"\\$&"):t}function dc(t,e,n){t=Mu(t),e=Tu(e);var r=e?J(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return oo(Xf(i),n)+t+oo(Vf(i),n)}function pc(t,e,n){t=Mu(t),e=Tu(e);var r=e?J(t):0;return e&&r<e?t+oo(e-r,n):t}function vc(t,e,n){t=Mu(t),e=Tu(e);var r=e?J(t):0;return e&&r<e?oo(e-r,n)+t:t}function gc(t,e,n){return n||null==e?e=0:e&&(e=+e),Jf(Mu(t).replace(je,""),e||0)}function yc(t,e,n){return e=(n?Fo(t,e,n):e===it)?1:Tu(e),ii(Mu(t),e)}function _c(){var t=arguments,e=Mu(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function mc(t,e,n){return n&&"number"!=typeof n&&Fo(t,e,n)&&(e=n=it),(n=n===it?jt:n>>>0)?(t=Mu(t),t&&("string"==typeof e||null!=e&&!Tl(e))&&(e=gi(e),!e&&V(t))?Ai(tt(t),0,n):t.split(e,n)):[]}function xc(t,e,n){return t=Mu(t),n=null==n?0:Fn(Tu(n),0,t.length),e=gi(e),t.slice(n,n+e.length)==e}function bc(t,e,r){var i=n.templateSettings;r&&Fo(t,e,r)&&(e=it),t=Mu(t),e=Ll({},e,i,po);var o,a,s=Ll({},e.imports,i.imports,po),u=Xu(s),c=N(s,u),f=0,h=e.interpolate||Je,l="__p += '",d=df((e.escape||Je).source+"|"+h.source+"|"+(h===Ce?He:Je).source+"|"+(e.evaluate||Je).source+"|$","g"),p="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Qn+"]")+"\n";t.replace(d,function(e,n,r,i,s,u){return r||(r=i),l+=t.slice(f,u).replace(tn,U),n&&(o=!0,l+="' +\n__e("+n+") +\n'"),s&&(a=!0,l+="';\n"+s+";\n__p += '"),r&&(l+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=u+e.length,e}),l+="';\n";var v=e.variable;v||(l="with (obj) {\n"+l+"\n}\n"),l=(a?l.replace(be,""):l).replace(Ee,"$1").replace(we,"$1;"),l="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+l+"return __p\n}";var g=ed(function(){return ff(u,p+"return "+l).apply(it,c)});if(g.source=l,ru(g))throw g;return g}function Ec(t){return Mu(t).toLowerCase()}function wc(t){return Mu(t).toUpperCase()}function Pc(t,e,n){if(t=Mu(t),t&&(n||e===it))return t.replace(De,"");if(!t||!(e=gi(e)))return t;var r=tt(t),i=tt(e),o=j(r,i),a=F(r,i)+1;return Ai(r,o,a).join("")}function kc(t,e,n){if(t=Mu(t),t&&(n||e===it))return t.replace(Fe,"");if(!t||!(e=gi(e)))return t;var r=tt(t),i=F(r,tt(e))+1;return Ai(r,0,i).join("")}function Tc(t,e,n){if(t=Mu(t),t&&(n||e===it))return t.replace(je,"");if(!t||!(e=gi(e)))return t;var r=tt(t),i=j(r,tt(e));return Ai(r,i).join("")}function Ac(t,e){var n=At,r=It;if(uu(e)){var i="separator"in e?e.separator:i;n="length"in e?Tu(e.length):n,r="omission"in e?gi(e.omission):r}t=Mu(t);var o=t.length;if(V(t)){var a=tt(t);o=a.length}if(n>=o)return t;var s=n-J(r);if(s<1)return r;var u=a?Ai(a,0,s).join(""):t.slice(0,s);if(i===it)return u+r;if(a&&(s+=u.length-s),Tl(i)){if(t.slice(s).search(i)){var c,f=u;for(i.global||(i=df(i.source,Mu(We.exec(i))+"g")),i.lastIndex=0;c=i.exec(f);)var h=c.index;u=u.slice(0,h===it?s:h)}}else if(t.indexOf(gi(i),s)!=s){var l=u.lastIndexOf(i);l>-1&&(u=u.slice(0,l))}return u+r}function Ic(t){return t=Mu(t),t&&Te.test(t)?t.replace(Pe,Er):t}function Sc(t,e,n){return t=Mu(t),e=n?it:e,e===it?X(t)?rt(t):b(t):t.match(e)||[]}function Cc(t){var e=null==t?0:t.length,n=ko();return t=e?v(t,function(t){if("function"!=typeof t[1])throw new vf(ut);return[n(t[0]),t[1]]}):[],oi(function(n){for(var r=-1;++r<e;){var i=t[r];if(s(i[0],this,n))return s(i[1],this,n)}})}function Mc(t){return Un(Bn(t,lt))}function Oc(t){return function(){return t}}function Lc(t,e){return null==t||t!==t?e:t}function Rc(t){return t}function zc(t){return Br("function"==typeof t?t:Bn(t,lt))}function Nc(t){return Hr(Bn(t,lt))}function Dc(t,e){return Wr(t,Bn(e,lt))}function jc(t,e,n){var r=Xu(e),i=ar(e,r);null!=n||uu(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=ar(e,Xu(e)));var o=!(uu(n)&&"chain"in n&&!n.chain),a=ou(t);return c(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Bi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,g([this.value()],arguments))})}),t}function Fc(){return sr._===this&&(sr._=Tf),this}function Bc(){}function Uc(t){return t=Tu(t),oi(function(e){return $r(e,t)})}function Gc(t){return Bo(t)?I(ra(t)):Jr(t)}function Vc(t){return function(e){return null==t?it:ur(t,e)}}function Xc(){return[]}function Hc(){return!1}function Wc(){return{}}function Yc(){return""}function qc(){return!0}function $c(t,e){if(t=Tu(t),t<1||t>zt)return[];var n=jt,r=Kf(t,jt);e=ko(e),t-=jt;for(var i=L(r,e);++n<t;)e(n);return i}function Qc(t){return bl(t)?v(t,ra):xu(t)?[t]:Bi(Nh(Mu(t)))}function Kc(t){var e=++Ef;return Mu(t)+e}function Zc(t){return t&&t.length?qn(t,Rc,lr):it}function Jc(t,e){return t&&t.length?qn(t,ko(e,2),lr):it}function tf(t){return A(t,Rc)}function ef(t,e){return A(t,ko(e,2))}function nf(t){return t&&t.length?qn(t,Rc,Vr):it}function rf(t,e){return t&&t.length?qn(t,ko(e,2),Vr):it}function of(t){return t&&t.length?O(t,Rc):0}function af(t,e){return t&&t.length?O(t,ko(e,2)):0}e=null==e?sr:Pr.defaults(sr.Object(),e,Pr.pick(sr,$n));var sf=e.Array,uf=e.Date,cf=e.Error,ff=e.Function,hf=e.Math,lf=e.Object,df=e.RegExp,pf=e.String,vf=e.TypeError,gf=sf.prototype,yf=ff.prototype,_f=lf.prototype,mf=e["__core-js_shared__"],xf=yf.toString,bf=_f.hasOwnProperty,Ef=0,wf=function(){var t=/[^.]+$/.exec(mf&&mf.keys&&mf.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Pf=_f.toString,kf=xf.call(lf),Tf=sr._,Af=df("^"+xf.call(bf).replace(ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),If=fr?e.Buffer:it,Sf=e.Symbol,Cf=e.Uint8Array,Mf=If?If.allocUnsafe:it,Of=Y(lf.getPrototypeOf,lf),Lf=lf.create,Rf=_f.propertyIsEnumerable,zf=gf.splice,Nf=Sf?Sf.isConcatSpreadable:it,Df=Sf?Sf.iterator:it,jf=Sf?Sf.toStringTag:it,Ff=function(){try{var t=Io(lf,"defineProperty");return t({},"",{}),t}catch(t){}}(),Bf=e.clearTimeout!==sr.clearTimeout&&e.clearTimeout,Uf=uf&&uf.now!==sr.Date.now&&uf.now,Gf=e.setTimeout!==sr.setTimeout&&e.setTimeout,Vf=hf.ceil,Xf=hf.floor,Hf=lf.getOwnPropertySymbols,Wf=If?If.isBuffer:it,Yf=e.isFinite,qf=gf.join,$f=Y(lf.keys,lf),Qf=hf.max,Kf=hf.min,Zf=uf.now,Jf=e.parseInt,th=hf.random,eh=gf.reverse,nh=Io(e,"DataView"),rh=Io(e,"Map"),ih=Io(e,"Promise"),oh=Io(e,"Set"),ah=Io(e,"WeakMap"),sh=Io(lf,"create"),uh=ah&&new ah,ch={},fh=ia(nh),hh=ia(rh),lh=ia(ih),dh=ia(oh),ph=ia(ah),vh=Sf?Sf.prototype:it,gh=vh?vh.valueOf:it,yh=vh?vh.toString:it,_h=function(){function t(){}return function(e){if(!uu(e))return{};if(Lf)return Lf(e);t.prototype=e;var n=new t;return t.prototype=it,n}}();n.templateSettings={escape:Ie,evaluate:Se,interpolate:Ce,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,i.prototype=_h(r.prototype),i.prototype.constructor=i,x.prototype=_h(r.prototype),x.prototype.constructor=x,nt.prototype.clear=Ve,nt.prototype.delete=en,nt.prototype.get=nn,nt.prototype.has=rn,nt.prototype.set=on,an.prototype.clear=sn,an.prototype.delete=un,an.prototype.get=cn,an.prototype.has=fn,an.prototype.set=hn,ln.prototype.clear=dn,ln.prototype.delete=pn,ln.prototype.get=vn,ln.prototype.has=gn,ln.prototype.set=yn,_n.prototype.add=_n.prototype.push=mn,_n.prototype.has=xn,bn.prototype.clear=En,bn.prototype.delete=wn,bn.prototype.get=Pn,bn.prototype.has=kn,bn.prototype.set=Tn;var mh=Wi(nr),xh=Wi(or,!0),bh=Yi(),Eh=Yi(!0),wh=uh?function(t,e){return uh.set(t,e),t}:Rc,Ph=Ff?function(t,e){return Ff(t,"toString",{configurable:!0,enumerable:!1,value:Oc(e),writable:!0})}:Rc,kh=oi,Th=Bf||function(t){return sr.clearTimeout(t)},Ah=oh&&1/$(new oh([,-0]))[1]==Rt?function(t){return new oh(t)}:Bc,Ih=uh?function(t){return uh.get(t)}:Bc,Sh=Hf?function(t){return null==t?[]:(t=lf(t),l(Hf(t),function(e){return Rf.call(t,e)}))}:Xc,Ch=Hf?function(t){for(var e=[];t;)g(e,Sh(t)),t=Of(t);return e}:Xc,Mh=hr;(nh&&Mh(new nh(new ArrayBuffer(1)))!=he||rh&&Mh(new rh)!=Kt||ih&&Mh(ih.resolve())!=ee||oh&&Mh(new oh)!=ie||ah&&Mh(new ah)!=ue)&&(Mh=function(t){var e=hr(t),n=e==te?t.constructor:it,r=n?ia(n):"";if(r)switch(r){case fh:return he;case hh:return Kt;case lh:return ee;case dh:return ie;case ph:return ue}return e});var Oh=mf?ou:Hc,Lh=ea(wh),Rh=Gf||function(t,e){return sr.setTimeout(t,e)},zh=ea(Ph),Nh=Yo(function(t){var e=[];return Le.test(t)&&e.push(""),t.replace(Re,function(t,n,r,i){e.push(r?i.replace(Xe,"$1"):n||t)}),e}),Dh=oi(function(t,e){return Ks(t)?Wn(t,er(e,1,Ks,!0)):[]}),jh=oi(function(t,e){var n=ka(e);return Ks(n)&&(n=it),Ks(t)?Wn(t,er(e,1,Ks,!0),ko(n,2)):[]}),Fh=oi(function(t,e){var n=ka(e);return Ks(n)&&(n=it),Ks(t)?Wn(t,er(e,1,Ks,!0),it,n):[]}),Bh=oi(function(t){var e=v(t,Pi);return e.length&&e[0]===t[0]?Tr(e):[]}),Uh=oi(function(t){var e=ka(t),n=v(t,Pi);return e===ka(n)?e=it:n.pop(),n.length&&n[0]===t[0]?Tr(n,ko(e,2)):[]}),Gh=oi(function(t){var e=ka(t),n=v(t,Pi);return e="function"==typeof e?e:it,e&&n.pop(),n.length&&n[0]===t[0]?Tr(n,it,e):[]}),Vh=oi(Ia),Xh=xo(function(t,e){var n=null==t?0:t.length,r=jn(t,e);return ei(t,v(e,function(t){return jo(t,n)?+t:t}).sort(Ni)),r}),Hh=oi(function(t){return yi(er(t,1,Ks,!0))}),Wh=oi(function(t){var e=ka(t);return Ks(e)&&(e=it),yi(er(t,1,Ks,!0),ko(e,2))}),Yh=oi(function(t){var e=ka(t);return e="function"==typeof e?e:it,yi(er(t,1,Ks,!0),it,e)}),qh=oi(function(t,e){return Ks(t)?Wn(t,e):[]}),$h=oi(function(t){return Ei(l(t,Ks))}),Qh=oi(function(t){var e=ka(t);return Ks(e)&&(e=it),Ei(l(t,Ks),ko(e,2))}),Kh=oi(function(t){var e=ka(t);return e="function"==typeof e?e:it,Ei(l(t,Ks),it,e)}),Zh=oi(Qa),Jh=oi(function(t){var e=t.length,n=e>1?t[e-1]:it;return n="function"==typeof n?(t.pop(),n):it,Ka(t,n)}),tl=xo(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return jn(e,t)};return!(e>1||this.__actions__.length)&&r instanceof x&&jo(n)?(r=r.slice(n,+n+(e?1:0)),r.__actions__.push({func:ns,args:[o],thisArg:it}),new i(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(it),t})):this.thru(o)}),el=Xi(function(t,e,n){bf.call(t,n)?++t[n]:Dn(t,n,1)}),nl=Ji(va),rl=Ji(ga),il=Xi(function(t,e,n){bf.call(t,n)?t[n].push(e):Dn(t,n,[e])}),ol=oi(function(t,e,n){var r=-1,i="function"==typeof e,o=Qs(t)?sf(t.length):[];return mh(t,function(t){o[++r]=i?s(e,t,n):Ir(t,e,n)}),o}),al=Xi(function(t,e,n){Dn(t,n,e)}),sl=Xi(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),ul=oi(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Fo(t,e[0],e[1])?e=[]:n>2&&Fo(e[0],e[1],e[2])&&(e=[e[0]]),Qr(t,er(e,1),[])}),cl=Uf||function(){return sr.Date.now()},fl=oi(function(t,e,n){var r=yt;if(n.length){var i=q(n,Po(fl));r|=Et}return lo(t,r,e,n,i)}),hl=oi(function(t,e,n){var r=yt|_t;if(n.length){var i=q(n,Po(hl));r|=Et}return lo(e,r,t,n,i)}),ll=oi(function(t,e){return Hn(t,1,e)}),dl=oi(function(t,e,n){return Hn(t,Iu(e)||0,n)});zs.Cache=ln;var pl=kh(function(t,e){e=1==e.length&&bl(e[0])?v(e[0],z(ko())):v(er(e,1),z(ko()));var n=e.length;return oi(function(r){for(var i=-1,o=Kf(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return s(t,this,r)})}),vl=oi(function(t,e){var n=q(e,Po(vl));return lo(t,Et,it,e,n)}),gl=oi(function(t,e){var n=q(e,Po(gl));return lo(t,wt,it,e,n)}),yl=xo(function(t,e){return lo(t,kt,it,it,it,e)}),_l=uo(lr),ml=uo(function(t,e){return t>=e}),xl=Sr(function(){return arguments}())?Sr:function(t){return cu(t)&&bf.call(t,"callee")&&!Rf.call(t,"callee")},bl=sf.isArray,El=dr?z(dr):Cr,wl=Wf||Hc,Pl=pr?z(pr):Mr,kl=vr?z(vr):Rr,Tl=gr?z(gr):Dr,Al=yr?z(yr):jr,Il=_r?z(_r):Fr,Sl=uo(Vr),Cl=uo(function(t,e){return t<=e}),Ml=Hi(function(t,e){if(Xo(e)||Qs(e))return void Ui(e,Xu(e),t);for(var n in e)bf.call(e,n)&&On(t,n,e[n])}),Ol=Hi(function(t,e){Ui(e,Hu(e),t)}),Ll=Hi(function(t,e,n,r){Ui(e,Hu(e),t,r)}),Rl=Hi(function(t,e,n,r){Ui(e,Xu(e),t,r)}),zl=xo(jn),Nl=oi(function(t){return t.push(it,po),s(Ll,it,t)}),Dl=oi(function(t){return t.push(it,vo),s(Gl,it,t)}),jl=no(function(t,e,n){t[e]=n},Oc(Rc)),Fl=no(function(t,e,n){bf.call(t,e)?t[e].push(n):t[e]=[n]},ko),Bl=oi(Ir),Ul=Hi(function(t,e,n){Yr(t,e,n)}),Gl=Hi(function(t,e,n,r){Yr(t,e,n,r)}),Vl=xo(function(t,e){var n={};if(null==t)return n;var r=!1;e=v(e,function(e){return e=Ti(e,t),r||(r=e.length>1),e}),Ui(t,Eo(t),n),r&&(n=Bn(n,lt|dt|pt,go));for(var i=e.length;i--;)_i(n,e[i]);return n}),Xl=xo(function(t,e){return null==t?{}:Kr(t,e)}),Hl=ho(Xu),Wl=ho(Hu),Yl=Qi(function(t,e,n){return e=e.toLowerCase(),t+(n?uc(e):e)}),ql=Qi(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),$l=Qi(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Ql=$i("toLowerCase"),Kl=Qi(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Zl=Qi(function(t,e,n){return t+(n?" ":"")+td(e)}),Jl=Qi(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),td=$i("toUpperCase"),ed=oi(function(t,e){try{return s(t,it,e)}catch(t){return ru(t)?t:new cf(t)}}),nd=xo(function(t,e){return c(e,function(e){e=ra(e),Dn(t,e,fl(t[e],t))}),t}),rd=to(),id=to(!0),od=oi(function(t,e){
return function(n){return Ir(n,t,e)}}),ad=oi(function(t,e){return function(n){return Ir(t,n,e)}}),sd=io(v),ud=io(h),cd=io(m),fd=so(),hd=so(!0),ld=ro(function(t,e){return t+e},0),dd=fo("ceil"),pd=ro(function(t,e){return t/e},1),vd=fo("floor"),gd=ro(function(t,e){return t*e},1),yd=fo("round"),_d=ro(function(t,e){return t-e},0);return n.after=Is,n.ary=Ss,n.assign=Ml,n.assignIn=Ol,n.assignInWith=Ll,n.assignWith=Rl,n.at=zl,n.before=Cs,n.bind=fl,n.bindAll=nd,n.bindKey=hl,n.castArray=Vs,n.chain=ts,n.chunk=sa,n.compact=ua,n.concat=ca,n.cond=Cc,n.conforms=Mc,n.constant=Oc,n.countBy=el,n.create=Ou,n.curry=Ms,n.curryRight=Os,n.debounce=Ls,n.defaults=Nl,n.defaultsDeep=Dl,n.defer=ll,n.delay=dl,n.difference=Dh,n.differenceBy=jh,n.differenceWith=Fh,n.drop=fa,n.dropRight=ha,n.dropRightWhile=la,n.dropWhile=da,n.fill=pa,n.filter=hs,n.flatMap=ls,n.flatMapDeep=ds,n.flatMapDepth=ps,n.flatten=ya,n.flattenDeep=_a,n.flattenDepth=ma,n.flip=Rs,n.flow=rd,n.flowRight=id,n.fromPairs=xa,n.functions=Fu,n.functionsIn=Bu,n.groupBy=il,n.initial=wa,n.intersection=Bh,n.intersectionBy=Uh,n.intersectionWith=Gh,n.invert=jl,n.invertBy=Fl,n.invokeMap=ol,n.iteratee=zc,n.keyBy=al,n.keys=Xu,n.keysIn=Hu,n.map=_s,n.mapKeys=Wu,n.mapValues=Yu,n.matches=Nc,n.matchesProperty=Dc,n.memoize=zs,n.merge=Ul,n.mergeWith=Gl,n.method=od,n.methodOf=ad,n.mixin=jc,n.negate=Ns,n.nthArg=Uc,n.omit=Vl,n.omitBy=qu,n.once=Ds,n.orderBy=ms,n.over=sd,n.overArgs=pl,n.overEvery=ud,n.overSome=cd,n.partial=vl,n.partialRight=gl,n.partition=sl,n.pick=Xl,n.pickBy=$u,n.property=Gc,n.propertyOf=Vc,n.pull=Vh,n.pullAll=Ia,n.pullAllBy=Sa,n.pullAllWith=Ca,n.pullAt=Xh,n.range=fd,n.rangeRight=hd,n.rearg=yl,n.reject=Es,n.remove=Ma,n.rest=js,n.reverse=Oa,n.sampleSize=Ps,n.set=Ku,n.setWith=Zu,n.shuffle=ks,n.slice=La,n.sortBy=ul,n.sortedUniq=Ba,n.sortedUniqBy=Ua,n.split=mc,n.spread=Fs,n.tail=Ga,n.take=Va,n.takeRight=Xa,n.takeRightWhile=Ha,n.takeWhile=Wa,n.tap=es,n.throttle=Bs,n.thru=ns,n.toArray=Pu,n.toPairs=Hl,n.toPairsIn=Wl,n.toPath=Qc,n.toPlainObject=Su,n.transform=Ju,n.unary=Us,n.union=Hh,n.unionBy=Wh,n.unionWith=Yh,n.uniq=Ya,n.uniqBy=qa,n.uniqWith=$a,n.unset=tc,n.unzip=Qa,n.unzipWith=Ka,n.update=ec,n.updateWith=nc,n.values=rc,n.valuesIn=ic,n.without=qh,n.words=Sc,n.wrap=Gs,n.xor=$h,n.xorBy=Qh,n.xorWith=Kh,n.zip=Zh,n.zipObject=Za,n.zipObjectDeep=Ja,n.zipWith=Jh,n.entries=Hl,n.entriesIn=Wl,n.extend=Ol,n.extendWith=Ll,jc(n,n),n.add=ld,n.attempt=ed,n.camelCase=Yl,n.capitalize=uc,n.ceil=dd,n.clamp=oc,n.clone=Xs,n.cloneDeep=Ws,n.cloneDeepWith=Ys,n.cloneWith=Hs,n.conformsTo=qs,n.deburr=cc,n.defaultTo=Lc,n.divide=pd,n.endsWith=fc,n.eq=$s,n.escape=hc,n.escapeRegExp=lc,n.every=fs,n.find=nl,n.findIndex=va,n.findKey=Lu,n.findLast=rl,n.findLastIndex=ga,n.findLastKey=Ru,n.floor=vd,n.forEach=vs,n.forEachRight=gs,n.forIn=zu,n.forInRight=Nu,n.forOwn=Du,n.forOwnRight=ju,n.get=Uu,n.gt=_l,n.gte=ml,n.has=Gu,n.hasIn=Vu,n.head=ba,n.identity=Rc,n.includes=ys,n.indexOf=Ea,n.inRange=ac,n.invoke=Bl,n.isArguments=xl,n.isArray=bl,n.isArrayBuffer=El,n.isArrayLike=Qs,n.isArrayLikeObject=Ks,n.isBoolean=Zs,n.isBuffer=wl,n.isDate=Pl,n.isElement=Js,n.isEmpty=tu,n.isEqual=eu,n.isEqualWith=nu,n.isError=ru,n.isFinite=iu,n.isFunction=ou,n.isInteger=au,n.isLength=su,n.isMap=kl,n.isMatch=fu,n.isMatchWith=hu,n.isNaN=lu,n.isNative=du,n.isNil=vu,n.isNull=pu,n.isNumber=gu,n.isObject=uu,n.isObjectLike=cu,n.isPlainObject=yu,n.isRegExp=Tl,n.isSafeInteger=_u,n.isSet=Al,n.isString=mu,n.isSymbol=xu,n.isTypedArray=Il,n.isUndefined=bu,n.isWeakMap=Eu,n.isWeakSet=wu,n.join=Pa,n.kebabCase=ql,n.last=ka,n.lastIndexOf=Ta,n.lowerCase=$l,n.lowerFirst=Ql,n.lt=Sl,n.lte=Cl,n.max=Zc,n.maxBy=Jc,n.mean=tf,n.meanBy=ef,n.min=nf,n.minBy=rf,n.stubArray=Xc,n.stubFalse=Hc,n.stubObject=Wc,n.stubString=Yc,n.stubTrue=qc,n.multiply=gd,n.nth=Aa,n.noConflict=Fc,n.noop=Bc,n.now=cl,n.pad=dc,n.padEnd=pc,n.padStart=vc,n.parseInt=gc,n.random=sc,n.reduce=xs,n.reduceRight=bs,n.repeat=yc,n.replace=_c,n.result=Qu,n.round=yd,n.runInContext=t,n.sample=ws,n.size=Ts,n.snakeCase=Kl,n.some=As,n.sortedIndex=Ra,n.sortedIndexBy=za,n.sortedIndexOf=Na,n.sortedLastIndex=Da,n.sortedLastIndexBy=ja,n.sortedLastIndexOf=Fa,n.startCase=Zl,n.startsWith=xc,n.subtract=_d,n.sum=of,n.sumBy=af,n.template=bc,n.times=$c,n.toFinite=ku,n.toInteger=Tu,n.toLength=Au,n.toLower=Ec,n.toNumber=Iu,n.toSafeInteger=Cu,n.toString=Mu,n.toUpper=wc,n.trim=Pc,n.trimEnd=kc,n.trimStart=Tc,n.truncate=Ac,n.unescape=Ic,n.uniqueId=Kc,n.upperCase=Jl,n.upperFirst=td,n.each=vs,n.eachRight=gs,n.first=ba,jc(n,function(){var t={};return nr(n,function(e,r){bf.call(n.prototype,r)||(t[r]=e)}),t}(),{chain:!1}),n.VERSION=ot,c(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){n[t].placeholder=n}),c(["drop","take"],function(t,e){x.prototype[t]=function(n){n=n===it?1:Qf(Tu(n),0);var r=this.__filtered__&&!e?new x(this):this.clone();return r.__filtered__?r.__takeCount__=Kf(n,r.__takeCount__):r.__views__.push({size:Kf(n,jt),type:t+(r.__dir__<0?"Right":"")}),r},x.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),c(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==Mt||n==Lt;x.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ko(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),c(["head","last"],function(t,e){var n="take"+(e?"Right":"");x.prototype[t]=function(){return this[n](1).value()[0]}}),c(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");x.prototype[t]=function(){return this.__filtered__?new x(this):this[n](1)}}),x.prototype.compact=function(){return this.filter(Rc)},x.prototype.find=function(t){return this.filter(t).head()},x.prototype.findLast=function(t){return this.reverse().find(t)},x.prototype.invokeMap=oi(function(t,e){return"function"==typeof t?new x(this):this.map(function(n){return Ir(n,t,e)})}),x.prototype.reject=function(t){return this.filter(Ns(ko(t)))},x.prototype.slice=function(t,e){t=Tu(t);var n=this;return n.__filtered__&&(t>0||e<0)?new x(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==it&&(e=Tu(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},x.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},x.prototype.toArray=function(){return this.take(jt)},nr(x.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),a=n[o?"take"+("last"==e?"Right":""):e],s=o||/^find/.test(e);a&&(n.prototype[e]=function(){var e=this.__wrapped__,u=o?[1]:arguments,c=e instanceof x,f=u[0],h=c||bl(e),l=function(t){var e=a.apply(n,g([t],u));return o&&d?e[0]:e};h&&r&&"function"==typeof f&&1!=f.length&&(c=h=!1);var d=this.__chain__,p=!!this.__actions__.length,v=s&&!d,y=c&&!p;if(!s&&h){e=y?e:new x(this);var _=t.apply(e,u);return _.__actions__.push({func:ns,args:[l],thisArg:it}),new i(_,d)}return v&&y?t.apply(this,u):(_=this.thru(l),v?o?_.value()[0]:_.value():_)})}),c(["pop","push","shift","sort","splice","unshift"],function(t){var e=gf[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);n.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var n=this.value();return e.apply(bl(n)?n:[],t)}return this[r](function(n){return e.apply(bl(n)?n:[],t)})}}),nr(x.prototype,function(t,e){var r=n[e];if(r){var i=r.name+"",o=ch[i]||(ch[i]=[]);o.push({name:e,func:r})}}),ch[eo(it,_t).name]=[{name:"wrapper",func:it}],x.prototype.clone=S,x.prototype.reverse=K,x.prototype.value=et,n.prototype.at=tl,n.prototype.chain=rs,n.prototype.commit=is,n.prototype.next=os,n.prototype.plant=ss,n.prototype.reverse=us,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=cs,n.prototype.first=n.prototype.head,Df&&(n.prototype[Df]=as),n},Pr=wr();sr._=Pr,i=function(){return Pr}.call(e,n,e,r),!(i!==it&&(r.exports=i))}).call(this)}).call(e,n(159),n(160)(t))},function(t,e,n){"use strict";function r(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)}function i(t,e,n){return r(t,e,n)>0}function o(t,e,n){return r(t,e,n)<0}function a(t){var e,n=t.slice(0).sort(function(t,e){return t.x!==e.x?e.x-t.x:e.y-t.y}),i=t.length,o=0,a=n[0].x;for(e=1;e<i&&n[e].x===a;++e);var s=e-1,u=[];if(u.push(n[o]),s===i-1)n[s].y!==n[o].y&&u.push(n[s]);else{var c,f=i-1,h=n[i-1].x;for(e=i-2;e>=0&&n[e].x===h;e--);for(c=e+1,e=s;++e<=c;)if(!(r(n[o],n[c],n[e])>=0&&e<c)){for(;u.length>1&&!(r(u[u.length-2],u[u.length-1],n[e])>0);)u.length-=1;e!=o&&u.push(n[e])}f!=c&&u.push(n[f]);var l=u.length;for(e=c;--e>=s;)if(!(r(n[f],n[s],n[e])>=0&&e>s)){for(;u.length>l&&!(r(u[u.length-2],u[u.length-1],n[e])>0);)u.length-=1;e!=o&&u.push(n[e])}}return u}function s(t,e,n){e.slice(0).sort(function(e,n){return Math.atan2(e.y-t.y,e.x-t.x)-Math.atan2(n.y-t.y,n.x-t.x)}).forEach(n)}function u(t,e){var n=e.slice(0);return n.push(e[0]),{rtan:c(t,n),ltan:f(t,n)}}function c(t,e){var n,r,a,s,u,c=e.length-1;if(o(t,e[1],e[0])&&!i(t,e[c-1],e[0]))return 0;for(n=0,r=c;;){if(r-n===1)return i(t,e[n],e[r])?n:r;if(a=Math.floor((n+r)/2),u=o(t,e[a+1],e[a]),u&&!i(t,e[a-1],e[a]))return a;s=i(t,e[n+1],e[n]),s?u?r=a:i(t,e[n],e[a])?r=a:n=a:u&&o(t,e[n],e[a])?r=a:n=a}}function f(t,e){var n,r,a,s,u,c=e.length-1;if(i(t,e[c-1],e[0])&&!o(t,e[1],e[0]))return 0;for(n=0,r=c;;){if(r-n===1)return o(t,e[n],e[r])?n:r;if(a=Math.floor((n+r)/2),u=o(t,e[a+1],e[a]),i(t,e[a-1],e[a])&&!u)return a;s=o(t,e[n+1],e[n]),s?u?o(t,e[n],e[a])?r=a:n=a:r=a:u?n=a:i(t,e[n],e[a])?r=a:n=a}}function h(t,e,n,r,i,o){var a,s;a=n(e[0],t),s=r(t[a],e);for(var u=!1;!u;){for(u=!0;;){if(a===t.length-1&&(a=0),i(e[s],t[a],t[a+1]))break;++a}for(;;){if(0===s&&(s=e.length-1),o(t[a],e[s],e[s-1]))break;--s,u=!1}}return{t1:a,t2:s}}function l(t,e){var n=d(e,t);return{t1:n.t2,t2:n.t1}}function d(t,e){return h(t,e,c,f,i,o)}function p(t,e){return h(t,e,f,f,o,o)}function v(t,e){return h(t,e,c,c,i,i)}function g(t,e){for(var n=[],r=1,i=e.length;r<i;++r){var o=E.Rectangle.lineIntersection(t.x1,t.y1,t.x2,t.y2,e[r-1].x,e[r-1].y,e[r].x,e[r].y);o&&n.push(o)}return n}function y(t,e){for(var n=t.length-1,i=e.length-1,o=new A,a=0;a<n;++a)for(var s=0;s<i;++s){var u=t[0==a?n-1:a-1],c=t[a],f=t[a+1],h=e[0==s?i-1:s-1],l=e[s],d=e[s+1],p=r(u,c,l),v=r(c,h,l),g=r(c,l,d),y=r(h,l,c),_=r(l,u,c),m=r(l,c,f);p>=0&&v>=0&&g<0&&y>=0&&_>=0&&m<0?o.ll=new T(a,s):p<=0&&v<=0&&g>0&&y<=0&&_<=0&&m>0?o.rr=new T(a,s):p<=0&&v>0&&g<=0&&y>=0&&_<0&&m>=0?o.rl=new T(a,s):p>=0&&v<0&&g>=0&&y<=0&&_>0&&m<=0&&(o.lr=new T(a,s))}return o}function _(t,e){for(var n=1,r=e.length;n<r;++n)if(o(e[n-1],e[n],t))return!1;return!0}function m(t,e){return!t.every(function(t){return!_(t,e)})}function x(t,e){if(m(t,e))return!0;if(m(e,t))return!0;for(var n=1,r=t.length;n<r;++n){var i=t[n],o=t[n-1];if(g(new P(o.x,o.y,i.x,i.y),e).length>0)return!0}return!1}var b=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var E=n(8),w=function(){function t(){}return t}();e.Point=w;var P=function(){function t(t,e,n,r){this.x1=t,this.y1=e,this.x2=n,this.y2=r}return t}();e.LineSegment=P;var k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return b(e,t),e}(w);e.PolyPoint=k,e.isLeft=r,e.ConvexHull=a,e.clockwiseRadialSweep=s,e.tangent_PolyPolyC=h,e.LRtangent_PolyPolyC=l,e.RLtangent_PolyPolyC=d,e.LLtangent_PolyPolyC=p,e.RRtangent_PolyPolyC=v;var T=function(){function t(t,e){this.t1=t,this.t2=e}return t}();e.BiTangent=T;var A=function(){function t(){}return t}();e.BiTangents=A;var I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return b(e,t),e}(w);e.TVGPoint=I;var S=function(){function t(t,e,n,r){this.id=t,this.polyid=e,this.polyvertid=n,this.p=r,r.vv=this}return t}();e.VisibilityVertex=S;var C=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.length=function(){var t=this.source.p.x-this.target.p.x,e=this.source.p.y-this.target.p.y;return Math.sqrt(t*t+e*e)},t}();e.VisibilityEdge=C;var M=function(){function t(t,e){if(this.P=t,this.V=[],this.E=[],e)this.V=e.V.slice(0),this.E=e.E.slice(0);else{for(var n=t.length,r=0;r<n;r++){for(var i=t[r],o=0;o<i.length;++o){var a=i[o],s=new S(this.V.length,r,o,a);this.V.push(s),o>0&&this.E.push(new C(i[o-1].vv,s))}i.length>1&&this.E.push(new C(i[0].vv,i[i.length-1].vv))}for(var r=0;r<n-1;r++)for(var u=t[r],o=r+1;o<n;o++){var c=t[o],f=y(u,c);for(var h in f){var l=f[h],d=u[l.t1],p=c[l.t2];this.addEdgeIfVisible(d,p,r,o)}}}}return t.prototype.addEdgeIfVisible=function(t,e,n,r){this.intersectsPolys(new P(t.x,t.y,e.x,e.y),n,r)||this.E.push(new C(t.vv,e.vv))},t.prototype.addPoint=function(t,e){var n=this.P.length;this.V.push(new S(this.V.length,n,0,t));for(var r=0;r<n;++r)if(r!==e){var i=this.P[r],o=u(t,i);this.addEdgeIfVisible(t,i[o.ltan],e,r),this.addEdgeIfVisible(t,i[o.rtan],e,r)}return t.vv},t.prototype.intersectsPolys=function(t,e,n){for(var r=0,i=this.P.length;r<i;++r)if(r!=e&&r!=n&&g(t,this.P[r]).length>0)return!0;return!1},t}();e.TangentVisibilityGraph=M,e.tangents=y,e.polysOverlap=x},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(20),o=n(10),a=function(){function t(t,e,n){this.id=t,this.rect=e,this.children=n,this.leaf="undefined"==typeof n||0===n.length}return t}();e.NodeWrapper=a;var s=function(){function t(t,e,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null),this.id=t,this.x=e,this.y=n,this.node=r,this.line=i}return t}();e.Vert=s;var u=function(){function t(e,n){this.s=e,this.t=n;var r=t.findMatch(e,n),i=n.slice(0).reverse(),o=t.findMatch(e,i);r.length>=o.length?(this.length=r.length,this.si=r.si,this.ti=r.ti,this.reversed=!1):(this.length=o.length,this.si=o.si,this.ti=n.length-o.ti-o.length,this.reversed=!0)}return t.findMatch=function(t,e){for(var n=t.length,r=e.length,i={length:0,si:-1,ti:-1},o=new Array(n),a=0;a<n;a++){o[a]=new Array(r);for(var s=0;s<r;s++)if(t[a]===e[s]){var u=o[a][s]=0===a||0===s?1:o[a-1][s-1]+1;u>i.length&&(i.length=u,i.si=a-u+1,i.ti=s-u+1)}else o[a][s]=0}return i},t.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},t}();e.LongestCommonSubsequence=u;var c=function(){function t(t,e,n){void 0===n&&(n=12);var i=this;this.originalnodes=t,this.groupPadding=n,this.leaves=null,this.nodes=t.map(function(t,n){return new a(n,e.getBounds(t),e.getChildren(t))}),this.leaves=this.nodes.filter(function(t){return t.leaf}),this.groups=this.nodes.filter(function(t){return!t.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(t){return t.children.forEach(function(e){return i.nodes[e].parent=t})}),this.root={children:[]},this.nodes.forEach(function(t){"undefined"==typeof t.parent&&(t.parent=i.root,i.root.children.push(t.id)),t.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(t,e){return i.getDepth(t)-i.getDepth(e)});var o=this.backToFront.slice(0).reverse().filter(function(t){return!t.leaf});o.forEach(function(t){var e=r.Rectangle.empty();t.children.forEach(function(t){return e=e.union(i.nodes[t].rect)}),t.rect=e.inflate(i.groupPadding)});var u=this.midPoints(this.cols.map(function(t){return t.pos})),c=this.midPoints(this.rows.map(function(t){return t.pos})),f=u[0],h=u[u.length-1],l=c[0],d=c[c.length-1],p=this.rows.map(function(t){return{x1:f,x2:h,y1:t.pos,y2:t.pos}}).concat(c.map(function(t){return{x1:f,x2:h,y1:t,y2:t}})),v=this.cols.map(function(t){return{x1:t.pos,x2:t.pos,y1:l,y2:d}}).concat(u.map(function(t){return{x1:t,x2:t,y1:l,y2:d}})),g=p.concat(v);g.forEach(function(t){return t.verts=[]}),this.verts=[],this.edges=[],p.forEach(function(t){return v.forEach(function(e){var n=new s(i.verts.length,e.x1,t.y1);t.verts.push(n),e.verts.push(n),i.verts.push(n);for(var r=i.backToFront.length;r-- >0;){var o=i.backToFront[r],a=o.rect,u=Math.abs(n.x-a.cx()),c=Math.abs(n.y-a.cy());if(u<a.width()/2&&c<a.height()/2){n.node=o;break}}})}),g.forEach(function(t,e){i.nodes.forEach(function(e,n){e.rect.lineIntersections(t.x1,t.y1,t.x2,t.y2).forEach(function(n,r){var o=new s(i.verts.length,n.x,n.y,e,t);i.verts.push(o),t.verts.push(o),e.ports.push(o)})});var n=Math.abs(t.y1-t.y2)<.1,r=function(t,e){return n?e.x-t.x:e.y-t.y};t.verts.sort(r);for(var o=1;o<t.verts.length;o++){var a=t.verts[o-1],u=t.verts[o];a.node&&a.node===u.node&&a.node.leaf||i.edges.push({source:a.id,target:u.id,length:Math.abs(r(a,u))})}})}return t.prototype.avg=function(t){return t.reduce(function(t,e){return t+e})/t.length},t.prototype.getGridLines=function(t){for(var e=[],n=this.leaves.slice(0,this.leaves.length);n.length>0;){var r=n.filter(function(e){return e.rect["overlap"+t.toUpperCase()](n[0].rect)}),i={nodes:r,pos:this.avg(r.map(function(e){return e.rect["c"+t]()}))};e.push(i),i.nodes.forEach(function(t){return n.splice(n.indexOf(t),1)})}return e.sort(function(t,e){return t.pos-e.pos}),e},t.prototype.getDepth=function(t){for(var e=0;t.parent!==this.root;)e++,t=t.parent;return e},t.prototype.midPoints=function(t){for(var e=t[1]-t[0],n=[t[0]-e/2],r=1;r<t.length;r++)n.push((t[r]+t[r-1])/2);return n.push(t[t.length-1]+e/2),n},t.prototype.findLineage=function(t){var e=[t];do t=t.parent,e.push(t);while(t!==this.root);return e.reverse()},t.prototype.findAncestorPathBetween=function(t,e){for(var n=this.findLineage(t),r=this.findLineage(e),i=0;n[i]===r[i];)i++;return{commonAncestor:n[i-1],lineages:n.slice(i).concat(r.slice(i))}},t.prototype.siblingObstacles=function(t,e){var n=this,r=this.findAncestorPathBetween(t,e),i={};r.lineages.forEach(function(t){return i[t.id]={}});var o=r.commonAncestor.children.filter(function(t){return!(t in i)});return r.lineages.filter(function(t){return t.parent!==r.commonAncestor}).forEach(function(t){return o=o.concat(t.parent.children.filter(function(e){return e!==t.id}))}),o.map(function(t){return n.nodes[t]})},t.getSegmentSets=function(t,e,n){for(var r=[],i=0;i<t.length;i++)for(var o=t[i],a=0;a<o.length;a++){var s=o[a];s.edgeid=i,s.i=a;var u=s[1][e]-s[0][e];Math.abs(u)<.1&&r.push(s)}r.sort(function(t,n){return t[0][e]-n[0][e]});for(var c=[],f=null,h=0;h<r.length;h++){var s=r[h];(!f||Math.abs(s[0][e]-f.pos)>.1)&&(f={pos:s[0][e],segments:[]},c.push(f)),f.segments.push(s)}return c},t.nudgeSegs=function(t,e,n,r,o,a){var s=r.length;if(!(s<=1)){for(var u=r.map(function(e){return new i.Variable(e[0][t])}),c=[],f=0;f<s;f++)for(var h=0;h<s;h++)if(f!==h){var l=r[f],d=r[h],p=l.edgeid,v=d.edgeid,g=-1,y=-1;"x"==t?o(p,v)&&(l[0][e]<l[1][e]?(g=h,y=f):(g=f,y=h)):o(p,v)&&(l[0][e]<l[1][e]?(g=f,y=h):(g=h,y=f)),g>=0&&c.push(new i.Constraint(u[g],u[y],a))}var _=new i.Solver(u,c);_.solve(),u.forEach(function(e,i){var o=r[i],a=e.position();o[0][t]=o[1][t]=a;var s=n[o.edgeid];o.i>0&&(s[o.i-1][1][t]=a),o.i<s.length-1&&(s[o.i+1][0][t]=a)})}},t.nudgeSegments=function(e,n,r,i,o){for(var a=t.getSegmentSets(e,n,r),s=0;s<a.length;s++){for(var u=a[s],c=[],f=0;f<u.segments.length;f++){var h=u.segments[f];c.push({type:0,s:h,pos:Math.min(h[0][r],h[1][r])}),c.push({type:1,s:h,pos:Math.max(h[0][r],h[1][r])})}c.sort(function(t,e){return t.pos-e.pos+t.type-e.type});var l=[],d=0;c.forEach(function(a){0===a.type?(l.push(a.s),d++):d--,0==d&&(t.nudgeSegs(n,r,e,l,i,o),l=[])})}},t.prototype.routeEdges=function(e,n,r,i){var o=this,a=e.map(function(t){return o.route(r(t),i(t))}),s=t.orderEdges(a),u=a.map(function(e){return t.makeSegments(e)});return t.nudgeSegments(u,"x","y",s,n),t.nudgeSegments(u,"y","x",s,n),t.unreverseEdges(u,a),u},t.unreverseEdges=function(t,e){t.forEach(function(t,n){var r=e[n];r.reversed&&(t.reverse(),t.forEach(function(t){t.reverse()}))})},t.angleBetween2Lines=function(t,e){var n=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),r=Math.atan2(e[0].y-e[1].y,e[0].x-e[1].x),i=n-r;return(i>Math.PI||i<-Math.PI)&&(i=r-n),i},t.isLeft=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)<=0},t.getOrder=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];"undefined"==typeof e[r.l]&&(e[r.l]={}),e[r.l][r.r]=!0}return function(t,n){return"undefined"!=typeof e[t]&&e[t][n]}},t.orderEdges=function(e){for(var n=[],r=0;r<e.length-1;r++)for(var i=r+1;i<e.length;i++){var o,a,s,c=e[r],f=e[i],h=new u(c,f);0!==h.length&&(h.reversed&&(f.reverse(),f.reversed=!0,h=new u(c,f)),(h.si<=0||h.ti<=0)&&(h.si+h.length>=c.length||h.ti+h.length>=f.length)?n.push({l:r,r:i}):(h.si+h.length>=c.length||h.ti+h.length>=f.length?(o=c[h.si+1],s=c[h.si-1],a=f[h.ti-1]):(o=c[h.si+h.length-2],a=c[h.si+h.length],s=f[h.ti+h.length]),t.isLeft(o,a,s)?n.push({l:i,r:r}):n.push({l:r,r:i})))}return t.getOrder(n)},t.makeSegments=function(t){function e(t){return{x:t.x,y:t.y}}for(var n=function(t,e,n){return Math.abs((e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x))<.001},r=[],i=e(t[0]),o=1;o<t.length;o++){var a=e(t[o]),s=o<t.length-1?t[o+1]:null;s&&n(i,a,s)||(r.push([i,a]),i=a)}return r},t.prototype.route=function(t,e){var n=this,r=this.nodes[t],i=this.nodes[e];this.obstacles=this.siblingObstacles(r,i);var a={};this.obstacles.forEach(function(t){return a[t.id]=t}),this.passableEdges=this.edges.filter(function(t){var e=n.verts[t.source],r=n.verts[t.target];return!(e.node&&e.node.id in a||r.node&&r.node.id in a)});for(var s=1;s<r.ports.length;s++){var u=r.ports[0].id,c=r.ports[s].id;this.passableEdges.push({source:u,target:c,length:0})}for(var s=1;s<i.ports.length;s++){var u=i.ports[0].id,c=i.ports[s].id;this.passableEdges.push({source:u,target:c,length:0})}var f=function(t){return t.source},h=function(t){return t.target},l=function(t){return t.length},d=new o.Calculator(this.verts.length,this.passableEdges,f,h,l),p=function(t,e,o){var a=n.verts[t],s=n.verts[e],u=n.verts[o],c=Math.abs(u.x-a.x),f=Math.abs(u.y-a.y);return a.node===r&&a.node===s.node||s.node===i&&s.node===u.node?0:c>1&&f>1?1e3:0},v=d.PathFromNodeToNodeWithPrevCost(r.ports[0].id,i.ports[0].id,p),g=v.reverse().map(function(t){return n.verts[t]});return g.push(this.nodes[i.id].ports[0]),g.filter(function(t,e){return!(e<g.length-1&&g[e+1].node===r&&t.node===r||e>0&&t.node===i&&g[e-1].node===i)})},t.getRoutePath=function(e,n,r,i){var o={routepath:"M "+e[0][0].x+" "+e[0][0].y+" ",arrowpath:""};if(e.length>1)for(var a=0;a<e.length;a++){var s=e[a],u=s[1].x,c=s[1].y,f=u-s[0].x,h=c-s[0].y;if(a<e.length-1){Math.abs(f)>0?u-=f/Math.abs(f)*n:c-=h/Math.abs(h)*n,o.routepath+="L "+u+" "+c+" ";var l=e[a+1],d=l[0].x,p=l[0].y,v=l[1].x,g=l[1].y;f=v-d,h=g-p;var y,_,m=t.angleBetween2Lines(s,l)<0?1:0;Math.abs(f)>0?(y=d+f/Math.abs(f)*n,_=p):(y=d,_=p+h/Math.abs(h)*n);var x=Math.abs(y-u),b=Math.abs(_-c);o.routepath+="A "+x+" "+b+" 0 0 "+m+" "+y+" "+_+" "}else{var E,w,P=[u,c];Math.abs(f)>0?(u-=f/Math.abs(f)*i,E=[u,c+r],w=[u,c-r]):(c-=h/Math.abs(h)*i,E=[u+r,c],w=[u-r,c]),o.routepath+="L "+u+" "+c+" ",i>0&&(o.arrowpath="M "+P[0]+" "+P[1]+" L "+E[0]+" "+E[1]+" L "+w[0]+" "+w[1])}}else{var E,w,s=e[0],u=s[1].x,c=s[1].y,f=u-s[0].x,h=c-s[0].y,P=[u,c];Math.abs(f)>0?(u-=f/Math.abs(f)*i,E=[u,c+r],w=[u,c-r]):(c-=h/Math.abs(h)*i,E=[u+r,c],w=[u-r,c]),o.routepath+="L "+u+" "+c+" ",i>0&&(o.arrowpath="M "+P[0]+" "+P[1]+" L "+E[0]+" "+E[1]+" L "+w[0]+" "+w[1])}return o},t}();e.GridRouter=c},function(t,e,n){"use strict";function r(t,e,n,r,i){function a(t){function e(t){var e=Number.MAX_VALUE,n=Number.MAX_VALUE,i=0,o=0;t.array.forEach(function(t){var a="undefined"!=typeof t.width?t.width:r,s="undefined"!=typeof t.height?t.height:r;a/=2,s/=2,i=Math.max(t.x+a,i),e=Math.min(t.x-a,e),o=Math.max(t.y+s,o),n=Math.min(t.y-s,n)}),t.width=i-e,t.height=o-n}t.forEach(function(t){e(t)})}function s(t){t.forEach(function(t){var e={x:0,y:0};t.array.forEach(function(t){e.x+=t.x,e.y+=t.y}),e.x/=t.array.length,e.y/=t.array.length;var n={x:e.x-t.width/2,y:e.y-t.height/2},r={x:t.x-n.x+v/2-y/2,y:t.y-n.y+g/2-_/2};t.array.forEach(function(t){t.x+=r.x,t.y+=r.y})})}function u(t,e){var n=Number.POSITIVE_INFINITY,r=0;t.sort(function(t,e){return e.height-t.height}),m=t.reduce(function(t,e){return t.width<e.width?t.width:e.width});for(var i=v=m,a=g=h(t),s=0,u=Number.MAX_VALUE,f=Number.MAX_VALUE,l=-1,d=Number.MAX_VALUE,p=Number.MAX_VALUE;d>m||p>o.FLOAT_EPSILON;){if(1!=l)var v=a-(a-i)/o.GOLDEN_SECTION,u=c(t,v);if(0!=l)var g=i+(a-i)/o.GOLDEN_SECTION,f=c(t,g);if(d=Math.abs(v-g),p=Math.abs(u-f),u<n&&(n=u,r=v),f<n&&(n=f,r=g),u>f?(i=v,v=g,u=f,l=1):(a=g,g=v,f=u,l=0),s++>100)break}c(t,r)}function c(t,e){b=[],y=0,_=0,x=p;for(var n=0;n<t.length;n++){var r=t[n];f(r,e)}return Math.abs(l()-i)}function f(t,e){for(var n=void 0,r=0;r<b.length;r++)if(b[r].space_left>=t.height&&b[r].x+b[r].width+t.width+o.PADDING-e<=o.FLOAT_EPSILON){n=b[r];break}b.push(t),void 0!==n?(t.x=n.x+n.width+o.PADDING,t.y=n.bottom,t.space_left=t.height,t.bottom=t.y,n.space_left-=t.height+o.PADDING,n.bottom+=t.height+o.PADDING):(t.y=x,x+=t.height+o.PADDING,t.x=d,t.bottom=t.y,t.space_left=t.height),t.y+t.height-_>-o.FLOAT_EPSILON&&(_=t.y+t.height-p),t.x+t.width-y>-o.FLOAT_EPSILON&&(y=t.x+t.width-d)}function h(t){var e=0;return t.forEach(function(t){return e+=t.width+o.PADDING}),e}function l(){return y/_}void 0===i&&(i=1);var d=0,p=0,v=e,g=n,i="undefined"!=typeof i?i:1,r="undefined"!=typeof r?r:0,y=0,_=0,m=0,x=0,b=[];0!=t.length&&(a(t),u(t,i),s(t))}function i(t,e){function n(t,e){if(void 0===r[t.index]){e&&(a++,o.push({array:[]})),r[t.index]=a,o[a-1].array.push(t);var s=i[t.index];if(s)for(var u=0;u<s.length;u++)n(s[u],!1)}}for(var r={},i={},o=[],a=0,s=0;s<e.length;s++){var u=e[s],c=u.source,f=u.target;i[c.index]?i[c.index].push(f):i[c.index]=[f],i[f.index]?i[f.index].push(c):i[f.index]=[c]}for(var s=0;s<t.length;s++){var h=t[s];r[h.index]||n(h,!0)}return o}Object.defineProperty(e,"__esModule",{value:!0});var o={PADDING:10,GOLDEN_SECTION:(1+Math.sqrt(5))/2,FLOAT_EPSILON:1e-4,MAX_INERATIONS:100};e.applyPacking=r,e.separateGraphs=i},function(t,e,n){"use strict";function r(t,e,n){t.forAll(function(t){if(t.isLeaf())e.leaves||(e.leaves=[]),e.leaves.push(t.id);else{var i=e;if(t.gid=n.length,!t.isIsland()||t.isPredefined()){if(i={id:t.gid},t.isPredefined())for(var o in t.definition)i[o]=t.definition[o];e.groups||(e.groups=[]),e.groups.push(t.gid),n.push(i)}r(t.children,i,n)}})}function i(t,e){var n={};for(var r in t)r in e&&(n[r]=t[r]);return n}function o(t,e,n,r){for(var i=t.length,o=new s(i,e,n,r);o.greedyMerge(););var a=[],u=o.getGroupHierarchy(a);return a.forEach(function(e){var n=function(n){var r=e[n];"number"==typeof r&&(e[n]=t[r])};n("source"),n("target")}),{groups:u,powerEdges:a}}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e,n){this.source=t,this.target=e,this.type=n}return t}();e.PowerEdge=a;var s=function(){function t(t,e,n,r){var i=this;if(this.linkAccessor=n,this.modules=new Array(t),this.roots=[],r)this.initModulesFromGroup(r);else{this.roots.push(new c);for(var o=0;o<t;++o)this.roots[0].add(this.modules[o]=new u(o))}this.R=e.length,e.forEach(function(t){var e=i.modules[n.getSourceIndex(t)],r=i.modules[n.getTargetIndex(t)],o=n.getType(t);e.outgoing.add(o,r),r.incoming.add(o,e)})}return t.prototype.initModulesFromGroup=function(t){var e=new c;this.roots.push(e);for(var n=0;n<t.leaves.length;++n){var r=t.leaves[n],i=new u(r.id);this.modules[r.id]=i,e.add(i)}if(t.groups)for(var o=0;o<t.groups.length;++o){var a=t.groups[o],s={};for(var h in a)"leaves"!==h&&"groups"!==h&&a.hasOwnProperty(h)&&(s[h]=a[h]);e.add(new u(-1-o,new f,new f,this.initModulesFromGroup(a),s))}return e},t.prototype.merge=function(t,e,n){void 0===n&&(n=0);var r=t.incoming.intersection(e.incoming),i=t.outgoing.intersection(e.outgoing),o=new c;o.add(t),o.add(e);var a=new u(this.modules.length,i,r,o);this.modules.push(a);var s=function(n,r,i){n.forAll(function(n,o){n.forAll(function(n){var s=n[r];s.add(o,a),s.remove(o,t),s.remove(o,e),t[i].remove(o,n),e[i].remove(o,n)})})};return s(i,"incoming","outgoing"),s(r,"outgoing","incoming"),this.R-=r.count()+i.count(),this.roots[n].remove(t),this.roots[n].remove(e),this.roots[n].add(a),a},t.prototype.rootMerges=function(t){void 0===t&&(t=0);for(var e=this.roots[t].modules(),n=e.length,r=new Array(n*(n-1)),i=0,o=0,a=n-1;o<a;++o)for(var s=o+1;s<n;++s){var u=e[o],c=e[s];r[i]={id:i,nEdges:this.nEdges(u,c),a:u,b:c},i++}return r},t.prototype.greedyMerge=function(){for(var t=0;t<this.roots.length;++t)if(!(this.roots[t].modules().length<2)){var e=this.rootMerges(t).sort(function(t,e){return t.nEdges==e.nEdges?t.id-e.id:t.nEdges-e.nEdges}),n=e[0];if(!(n.nEdges>=this.R))return this.merge(n.a,n.b,t),!0}},t.prototype.nEdges=function(t,e){var n=t.incoming.intersection(e.incoming),r=t.outgoing.intersection(e.outgoing);return this.R-n.count()-r.count()},t.prototype.getGroupHierarchy=function(t){var e=this,n=[],i={};r(this.roots[0],i,n);var o=this.allEdges();return o.forEach(function(r){var i=e.modules[r.source],o=e.modules[r.target];t.push(new a("undefined"==typeof i.gid?r.source:n[i.gid],"undefined"==typeof o.gid?r.target:n[o.gid],r.type))}),n},t.prototype.allEdges=function(){var e=[];return t.getEdges(this.roots[0],e),e},t.getEdges=function(e,n){e.forAll(function(e){e.getEdges(n),t.getEdges(e.children,n)})},t}();e.Configuration=s;var u=function(){function t(t,e,n,r,i){void 0===e&&(e=new f),void 0===n&&(n=new f),void 0===r&&(r=new c),this.id=t,this.outgoing=e,this.incoming=n,this.children=r,this.definition=i}return t.prototype.getEdges=function(t){var e=this;this.outgoing.forAll(function(n,r){n.forAll(function(n){t.push(new a(e.id,n.id,r))})})},t.prototype.isLeaf=function(){return 0===this.children.count()},t.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},t.prototype.isPredefined=function(){return"undefined"!=typeof this.definition},t}();e.Module=u;var c=function(){function t(){this.table={}}return t.prototype.count=function(){return Object.keys(this.table).length},t.prototype.intersection=function(e){var n=new t;return n.table=i(this.table,e.table),n},t.prototype.intersectionCount=function(t){return this.intersection(t).count()},t.prototype.contains=function(t){return t in this.table},t.prototype.add=function(t){this.table[t.id]=t},t.prototype.remove=function(t){delete this.table[t.id]},t.prototype.forAll=function(t){for(var e in this.table)t(this.table[e])},t.prototype.modules=function(){var t=[];return this.forAll(function(e){e.isPredefined()||t.push(e)}),t},t}();e.ModuleSet=c;var f=function(){function t(){this.sets={},this.n=0}return t.prototype.count=function(){return this.n},t.prototype.contains=function(t){var e=!1;return this.forAllModules(function(n){e||n.id!=t||(e=!0)}),e},t.prototype.add=function(t,e){var n=t in this.sets?this.sets[t]:this.sets[t]=new c;n.add(e),++this.n},t.prototype.remove=function(t,e){var n=this.sets[t];n.remove(e),0===n.count()&&delete this.sets[t],--this.n},t.prototype.forAll=function(t){for(var e in this.sets)t(this.sets[e],Number(e))},t.prototype.forAllModules=function(t){this.forAll(function(e,n){return e.forAll(t)})},t.prototype.intersection=function(e){var n=new t;return this.forAll(function(t,r){if(r in e.sets){var i=t.intersection(e.sets[r]),o=i.count();o>0&&(n.sets[r]=i,n.n+=o)}}),n},t}();e.LinkSets=f,e.getGroups=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.elem=t,this.subheaps=[]}return t.prototype.toString=function(t){for(var e="",n=!1,r=0;r<this.subheaps.length;++r){var i=this.subheaps[r];i.elem?(n&&(e+=","),e+=i.toString(t),n=!0):n=!1}return""!==e&&(e="("+e+")"),(this.elem?t(this.elem):"")+e},t.prototype.forEach=function(t){this.empty()||(t(this.elem,this),this.subheaps.forEach(function(e){return e.forEach(t)}))},t.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(t,e){return t+e.count()},0)},t.prototype.min=function(){return this.elem},t.prototype.empty=function(){return null==this.elem},t.prototype.contains=function(t){if(this===t)return!0;for(var e=0;e<this.subheaps.length;e++)if(this.subheaps[e].contains(t))return!0;return!1},t.prototype.isHeap=function(t){var e=this;return this.subheaps.every(function(n){return t(e.elem,n.elem)&&n.isHeap(t)})},t.prototype.insert=function(e,n){return this.merge(new t(e),n);
},t.prototype.merge=function(t,e){return this.empty()?t:t.empty()?this:e(this.elem,t.elem)?(this.subheaps.push(t),this):(t.subheaps.push(this),t)},t.prototype.removeMin=function(t){return this.empty()?null:this.mergePairs(t)},t.prototype.mergePairs=function(e){if(0==this.subheaps.length)return new t(null);if(1==this.subheaps.length)return this.subheaps[0];var n=this.subheaps.pop().merge(this.subheaps.pop(),e),r=this.mergePairs(e);return n.merge(r,e)},t.prototype.decreaseKey=function(e,n,r,i){var o=e.removeMin(i);e.elem=o.elem,e.subheaps=o.subheaps,null!==r&&null!==o.elem&&r(e.elem,e);var a=new t(n);return null!==r&&r(n,a),this.merge(a,i)},t}();e.PairingHeap=r;var i=function(){function t(t){this.lessThan=t}return t.prototype.top=function(){return this.empty()?null:this.root.elem},t.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n,i,o=0;i=t[o];++o)n=new r(i),this.root=this.empty()?n:this.root.merge(n,this.lessThan);return n},t.prototype.empty=function(){return!this.root||!this.root.elem},t.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},t.prototype.forEach=function(t){this.root.forEach(t)},t.prototype.pop=function(){if(this.empty())return null;var t=this.root.min();return this.root=this.root.removeMin(this.lessThan),t},t.prototype.reduceKey=function(t,e,n){void 0===n&&(n=null),this.root=this.root.decreaseKey(t,e,n,this.lessThan)},t.prototype.toString=function(t){return this.root.toString(t)},t.prototype.count=function(){return this.root.count()},t}();e.PriorityQueue=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.findIter=function(t){for(var e=this._root,n=this.iterator();null!==e;){var r=this._comparator(t,e.data);if(0===r)return n._cursor=e,n;n._ancestors.push(e),e=e.get_child(r>0)}return null}}return t.prototype.clear=function(){this._root=null,this.size=0},t.prototype.find=function(t){for(var e=this._root;null!==e;){var n=this._comparator(t,e.data);if(0===n)return e.data;e=e.get_child(n>0)}return null},t.prototype.lowerBound=function(t){return this._bound(t,this._comparator)},t.prototype.upperBound=function(t){function e(t,e){return n(e,t)}var n=this._comparator;return this._bound(t,e)},t.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},t.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},t.prototype.iterator=function(){return new o(this)},t.prototype.each=function(t){for(var e,n=this.iterator();null!==(e=n.next());)t(e)},t.prototype.reach=function(t){for(var e,n=this.iterator();null!==(e=n.prev());)t(e)},t.prototype._bound=function(t,e){for(var n=this._root,r=this.iterator();null!==n;){var i=this._comparator(t,n.data);if(0===i)return r._cursor=n,r;r._ancestors.push(n),n=n.get_child(i>0)}for(var o=r._ancestors.length-1;o>=0;--o)if(n=r._ancestors[o],e(t,n.data)>0)return r._cursor=n,r._ancestors.length=o,r;return r._ancestors.length=0,r},t}();e.TreeBase=i;var o=function(){function t(t){this._tree=t,this._ancestors=[],this._cursor=null}return t.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},t.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else if(null===this._cursor.right){var e;do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===e)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},t.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else if(null===this._cursor.left){var e;do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===e)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},t.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},t.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t},t}();e.Iterator=o;var a=function(){function t(t){this.data=t,this.left=null,this.right=null,this.red=!0}return t.prototype.get_child=function(t){return t?this.right:this.left},t.prototype.set_child=function(t,e){t?this.right=e:this.left=e},t}(),s=function(t){function e(e){var n=t.call(this)||this;return n._root=null,n._comparator=e,n.size=0,n}return r(e,t),e.prototype.insert=function(t){var n=!1;if(null===this._root)this._root=new a(t),n=!0,this.size++;else{var r=new a(void 0),i=!1,o=!1,s=null,u=r,c=null,f=this._root;for(u.right=this._root;;){if(null===f?(f=new a(t),c.set_child(i,f),n=!0,this.size++):e.is_red(f.left)&&e.is_red(f.right)&&(f.red=!0,f.left.red=!1,f.right.red=!1),e.is_red(f)&&e.is_red(c)){var h=u.right===s;f===c.get_child(o)?u.set_child(h,e.single_rotate(s,!o)):u.set_child(h,e.double_rotate(s,!o))}var l=this._comparator(f.data,t);if(0===l)break;o=i,i=l<0,null!==s&&(u=s),s=c,c=f,f=f.get_child(i)}this._root=r.right}return this._root.red=!1,n},e.prototype.remove=function(t){if(null===this._root)return!1;var n=new a(void 0),r=n;r.right=this._root;for(var i=null,o=null,s=null,u=!0;null!==r.get_child(u);){var c=u;o=i,i=r,r=r.get_child(u);var f=this._comparator(t,r.data);if(u=f>0,0===f&&(s=r),!e.is_red(r)&&!e.is_red(r.get_child(u)))if(e.is_red(r.get_child(!u))){var h=e.single_rotate(r,u);i.set_child(c,h),i=h}else if(!e.is_red(r.get_child(!u))){var l=i.get_child(!c);if(null!==l)if(e.is_red(l.get_child(!c))||e.is_red(l.get_child(c))){var d=o.right===i;e.is_red(l.get_child(c))?o.set_child(d,e.double_rotate(i,c)):e.is_red(l.get_child(!c))&&o.set_child(d,e.single_rotate(i,c));var p=o.get_child(d);p.red=!0,r.red=!0,p.left.red=!1,p.right.red=!1}else i.red=!1,l.red=!0,r.red=!0}}return null!==s&&(s.data=r.data,i.set_child(i.right===r,r.get_child(null===r.left)),this.size--),this._root=n.right,null!==this._root&&(this._root.red=!1),null!==s},e.is_red=function(t){return null!==t&&t.red},e.single_rotate=function(t,e){var n=t.get_child(!e);return t.set_child(!e,n.get_child(e)),n.set_child(e,t),t.red=!0,n.red=!1,n},e.double_rotate=function(t,n){return t.set_child(!n,e.single_rotate(t.get_child(!n),!n)),e.single_rotate(t,n)},e}(i);e.RBTree=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(22),s=r(a),u=n(24),c=r(u),f=n(1),h=r(f),l=n(11),d=r(l),p=n(47),v=r(p),g=n(57),y=r(g),_=n(48),m=r(_),x=function(){function t(e){i(this,t),e=e||{},this.container=e.container,this.config=h.default.extend(e.config||{},m.default),this.graph=e.graph?e.graph:new s.default({nodes:e.nodes,edges:e.edges}),this.debug=!1,this._destroy=!1,this._nextTicks=[],this.canvas={},this.initCanvas(),this.render=new c.default(this,this.canvas.render),this.selection=new v.default(this,this.canvas.mouse),this.on=this.render.on.bind(this.render),this.off=this.render.off.bind(this.render),this._start(),this._initEvent()}return o(t,[{key:"destroy",value:function(){this._destroy||(this.graph.clear(),this.graph.clearListeners(),this.graph=null,this.render.destroy(),this.render=null,this.selection.destroy(),this.selection=null,this.container=null,this.canvas=null,this._destroy=!0)}},{key:"initCanvas",value:function(){this.container.style.position="relative",this.canvas.render=this.createElement("canvas"),this.canvas.render.className="render",this.container.appendChild(this.canvas.render),this.canvas.mouse=this.createElement("canvas"),this.canvas.mouse.style.display="none",this.canvas.mouse.style.cursor="crosshair",this.container.appendChild(this.canvas.mouse)}},{key:"createElement",value:function(t){var e=document.createElement(t);return e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.width="100%",e.style.height="100%",e.style.border="none",e.width=this.container.clientWidth,e.height=this.container.clientHeight,e.oncontextmenu=function(t){return t.preventDefault(),!1},e}},{key:"_start",value:function(){function t(){var t=-1,e=0;return function(r){t++,r/=1e3,r-e>1&&(n.debug&&console.log("frames:"+t),t=-1,e=r)}}function e(t){n._destroy||n.render._destroy||(n._render(),r(t),n.runNextTicks(),n._destroy||requestAnimationFrame(e))}var n=this,r=t();requestAnimationFrame(e)}},{key:"_render",value:function(){this.resize(),this.render&&this.render.render()}},{key:"runNextTicks",value:function(){if(!(this._nextTicks.length<1)){var t=this._nextTicks.slice(0);this._nextTicks=[],t.forEach(function(t){t()})}}},{key:"_initEvent",value:function(){}},{key:"resize",value:function(){this.canvas.mouse.width==this.container.clientWidth&&this.canvas.mouse.height==this.container.clientHeight||(this.canvas.mouse.width=this.container.clientWidth,this.canvas.mouse.height=this.container.clientHeight,this.render.forceRender())}},{key:"getFitOptions",value:function(t){var e=1/0,n=1/0,r=-(1/0),i=-(1/0);t.forEach(function(t){t.x<e&&(e=t.x),t.x>r&&(r=t.x),t.y<n&&(n=t.y),t.y>i&&(i=t.y)});var o=Math.max((r-e)/this.render.container.clientWidth,(i-n)/this.render.container.clientHeight);return{scale:t.length<2?this.render.camera.scale:o,positionX:(e+r)/2,positionY:(n+i)/2}}},{key:"fit",value:function(t,e){d.default.removeByType("camera"),e=e||this.getFitOptions(this.graph.nodes),this.render.zoomTo(e,t)}},{key:"nextTick",value:function(t){this._nextTicks.push(t)}},{key:"makeLayout",value:function(e,n,r){function i(t){var e={},n=[];return t.forEach(function(t){e[t.id]=!0}),l.graph.edges.forEach(function(t){e[t.source]&&e[t.target]&&n.push(t)}),n}function o(t,e){var n=l.graph;t.forEach(function(t){var r=n.inEdgesIndex[t.id],i=n.outEdgesIndex[t.id];r&&r.forEach(function(t){l.graph.setEdgeData(t,{animation:e})}),i&&i.forEach(function(t){l.graph.setEdgeData(t,{animation:e})})})}function a(t,e){var n,r=l.graph,i=r.nodesIndex[t.source],o=r.nodesIndex[t.target];e?(n=s(t.paths,e.length,[i.x,i.y],[o.x,o.y]),r.setEdgeData(t.id,{paths:n,_destPaths:e})):t.paths&&(n=s(null,t.paths.length,[i._destPos[0],i._destPos[1]],[o._destPos[0],o._destPos[1]]),r.setEdgeData(t.id,{_destPaths:n}))}function s(t,e,n,r){if(t=t||[],t.length==e)return t;if(e-t.length>0)for(var i=e-t.length,o=0==t.length?n[0]:t[t.length][0],a=0==t.length?n[1]:t[t.length][1],s=r[0],u=r[1],c=0;c<i;c++)t.push([o+(s-o)/(i+1)*(c+1),a+(u-a)/(i+1)*(c+1)]);else t=t.slice(0,e);return t}n=n||{},r=r||function(){};var u,c,f,l=this,p=t.layout,v=n.nodes,g=n.duration,y=n.center,_=n.fit;d.default.removeByType("layout");var m=null;if(null==v?(v=this.graph.nodes,m=this.graph.edges):m=i(v),e&&"preset"!=e){if(u=p[e]){if(u=new p[e],c=u.layout(v,m,n),c instanceof Error)return r(c);if(c.edges&&(f=c.edges,c=c.nodes),y&&!f){var x=h.default.getBBox(v),b=h.default.getBBox(c),E=x.x+x.w/2-(b.x+b.w/2),w=x.y+x.h/2-(b.y+b.h/2);c.forEach(function(t){t.x+=E,t.y+=w})}g?(v.forEach(function(t,e){l.graph.setNodeData(t.id,{_destPos:[c[e].x,c[e].y],animation:!0})}),o(v,!0),l.render.renderOptions.time=0,f?f.forEach(function(t,e){a(l.graph.edgesIndex[t.id],t.paths)}):m.forEach(function(t){a(t,null)}),l.nextTick(function(){new d.default([{}],"layout").to([{}]).duration(g).on("change",function(t){l.render.renderOptions.time=t,l.render.forceRender()}).on("end",function(){v.forEach(function(t,e){l.graph.setNodeData(t.id,{x:c[e].x,y:c[e].y,_destPos:null,animation:!1})}),o(v,!1),f?f.forEach(function(t,e){l.graph.setEdgeData(t.id,{paths:t.paths,_destPaths:null})}):m.forEach(function(t){l.graph.setEdgeData(t.id,{paths:null,_destPaths:null})}),r&&r()}),_&&l.fit(g,l.getFitOptions(c))})):(v.forEach(function(t,e){l.graph.setNodeData(t.id,{x:c[e].x,y:c[e].y,_destPos:null,animation:!1})}),f?f.forEach(function(t,e){l.graph.setEdgeData(t.id,{paths:t.paths,_destPaths:null})}):m.forEach(function(t){l.graph.setEdgeData(t.id,{paths:null,_destPaths:null})}),_&&this.fit(null,this.getFitOptions(c)),r&&r())}}else this.graph.nodes.forEach(function(t){"x"in t||(t.x=Math.random()*l.render.gl.clientWidth),"y"in t||(t.y=Math.random()*l.render.gl.clientWidth)}),this.render.clearRenderCache()}}]),t}();x.layout=y.default,e.default=x},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(24),o=r(i),a=n(68),s=r(a),u=n(66),c=r(u),f=n(69),h=r(f),l=n(67),d=r(l),p=n(62),v=r(p),g=n(65),y=r(g);o.default.node=s.default,o.default.edge=c.default,o.default.nodeLabel=h.default,o.default.edgeLabel=d.default,o.default.bg=v.default,(0,y.default)(o.default),e.default=o.default},function(t,e,n){"use strict";function r(t,e){var n=t.getExtension(e);if(n){var r=a.exec(e)[1],i="_"+r;for(var o in n){var s=n[o],u="function"==typeof s,c=u?r:i,f=o;o.endsWith(c)&&(f=o.substring(0,o.length-c.length)),void 0!==t[f]?u||t[f]===s||console.warn(f,t[f],s,o):u?t[f]=function(t){return function(){return t.apply(n,arguments)}}(s):t[f]=s}}return n}function i(t){for(var e=0;e<o.length;++e)r(t,o[e])}Object.defineProperty(e,"__esModule",{value:!0}),e.addExtensionsToContext=i;var o=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","WEBGL_draw_buffers"],a=/^(.*?)_/},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o={textures:{create:"createTexture",delete:"deleteTexture"},buffers:{create:"createBuffer",delete:"deleteBuffer"},vertexArrays:{create:"createVertexArray",delete:"deleteVertexArray"},framebuffers:{create:"createFramebuffer",delete:"deleteFramebuffer"},programs:{create:"createProgram",delete:"deleteProgram"},shaders:{create:"createShader",delete:"deleteShader"}},a=function(){function t(e){var n=this;r(this,t),this.gl=e,this.clearFlag=!1;for(var i in o)o.hasOwnProperty(i)&&this.wrapCreator(i);this.clear=function(){if(!n.clearFlag){for(var t in o)o.hasOwnProperty(t)&&n.resetWrap(t);n.clearFlag=!0}}}return i(t,[{key:"wrapCreator",value:function(t){var e=o[t].create;this[t]=[],this["_"+e]=this.gl[e];var n=this;this.gl[e]=function(){var r=n["_"+e].apply(n.gl,arguments);return n[t].push(r),r}}},{key:"resetWrap",value:function(t){var e=this,n=o[t].create,r=o[t].delete;this[t].forEach(function(t){e.gl[r](t)}),this.gl[n]=this["_"+n],this[t]=[]}}]),t}();e.default=a},function(t,e,n){"use strict";function r(){return x||(w(i),x=E.now()+b)}function i(){x=0}function o(){this._call=this._time=this._next=null}function a(t,e,n){var r=new o;return r.restart(t,e,n),r}function s(){r(),++v;for(var t,e=d;e;)(t=x-e._time)>=0&&e._call.call(null,t),e=e._next;--v}function u(){x=(m=E.now())+b,v=g=0;try{s()}finally{v=0,f(),x=0}}function c(){var t=E.now(),e=t-m;e>_&&(b-=e,m=t)}function f(){for(var t,e,n=d,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:d=e);p=t,h(r)}function h(t){if(!v){g&&(g=clearTimeout(g));var e=t-x;e>24?(t<1/0&&(g=setTimeout(u,e)),y&&(y=clearInterval(y))):(y||(y=setInterval(c,_)),v=1,w(u))}}Object.defineProperty(e,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.now=r,e.Timer=o,e.default=a,e.timerFlush=s;var d,p,v=0,g=0,y=0,_=1e3,m=0,x=0,b=0,E="object"===("undefined"==typeof performance?"undefined":l(performance))&&performance.now?performance:Date,w="function"==typeof requestAnimationFrame?requestAnimationFrame:function(t){setTimeout(t,30)};o.prototype=a.prototype={constructor:o,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?r():+n)+(null==e?0:+e),this._next||p===this||(p?p._next=this:d=this,p=this),this._call=t,this._time=n,h()},stop:function(){this._call&&(this._call=null,this._time=1/0,h())}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(){function t(t){var e,n,r=m.cameraToGraphPos({x:t.cameraX,y:t.cameraY});n=p(r),n?m.emit("nodeClick",[n,t]):T.enableEdgeEvent&&(e=v(r))?m.emit("edgeClick",[e,t]):m.emit("stageClick",[t])}function e(t){function e(e){function a(){m.setMouseType(m.mouseType.DEFAULT),l&&document.removeEventListener("mousemove",l,!0),d&&document.removeEventListener("mouseup",d,!0),d=l=null,E=!1}var c=!1,f=n.x,h=n.y;e||m.emit("nodeMouseDown",[r,t]);var l=u(m.container,o(function(t){var n,o=m.cameraToGraphPos({x:t.cameraX,y:t.cameraY}),a=o.x-f,u=o.y-h;if(!(_(a)<s&&_(u)<s))if(e||c||(m.emit("nodeDragStart",[r,t]),c=!0),m.forceRender(),e?(m.camera.positionX-=a,m.camera.positionY-=u,m.setMouseType(m.mouseType.MOVE)):i?m.context.selection.data.nodes.forEach(function(t){n=m.context.graph.nodesIndex[t],m.graph.setNodeData(t,{x:n.x+a,y:n.y+u})}):m.graph.setNodeData(r.id,{x:r.x+a,y:r.y+u}),e){var l=m.cameraToGraphPos({x:t.cameraX,y:t.cameraY});f=l.x,h=l.y}else f=o.x,h=o.y})),d=u(m.container,o(function(t){!e&&c&&m.emit("nodeDragEnd",[r,t]),c&&(x=!1),c=!1,a()}));document.addEventListener("mousemove",l,!0),document.addEventListener("mouseup",d,!0)}if(c(),g(t)){x=!0,E=!0,w=t.cameraX,P=t.cameraY;var n=m.cameraToGraphPos({x:t.cameraX,y:t.cameraY}),r=p(n),i=!!r&&m.context.selection.isNodeSelected(r.id);e(!r)}}function n(t){if(!(x&&_(t.cameraX-w)<s&&_(t.cameraY-P)<s)&&(x&&(b=!0),!E&&m.config.enableOverEvent)){var e,n=m.cameraToGraphPos({x:t.cameraX,y:t.cameraY}),r=p(n);r&&r!==k.currentNode?(e=k.currentNode,k.currentNode=r,e&&m.emit("nodeOut",[e,t]),k.currentEdge&&(e=k.currentEdge,k.currentEdge=null,m.emit("edgeOut",[e,t])),m.emit("nodeOver",[r,t])):!r&&k.currentNode&&(e=k.currentNode,k.currentNode=null,m.emit("nodeOut",[e,t]));var i;!r&&T.enableEdgeEvent&&(i=v(n),i&&i!==k.currentEdge?(e=k.currentEdge,k.currentEdge=i,e&&m.emit("edgeOut",[e,t]),m.emit("edgeOver",[i,t])):!i&&k.currentEdge&&(e=k.currentEdge,k.currentEdge=null,m.emit("edgeOut",[e,t]))),r||i?m.setMouseType(m.mouseType.POINTER):m.setMouseType(m.mouseType.DEFAULT)}}function r(e){if(x&&!b&&g(e)&&t(e),y(e)){var n,r=m.cameraToGraphPos({x:e.cameraX,y:e.cameraY}),i=p(r);i?m.emit("nodeRightClick",[i,e]):T.enableEdgeEvent&&(n=v(r))?m.emit("edgeRightClick",[n,e]):m.emit("stageRightClick",[e])}x=!1,b=!1}function i(t){var e=void 0!==t.wheelDelta&&t.wheelDelta||void 0!==t.detail&&-t.detail;if(0!=e){m.forceRender();var n=m.config.zoomRatio;e>0?(m.zoomFromPosition(1/n,t.cameraX,t.cameraY),m.emit("zoom",[1/n,m.camera.scale,t])):(m.zoomFromPosition(n,t.cameraX,t.cameraY),m.emit("zoom",[n,m.camera.scale,t]))}}function o(t){return function(e){if(T.enableMouseEvent){var n=m.domToCameraPos({x:e.offsetX,y:e.offsetY});e.cameraX=n.x,e.cameraY=n.y,t(e)}}}function u(t,e){return function(n){var r=t.getBoundingClientRect(),i=Object.create(null);for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);i.offsetX=n.clientX-r.left,i.offsetY=n.clientY-r.top,e(i)}}function c(){function t(){document.onselectstart=e,document.removeEventListener("mouseup",t)}var e=document.onselectstart;document.onselectstart=function(){return!1},document.addEventListener("mouseup",t)}function f(t,e,n){var r,i,o=!1;return r=a.default.getDistance(t,e,n.x,n.y),i=n.size||T.defaultNodeSize,o=r<=i}function h(t,e,n){var r,i=!1,o=m.graph.nodesIndex[n.source],s=m.graph.nodesIndex[n.target];if(n.paths){var u=n.paths;if(a.default.inLine(t,e,o.x,o.y,u[0][0],u[0][1],(n.size||T.defaultEdgeSize)/2))return!0;for(var c=0;c<u.length-1;c++)if(a.default.inLine(t,e,u[c][0],u[c][1],u[c+1][0],u[c+1][1],(n.size||T.defaultEdgeSize)/2))return!0;if(a.default.inLine(t,e,u[u.length-1][0],u[u.length-1][1],s.x,s.y,(n.size||T.defaultEdgeSize)/2))return!0}else 0==n.curveCount?i=a.default.inLine(t,e,o.x,o.y,s.x,s.y,(n.size||T.defaultEdgeSize)/2):(r=a.default.getControlPos(o.x,o.y,s.x,s.y,n.curveCount,n.curveOrder,m.config.edgeCurveFactor),i=a.default.isPointOnQuadraticCurve(t,e,o.x,o.y,s.x,s.y,r[0],r[1],(n.size||T.defaultEdgeSize)/2));return i}function l(t,e,n){return m.context.customNodeCheck&&a.default.isFunction(m.context.customNodeCheck)?m.context.customNodeCheck(t,e,n,f):f(t,e,n)}function d(t,e,n){return m.context.customEdgeCheck&&a.default.isFunction(m.context.customEdgeCheck)?m.context.customEdgeCheck(t,e,n,h):h(t,e,n)}function p(t){var e,n=m.graph.nodes,r=null,i=m.context.selection.getNodes();m.renderCache.node;if(i.length>0)for(var o=i.length-1;o>=0;o--)if(e=i[o],!e.filter&&l(t.x,t.y,e)){r=e;break}if(!r&&n.length>0)for(var o=n.length-1;o>=0;o--)if(e=n[o],!e.filter&&l(t.x,t.y,e)){r=e;break}return r}function v(t){var e,n=m.graph.edges,r=null;m.renderCache.edge;if(n.length>0)for(var i=n.length-1;i>=0;i--)if(e=n[i],!e.filter&&d(t.x,t.y,e)){r=e;break}return r}function g(t){return t.which&&1==t.which||t.button&&0==t.button}function y(t){return t.which&&3==t.which||t.button&&2==t.button}function _(t){return Math.abs(t)}var m=this,x=!1,b=!1,E=!1,w=null,P=null,k={currentNode:null,currentEdge:null},T=m.context.config;m.context.overInfo=k;var A={mousemove:o(n),mousedown:o(e),mouseup:o(r),mousewheel:o(i),DOMMouseScroll:o(i)};for(var I in A)this.container.addEventListener(I,A[I],!1);A.click=o(t),this.trigger=function(t,e){A[t]&&A[t](e)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(1),a=r(o),s=1e-5},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(5),c=r(u),f=n(1),h=r(f),l=function(t){function e(t,n){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.context=t,r.canvas=n,r.ctx=r.canvas.getContext("2d"),r._mouseDownHandler=r.mouseDown.bind(r),r.canvas.addEventListener("mousedown",r._mouseDownHandler),r.flag=0,r.rect=null,r.path=null,r.data={edges:[],nodes:[]},r.initGraphEvent(),r}return a(e,t),s(e,[{key:"destroy",value:function(){this.context=null,this.canvas.removeEventListener("mousedown",this._mouseDownHandler),this.canvas.parentNode.removeChild(this.canvas),this.canvas=null,this.ctx=null,this.rect=null,this.path=null,this.data=null}},{key:"enable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.flag=t,this.canvas.style.display="block",this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"render",value:function(){var t=this.ctx,e=this.context.config;if(t.clearRect(0,0,this.canvas.width,this.canvas.height),t.fillStyle=e.selectionFillStyle,t.strokeStyle=e.selectionStrokeStyle,t.beginPath(),0==this.flag){var n=this.rect;t.rect(n.x,n.y,n.w,n.h)}else if(1==this.flag){var r=this.path[0];t.moveTo(r.x,r.y);for(var i=1;i<this.path.length;i++)t.lineTo(this.path[i].x,this.path[i].y)}t.closePath(),t.fill(),t.stroke()}},{key:"disable",value:function(){this.canvas.style.display="none",this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"initGraphEvent",value:function(){var t,e,n=this;this.context.graph.on("remove",function(r,i){if(e="node"==r?"nodes":"edges",h.default.isArray(i)&&i.length>1)t={},i.forEach(function(e){t[e]=!0}),n.data[e]=n.data[e].filter(function(e){return!t[e]});else{i=h.default.isArray(i)?i[0]:i;for(var o=0;o<n.data[e].length;o++)if(n.data[e][o]==i){n.data[e].splice(o,1);break}}}),this.context.graph.on("reset",function(){n.data={edges:[],nodes:[]}})}},{key:"mouseDown",value:function(t){function e(t){0==r.flag?(r.rect.w=t.offsetX-r.rect.x,r.rect.h=t.offsetY-r.rect.y):1==r.flag&&r.path.push({x:t.offsetX,y:t.offsetY}),r.render()}function n(t){e(t),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n);var i=r.filterNodes(r.ctx);r.disable(),r.selectNodes(i),r.emit("selectEnd",[r])}var r=this;0==this.flag?(this.rect={x:0,y:0,w:0,h:0},this.rect.x=t.offsetX,this.rect.y=t.offsetY):1==this.flag&&(this.path=[],this.path.push({x:t.offsetX,y:t.offsetY})),r.emit("selectStart",[r]),document.addEventListener("mousemove",e),document.addEventListener("mouseup",n)}},{key:"selectNodes",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this;h.default.isArray(t)||(t=[t]),e?t.forEach(function(t){r.context.graph.setNodeData(t,{selected:!0}),r.data.nodes.push(t)}):(r.data.nodes.forEach(function(t){r.context.graph.nodesIndex[t]&&r.context.graph.setNodeData(t,{selected:!1})}),t.forEach(function(t){r.context.graph.setNodeData(t,{selected:!0})}),r.data.nodes=t),n&&r.emit("select",["node",r.getNodes()])}},{key:"selectEdges",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this;h.default.isArray(t)||(t=[t]),e?t.forEach(function(t){r.context.graph.setEdgeData(t,{selected:!0}),r.data.edges.push(t)}):(r.data.edges.forEach(function(t){r.context.graph.edgesIndex[t]&&r.context.graph.setEdgeData(t,{selected:!1})}),t.forEach(function(t){r.context.graph.setEdgeData(t,{selected:!0})}),r.data.edges=t),n&&r.emit("select",["edge",r.getEdges()])}},{key:"unSelectNodes",value:function(t){if(0!=this.data.nodes.length&&t){var e=this;h.default.isArray(t)||(t=[t]);var n={};t.forEach(function(t){n[t]=!0});var r=[];this.data.nodes.forEach(function(t){n[t]?e.context.graph.setNodeData(t,{selected:!1}):r.push(t)}),this.data.nodes=r,e.emit("select",["node",e.getNodes()])}}},{key:"unSelectEdges",value:function(t){if(0!=this.data.edges.length&&t){var e=this;h.default.isArray(t)||(t=[t]);var n={};t.forEach(function(t){n[t]=!0});var r=[];this.data.edges.forEach(function(t){n[t]?e.context.graph.setEdgeData(t,{selected:!1}):r.push(t)}),this.data.edges=r,e.emit("select",["edge",e.getEdges()])}}},{key:"getNodes",value:function(){var t=this;return this.data.nodes.map(function(e){return t.context.graph.nodesIndex[e]})}},{key:"getEdges",value:function(){var t=this;return this.data.edges.map(function(e){return t.context.graph.edgesIndex[e]})}},{key:"isNodeSelected",value:function(t){for(var e=this.data.nodes,n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}},{key:"isEdgeSelected",value:function(t){for(var e=this.data.edges,n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}},{key:"filterNodes",value:function(t){var e,n=this.context.graph.nodes,r=[];return n.forEach(function(n){e=this.context.render.graphToDomPos({x:n.x,y:n.y}),t.isPointInPath(e.x,e.y)&&r.push(n.id)}.bind(this)),r}},{key:"delete",value:function(t){var e=this,n="node"===t,r="edge"===t;if(t||(r=!0,n=!0),n){var i=this.data.nodes;this.data.nodes=[],i.forEach(function(t){e.context.graph.removeNode(t)})}if(r){var o=this.data.edges;this.data.edges=[],o.forEach(function(t){e.context.graph.removeEdge(t)})}}}]),e}(c.default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={backgroundColor:"#ffffff",maxNodeLineLength:60,defaultNodeSize:10,defaultNodeColor:"#607D8B",defaultNodeIconColor:"#ffffff",defaultNodeLabelColor:"#73838b",defaultNodeLabelBgColor:"rgba(0,0,0,0)",defaultEdgeSize:1.6,defaultEdgeColor:"rgba(100,100,100,0.75)",defaultEdgeLabelColor:"#73838b",defaultEdgeLabelBgColor:"rgba(0,0,0,0)",edgeCurveFactor:20,zoomRatio:1.2,zoomMin:.01,zoomMax:100,textureIconWidth:1024,textureIconHeight:1024,textureIconFontFamily:"FontAwesome",textureTextFontFamily:"Arial",textureTextWidth:1024,textureTextHeight:1024,enableMouseEvent:!0,enableOverEvent:!0,enableEdgeEvent:!0,enableSelectEdge:!1,nodeSelectBorderSize:4,nodeSelectColor:"#ff0000",edgeSelectColor:"#ff0000",selectionFillStyle:"rgba(58, 75, 89, 0.3)",selectionStrokeStyle:"#4b7598"}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(){this.nodes=null,this.posSet=null,this.depthPosSet=null,this.drawnBiComps=null,this.bc=null,this.nodeHeights={},this.node2BiComp={},this.width=s.width}function o(t,e,n){t.x=e,t.y=n}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=(r(a),{width:40}),u=i.prototype;u.layout=function(t,e,n,r){if(n=n||{},n.width&&(this.width=n.width),this.init(t,e),this.posSet=new Array(this.nodes.length),this.depthPosSet=new Array(this.nodes.length),this.bc=this.createBicconnects(),!this.bc)return new Error("有孤立节点");this.__layout(this.bc);var i=this.nodes.map(function(t){return{x:t.x||0,y:t.y||0}});return i},u.init=function(t,e){var n,r=t,i=e,o=[],a={};r.forEach(function(t,e){n={id:t.id,_index:e,links:[]},o.push(n),a[n.id]=n});var s,u;i.forEach(function(t,e){s=a[t.source],u=a[t.target],s.links=s.links||[],s.links.push(u._index),u.links=u.links||[],u.links.push(s._index)}),this.nodes=o},u.createBicconnects=function(){function t(f){u++,n[f]=1,i[f]=r[f]=++c;for(var h,l=e[f].links,d=0;d<l.length;d++)if(h=l[d],0==n[h]){if(a[h]=f,o.push({source:f,target:h}),t(h),i[f]=Math.min(i[f],i[h]),a[f]==-1&&e[f].links.length>=2||i[h]>=r[f]){var p=[],v={};for(p.push(o[o.length-1].target),v[o[o.length-1].target]=!0;o[o.length-1].source!=f;){var g=o.pop();v[g.source]||(p.push(g.source),v[g.source]=!0),v[g.target]||(p.push(g.target),v[g.target]=!0)}o.pop(),v[f]||(p.push(f),v[f]=!0),s.push(p)}}else h!=a[f]&&(i[f]=Math.min(i[f],i[h]))}var e=this.nodes,n=new Array(this.nodes.length),r=new Array(this.nodes.length),i=new Array(this.nodes.length),o=[],a=new Array(this.nodes.length),s=[],u=0;a[0]=-1;for(var c=0,f=0;f<this.nodes.length;f++)n[f]=0;return t(0),u==e.length?s:null},u.__layout=function(t){var e=-1,n=null,r=this.nodes;t.forEach(function(t,r){t.length>e&&(e=t.length,n=r)}),t[n].forEach(function(t){r[t].delete=!0});for(var i=0;i<t.length;i++)if(t[i].length>3)for(var o=0;o<t[i].length;o++)this.node2BiComp[t[i][o]]=i;var a=t[n];this.drawnBiComps=new Array(a.length),this.drawnBiComps[n]=!0;var s=a.length,u=this.width*s/(2*Math.PI),c=2*Math.PI/s,f=0,h=0|u,l=0|u;a=this.sortInnerCircle(a);for(var i=0;i<a.length;i++)r[a[i]].test=i,r[a[i]].x=h+Math.cos(f)*u,r[a[i]].y=l-Math.sin(f)*u,this.posSet[a[i]]=!0,f+=c;this.SetOuterCircle(n,u,h,l,-1)},u.sortInnerCircle=function(t){for(var e=[],n=[],r={},i=0;i<t.length;i++)r[t[i]]=!0;for(var i=0;i<t.length;i++){var o=this.NoOfChildren(t[i],r);
o>4?e.push(t[i]):n.push(t[i])}var a,s,u=new Array(t.length),c=e.length,f=n.length;0==c?(a=f,s=0):0==f?(s=c,a=0):c>f?(a=1,s=c/f|0):(s=1,a=f/c|0);var i,h,l,d=0;for(h=0,l=0;h<e.length&&l<n.length;){for(i=0;i<s&&h<e.length;i++)u[d++]=e[h++];for(i=0;i<a&&l<n.length;i++)u[d++]=n[l++]}for(;h<e.length;)u[d++]=e[h++];for(;l<n.length;)u[d++]=n[l++];return u},u.NoOfChildren=function(t,e){for(var n=0,r=this.nodes,i=r[t].links,o=0;o<i.length;o++){var a=i[o];this.posSet[a]||e[a]||n++}return n>7&&(n=7),n},u.SetOuterCircle=function(t,e,n,r,i){for(var o,a=this.nodes,s=0,u=0,c={},f=0;f<this.bc[t].length;f++){o=a[this.bc[t][f]].links;for(var h=0;h<o.length;h++){var l=o[h];this.posSet[l]||(s+=this.NoOfChildren(l,c)+1,c[l]=!0,u++)}}var d=1.5*e,p=2*Math.PI*d/32|0,v=2*Math.PI/p;p<1.2*s?(d=38.4*s/(2*Math.PI),v=2*Math.PI/(1.2*s),s*=1.2):s=p,s>10&&i!=-1&&(s+=5),s|=0;for(var g=new Array(s),y=new Array(s),f=0;f<g.length;f++)g[f]=-1,y[f]=-1;var _,m,x,b,E;if(E=2*Math.PI/this.bc[t].length,i!=-1){_=a[i].x,m=a[i].y,x=Math.asin((r-m)/Math.sqrt((_-n)*(_-n)+(m-r)*(m-r))),b=Math.acos((_-n)/Math.sqrt((_-n)*(_-n)+(m-r)*(m-r))),b>Math.PI/2&&(x=Math.PI-x),x<0&&(x+=2*Math.PI);var w=(x/v|0)%g.length;g[w]=x/E|0,y[w]=-2,g.length>10&&(g[(w+1)%g.length]=x/E|0,g[(w+2)%g.length]=0|x/E,g[(w-1+g.length)%g.length]=0|x/E,g[(w-2+g.length)%g.length]=0|x/E,y[(w+1)%y.length]=-2,y[(w+2)%y.length]=-2,y[(w-1+y.length)%y.length]=-2,y[(w-2+y.length)%y.length]=-2)}for(var P={},f=0;f<this.bc[t].length;f++){o=a[this.bc[t][f]].links;for(var k,T=0,h=0;h<o.length;h++)k=o[h],this.posSet[k]||(T+=this.NoOfChildren(k,P)+1,P[k]=!0);if(0!=T){_=a[this.bc[t][f]].x,m=a[this.bc[t][f]].y,x=Math.asin((r-m)/Math.sqrt((_-n)*(_-n)+(m-r)*(m-r))),b=Math.acos((_-n)/Math.sqrt((_-n)*(_-n)+(m-r)*(m-r))),b>Math.PI/2&&(x=Math.PI-x),x<0&&(x+=2*Math.PI);var A=this.BestFreePositionsForAll(0|x/v-T/2,g,y,T,0|x/E,n,r,v,d,this.bc[t].length),I=A*v;if(!(I<0))for(var S=0;S<o.length;S++)if(k=o[S],!this.posSet[k]){this.posSet[k]=!0;for(var C=this.NoOfChildren(k,P),h=0;h<C/2;h++)y[A%y.length]=-3,g[A%y.length]=0|x/E,A++,I+=v,I>2*Math.PI&&(I-=2*Math.PI);a[k].x=n+Math.cos(I)*d,a[k].y=r-Math.sin(I)*d,y[A%y.length]=k,g[A%y.length]=0|x/E,A++,I+=v,I>2*Math.PI&&(I-=2*Math.PI);for(var h=0;h<C/2;h++)y[A%y.length]=-3,g[A%y.length]=0|x/E,A++,I+=v,I>2*Math.PI&&(I-=2*Math.PI)}}}for(var f=0;f<this.bc[t].length;f++){o=a[this.bc[t][f]].links;for(var k,S=0;S<o.length;S++)if(k=o[S],P[k]){_=a[k].x,m=a[k].y,x=Math.asin((r-m)/Math.sqrt((_-n)*(_-n)+(m-r)*(m-r))),b=Math.acos((_-n)/Math.sqrt((_-n)*(_-n)+(m-r)*(m-r))),b>Math.PI/2&&(x=Math.PI-x),x<0&&(x+=2*Math.PI);for(var h=0;h<this.posSet.length;h++)this.depthPosSet[h]=this.posSet[h];this.EachNodeHeight(k),this.DFSSetPos(k,x,d-e)}}},u.BestFreePositionsForAll=function(t,e,n,r,i,o,a,s,u,c){var f=t,h=this.nodes;t<0&&(f+=e.length);for(var l=0,d=0,p=-1,v=!1,g=!1,y=!1,_=0,m=0,x=0,b=0;!(v||y&&g);){if(b++,b>e.length)return 0;for(l=f;l<f+r&&e[l%e.length]==-1;l++);if(l<f+r)if(e[l%e.length]>i&&e[l%e.length]-i<.7*c||i-e[l%e.length]>.7*c)d=(l-f+e.length)%e.length,p=f,f-=r-d,f<0&&(f+=e.length),g=!0;else{_++;var E=l-f;E>m&&(m=E,x=f),_>3*e.length?(f=x,v=!0):(f=(l+1)%e.length,y=!0)}else v=!0}if(y&&g){l=p-1;var w=l-1,P=0,k=(l%e.length+e.length)%e.length;for((e[k]>i&&e[k]-i<.7*c||i-e[k]>.7*c)&&(w--,l--);P<r-d;){if(e[(w+e.length)%e.length]==-1){if(n[(w+e.length)%e.length]==-2)return-1;for(var T=w;T<l-P;T++)n[(T+1+e.length)%e.length]>0&&(h[n[(T+1+e.length)%e.length]].x=o+Math.cos(s*T)*u,h[n[(T+1+e.length)%e.length]].y=a-Math.sin(s*T)*u),n[(T+e.length)%e.length]=n[(T+1+e.length)%e.length],e[(T+e.length)%e.length]=e[(T+1+e.length)%e.length];P++}w--}f=(l-P+1+n.length)%n.length}return f},u.EachNodeHeight=function(t){for(var e,n=this.nodes,r=n[t].links,i=0,o={},a=0;a<r.length;a++)e=r[a],this.depthPosSet[e]||o[e]||(this.depthPosSet[e]=!0,o[e]=!0);for(var a=0;a<r.length;a++)e=r[a],o[e]&&(i+=this.EachNodeHeight(e));return this.nodeHeights[t]=i,i+1},u.DFSSetPos=function(t,e,n){var r=this.node2BiComp[t],i=this.nodes;if(void 0==r||this.drawnBiComps[r]){var a,s=i[t].links,u=e+Math.PI/2;u>2*Math.PI&&(u-=2*Math.PI);for(var c=0,f=1e3,h=1e3,l=-1,d=-1,p=-2,v=-3,g={},y=0;y<s.length;y++)a=s[y],this.posSet[a]||g[a]||(c++,g[a]=!0,this.nodeHeights[a]<f?(h=f,p=d,f=this.nodeHeights[a],d=a):this.nodeHeights[a]<h&&(h=this.nodeHeights[a],p=a),this.nodeHeights[a]>=l&&(l=this.nodeHeights[a],v=a));if(0==c)return;var _=Math.PI/(c+1);u-=_,u<0&&(u+=2*Math.PI);var m=u;c>2&&(_=2*Math.PI/c,u=e+Math.PI-3*_/2,u>2*Math.PI&&(u-=2*Math.PI),m=e+Math.PI-_/2,m>2*Math.PI&&(m-=2*Math.PI)),s=i[t].links;var x,b=72;this.width*c/(2*Math.PI)>b&&(b=this.width*c/(2*Math.PI)),x=b;var E=100,w=i[t].x,P=i[t].y;c>2&&(i[t].x=w+Math.cos(e)*b*((h+1)%100),i[t].y=P-Math.sin(e)*b*((h+1)%100),w=i[t].x,P=i[t].y,o(i[d],w+Math.cos(m)*b,P-Math.sin(m)*b),i[d].test="min1",o(i[p],w+Math.cos(m+_)*b,P-Math.sin(m+_)*b),i[p].test="min2",this.nodeHeights[v]>8&&(b=256),o(i[v],w+Math.cos(m-c/2*_)*b,P-Math.sin(m-c/2*_)*b),i[v].test="maxId"),g={};for(var y=0;y<s.length;y++)a=s[y],this.posSet[a]||g[a]||(b=this.nodeHeights[a]>8?256:x,this.posSet[a]=!0,g[a]=!0,(a!=d&&a!=p&&a!=v||c<=2)&&(o(i[a],w+Math.cos(u)*b,P-Math.sin(u)*b),u-=_,u<0&&(u+=2*Math.PI),(Math.abs(u-(m-c/2*_))<1e-4||Math.abs(u-(m-c/2*_+2*Math.PI))<1e-4)&&c>2&&(u-=_,u<0&&(u+=2*Math.PI))));s=i[t].links,c>2&&(this.DFSSetPos(d,m,n*Math.sin(_/2)),this.DFSSetPos(p,m+_,n*Math.sin(_/2)),this.DFSSetPos(v,m-c/2*_,n*Math.sin(_/2)),E=m,m-=_);for(var y=0;y<s.length;y++)a=s[y],g[a]&&(a!=d&&a!=p&&a!=v||c<=2)&&(this.DFSSetPos(a,m,n*Math.sin(_/2)),m-=_,(m==E-c/2*_||m==E-c/2*_+2*Math.PI)&&c>2&&(u-=_),m<0&&(m+=2*Math.PI))}else{var k=r,T=i[t].x,A=i[t].y,I=this.width*this.bc[k].length/(2*Math.PI),_=2*Math.PI/this.bc[k].length,S=e-Math.PI-_;S<0&&(S+=2*Math.PI),T+=Math.cos(e)*I*4,A-=Math.sin(e)*I*4,this.drawnBiComps[k]=!0,this.bc[k]=this.sortInnerCircle(this.bc[k]);for(var C=!1,M=0;M<this.bc[k].length;M++)this.posSet[this.bc[k][M]]||(i[this.bc[k][M]].x=T+Math.cos(S)*I,i[this.bc[k][M]].y=A-Math.sin(S)*I,this.posSet[this.bc[k][M]]=!0,C=!0,S-=_,S<0&&(S+=2*Math.PI));C&&(i[t].x+=3*Math.cos(e)*I,i[t].y-=3*Math.sin(e)*I,this.SetOuterCircle(k,I,T,A,t))}},e.default=i},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(1),u=i(s),c=n(152),f=r(c),h={BBox:[1e3,1e3],linkDistance:50,initIterations:20,userIterations:0,allIterations:2},l=function(){function t(){o(this,t)}return a(t,[{key:"layout",value:function(t,e,n){n=n||{},this.option=u.default.extend(n,h),this.cola=(new f.Layout).convergenceThreshold(1e-4).size(this.option.BBox);var r=this._init(t,e);return this.cola.nodes(r.nodes).links(r.edges).symmetricDiffLinkLengths(this.option.linkDistance).start(this.option.initIterations,this.option.userIterations,this.option.allIterations,0,!1),r.nodes.map(function(t){return{x:t.x,y:t.y}})}},{key:"_init",value:function(t,e){var n=[],r=[],i={},o={};return t.forEach(function(t,e){n.push({width:2*t.size||100,height:2*t.size||100}),i[t.id]=e}),e.forEach(function(t,e){if(i.hasOwnProperty(t.source)&&i.hasOwnProperty(t.target)){var n=t.source+"&&{"+t.target+"}";if(o[n])return;r.push({source:i[t.source],target:i[t.target]}),o[n]=!0}}),{nodes:n,edges:r}}}]),t}();e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),s=r(a),u=n(101),c=r(u),f={rankdir:"TB",ranksep:200,scale:1.5,acyclicer:"greedy",ranker:"tight-tree"},h=function(){function t(){i(this,t)}return o(t,[{key:"layout",value:function(t,e,n){var r=new c.default.graphlib.Graph,i=this.option=s.default.extend(n||{},f);r.setGraph(this.option),r.setDefaultEdgeLabel(function(){return{}}),t.forEach(function(t){r.setNode("node#"+t.id,{width:(t.size||50)*i.scale,height:(t.size||50)*i.scale})}),e.forEach(function(t){r.setEdge("node#"+t.source,"node#"+t.target,{id:t.id})}),c.default.layout(r);var o=r.nodes().map(function(t){var e=r.node(t);return{x:e.x,y:e.y*-1}}),a=r.edges().map(function(t){var e=r.edge(t),n=e.points,i=[];return n.forEach(function(t,e){0!=e&&e!=n.length-1&&i.push([t.x,t.y*-1])}),{paths:i,id:e.id}});return{nodes:o,edges:a}}},{key:"filterEdge",value:function(t){var e={},n=[];return t.forEach(function(t){var r="{"+t.source+"&&"+t.target+"}";e[r]||(n.push(t),e[r]=!0)}),n}}]),t}();e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),s=r(a),u={BBox:[1e3,1e3],flowAxis:"y",flowSeparation:60,linkDistance:30,initIterations:10,userIterations:0,allIterations:2},c=function(){function t(){i(this,t)}return o(t,[{key:"layout",value:function(t,e,n){if(!cola||!cola.Layout)throw"please add cola lib first";n=n||{},this.option=s.default.extend(n,u),this.cola=(new cola.Layout).convergenceThreshold(1e-4).size(this.option.BBox);var r=this._init(t,e);return this.cola.nodes(r.nodes).links(r.edges).flowLayout(this.option.flowAxis,this.option.flowSeparation).symmetricDiffLinkLengths(this.option.linkDistance).start(this.option.initIterations,this.option.userIterations,this.option.allIterations,0,!1),r.nodes.map(function(t){return{x:t.x,y:t.y*-1}})}},{key:"_init",value:function(t,e){var n=[],r=[],i={};return t.forEach(function(t,e){n.push({width:100,height:100}),i[t.id]=e}),e.forEach(function(t,e){r.push({source:i[t.source],target:i[t.target]})}),{nodes:n,edges:r}}},{key:"_filterEdge",value:function(t,e){function n(t){i[t.id]=!0;var e,o=[],a=graph.inEdgesIndex[t.id];a&&a.length>0&&a.forEach(function(t){e=graph.edgesIndex[t],i[e.source]||(r.push(e),o.push(graph.nodesIndex[e.source]))}),a=graph.outEdgesIndex[t.id],a&&a.length>0&&a.forEach(function(t){e=graph.edgesIndex[t],i[e.target]||(r.push(e),o.push(graph.nodesIndex[e.target]))}),o.forEach(function(t){n(t)})}var r=[],i={},o=t[0];return n(o),r}}]),t}();e.default=c},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){return t.id}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),c=i(u),f=n(77),h=r(f),l={forceManyBody:-200,linkLength:40,linkStrength:1,forceCollide:30,iterations:100},d=function(){function t(){o(this,t)}return s(t,[{key:"layout",value:function(t,e,n){this.option=c.default.extend(n||{},l);var r=this,i=this._init(t,e);this.simulation=h.forceSimulation(i.nodes).force("charge",h.forceManyBody().strength(this.option.forceManyBody)).force("link",h.forceLink(i.edges).id(a).strength(this.option.linkStrength).distance(function(t){var e=Math.min(t.source.edgeN,t.target.edgeN),n=t.source.edgeN+t.target.edgeN,i=3;return e<i?(Math.sqrt(n)+.5*Math.random())*r.option.linkLength:n/i*r.option.linkLength})).force("collide",h.forceCollide(this.option.forceCollide)).force("center",h.forceCenter()),this.simulation.stop();for(var o=this.option.iterations;o--;)this.simulation.tick();return i.nodes.map(function(t){return{x:t.x,y:t.y}})}},{key:"_init",value:function(t,e){var n=[],r=[],i={},o={};return t.forEach(function(t,e){var r={id:t.id,edgeN:0};t.hasOwnProperty("fx")&&(r.fx=t.fx),t.hasOwnProperty("fy")&&(r.fy=t.fy),n.push(r),i[r.id]=r}),e.forEach(function(t,e){var n=t.source+"&&"+t.target;o[n]||(r.push({source:t.source,target:t.target}),i[t.source].edgeN++,i[t.target].edgeN++,o[n]=!0)}),{nodes:n,edges:r}}}]),t}();e.default=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){r(this,t)}return i(t,[{key:"setUp",value:function(e,n,r){this.config=r,this.iterCount=this.config.iterations,this.nodes=e,this.edges=n,this.config=r;var i=e.length;this.nodesCount=i;var o=n.length;this.config.area=this.config.autoArea?i*i:this.config.area,this.maxDisplace=Math.sqrt(this.config.area)/10,this.k_2=this.config.area/(1+i)*this.config.forceFactor,this.k=Math.sqrt(this.k_2);var a=i+parseInt((2*o+3)/4);this.textureSize=a,this.gl=t.getContext(a,1);var s=this.buildTextureData(e,n,i,o);this.texture_input=this.makeSizedTexture(this.gl.canvas.width,this.gl.canvas.height,this.gl.FLOAT,s),this.texture_output=this.makeSizedTexture(this.gl.canvas.width,this.gl.canvas.height,this.gl.FLOAT,s),this.createProgram(),this.attachFrameBuffer(this.texture_output)}},{key:"layou",value:function(t,e,n){this.setUp(t,e,n),this.running=!0;var r=this.gl;for(r.viewport(0,0,r.canvas.width,r.canvas.height),r.useProgram(this.program);this.iterCount--;){var i=this.texture_input;this.texture_input=this.texture_output,this.texture_output=i,this.render(this.texture_input,this.texture_output)}var o=this.getNodeData();return o}},{key:"render",value:function(t,e){var n=this.gl;this.gpgpUtility,this.attachFrameBuffer(e);this.getStandardVertices(),n.vertexAttribPointer(this.positionHandle,3,n.FLOAT,n.FALSE,20,0),n.vertexAttribPointer(this.textureCoordHandle,2,n.FLOAT,n.FALSE,20,12),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t),n.uniform1i(this.textureHandle,0),n.drawArrays(n.TRIANGLE_STRIP,0,4)}},{key:"getNodeData",value:function(){var t=this.nodes,e=this.gl,n=t.length,r=new Float32Array(4*n);e.readPixels(0,0,n,1,e.RGBA,e.FLOAT,r);for(var i=[],o=0;o<n;++o)i.push({x:r[4*o],y:r[4*o+1]});return i}},{key:"buildTextureData",value:function(t,e,n,r){for(var i=[],o=[],a={},s=0;s<n;s++){var u=t[s];a[u.id]=s,i.push(u.x),i.push(u.y),i.push(0),i.push(0),o.push([])}for(var s=0;s<r;s++){var c=e[s];o[a[c.source]].push(a[c.target]),o[a[c.target]].push(a[c.source])}for(this.maxEdgePerVetex=0,s=0;s<n;s++){var f=i.length,h=o[s],l=h.length;i[4*s+2]=f,i[4*s+3]=h.length,this.maxEdgePerVetex=Math.max(this.maxEdgePerVetex,h.length);for(var d=0;d<l;++d){var p=h[d];i.push(+p)}}for(;i.length%4!=0;)i.push(0);return new Float32Array(i)}},{key:"makeSizedTexture",value:function(t,e,n,r){var i,o=this.gl;return i=o.createTexture(),o.bindTexture(o.TEXTURE_2D,i),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,t,e,0,o.RGBA,n,r),o.bindTexture(o.TEXTURE_2D,null),i}},{key:"createProgram",value:function(){var t=this.gl,e="\n            #ifdef GL_FRAGMENT_PRECISION_HIGH\n            precision highp float;\n            #else\n            precision mediump float;\n            #endif\n            uniform sampler2D m;\n            varying vec2 vTextureCoord;\n            void main()\n            {\n                float dx = 0.0, dy = 0.0;\n                int i = int(floor(vTextureCoord.s * float("+this.textureSize+") + 0.5));\n            \n                vec4 node_i = texture2D(m, vec2(vTextureCoord.s, 1));\n            \n                gl_FragColor = node_i;\n                //gl_FragColor.r = float(i);\n                //return;\n            \n                if (i > "+this.nodesCount+") return;\n            \n                for (int j = 0; j < "+this.nodesCount.toString()+"; j++) {\n                if (i != j + 1) {\n                    vec4 node_j = texture2D(m, vec2((float(j) + 0.5) / float("+this.textureSize+") , 1));\n            \n                    float xDist = node_i.r - node_j.r;\n                    float yDist = node_i.g - node_j.g;\n                    float dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;\n            \n                    if (dist > 0.0) {\n                    float repulsiveF = "+this.k_2.toString()+" / dist;\n                    dx += xDist / dist * repulsiveF;\n                    dy += yDist / dist * repulsiveF;\n                    }\n                }\n                }\n            \n                int arr_offset = int(floor(node_i.b + 0.5));\n                int length = int(floor(node_i.a + 0.5));\n                vec4 node_buffer;\n                for (int p = 0; p < "+String(this.maxEdgePerVetex)+"; p++) {\n                if (p >= length) break;\n                int arr_idx = arr_offset + p;\n                // when arr_idx % 4 == 0 update node_idx_buffer\n                int buf_offset = arr_idx - arr_idx / 4 * 4;\n                if (p == 0 || buf_offset == 0) {\n                    node_buffer = texture2D(m, vec2((float(arr_idx / 4) + 0.5) /\n                                                        float("+this.textureSize+") , 1));\n                }\n                float float_j = buf_offset == 0 ? node_buffer.r :\n                                buf_offset == 1 ? node_buffer.g :\n                                buf_offset == 2 ? node_buffer.b :\n                                                    node_buffer.a;\n            \n                vec4 node_j = texture2D(m, vec2((float_j + 0.5) /\n                                                float("+this.textureSize+"), 1));\n                float xDist = node_i.r - node_j.r;\n                float yDist = node_i.g - node_j.g;\n                float dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;\n                float attractiveF = dist * dist / "+this.k+";\n                if (dist > 0.0) {\n                    dx -= xDist / dist * attractiveF;\n                    dy -= yDist / dist * attractiveF;\n                }\n                }\n            \n                // Gravity\n                float d = sqrt(node_i.r * node_i.r + node_i.g * node_i.g);\n                float gf = "+String(.01*this.config.gravity)+" * d;\n                dx -= gf * node_i.r / d;\n                dy -= gf * node_i.g / d;\n            \n                // Speed\n                dx *= "+String(this.config.speed)+";\n                dy *= "+String(this.config.speed)+";\n            \n                // Apply computed displacement\n                float dist = sqrt(dx * dx + dy * dy);\n                if (dist > 0.0) {\n                float limitedDist = min(float("+String(this.maxDisplace*this.config.speed)+"), dist);\n                gl_FragColor.r += dx / dist * limitedDist;\n                gl_FragColor.g += dy / dist * limitedDist;\n                }\n            }\n            ",n=this.createForceProgram(null,e);this.positionHandle=t.getAttribLocation(n,"position"),t.enableVertexAttribArray(this.positionHandle),this.textureCoordHandle=t.getAttribLocation(n,"textureCoord"),t.enableVertexAttribArray(this.textureCoordHandle),this.textureHandle=t.getUniformLocation(n,"texture"),this.program=n}},{key:"compileShader",value:function(t,e){var n=this.gl,r=n.createShader(e);n.shaderSource(r,t),n.compileShader(r);var i=n.getShaderParameter(r,n.COMPILE_STATUS);if(!i)throw"Shader compile failed with:"+n.getShaderInfoLog(r);return r}},{key:"createForceProgram",value:function(t,e){var n,r,i,o=this.gl;return r=o.createProgram(),i="string"!=typeof t?this.getStandardVertexShader():this.compileShader(t,o.VERTEX_SHADER),n=this.compileShader(e,o.FRAGMENT_SHADER),o.attachShader(r,i),o.attachShader(r,n),o.linkProgram(r),i!==this.standardVertexShader&&o.deleteShader(i),o.deleteShader(n),r}},{key:"getStandardVertexShader",value:function(){var t,e=this.gl;return this.standardVertexShader||(t="attribute vec3 position;attribute vec2 textureCoord;varying highp vec2 vTextureCoord;void main(){  gl_Position = vec4(position, 1.0);  vTextureCoord = textureCoord;}",this.standardVertexShader=this.compileShader(t,e.VERTEX_SHADER)),this.standardVertexShader}},{key:"getStandardVertices",value:function(){var t=this.gl;return this.standardVertices?t.bindBuffer(t.ARRAY_BUFFER,this.standardVertices):(this.standardVertices=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.standardVertices),t.bufferData(t.ARRAY_BUFFER,this.getStandardGeometry(),t.STATIC_DRAW)),this.standardVertices}},{key:"getStandardGeometry",value:function(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}},{key:"attachFrameBuffer",value:function(t){var e,n=this.gl;return e=n.createFramebuffer(),n.bindFramebuffer(n.FRAMEBUFFER,e),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),e}}],[{key:"getContext",value:function(e,n){if(!t.canvas){var r={premultipliedAlpha:!1};t.canvas=document.createElement("canvas"),t.gl=t.canvas.getContext("webgl",r)||t.canvas.getContext("experimental-webgl",r),t.gl.getExtension("OES_texture_float")}return t.canvas.width=e,t.canvas.height=n,t.gl}}]),t}();o.gl=null,o.canvas=null,e.default=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),s=r(a),u=n(54),c=r(u),f={autoArea:!0,area:1,gravity:.2,forceFactor:1,speed:.2,iterations:100},h=function(){function t(){i(this,t)}return o(t,[{key:"layout",value:function(t,e,n){this.option=s.default.extend(n,f),console.time("GPULayout");var r=new c.default,i=r.layou(t,e,this.option);return console.timeEnd("GPULayout"),i}}]),t}();e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),s=r(a),u={startX:0,startY:0,offsetX:50,offsetY:50},c=function(){function t(){i(this,t)}return o(t,[{key:"layout",value:function(t,e,n){var r=[];this.option=s.default.extend(n||{},u);var i,o,a=this.option.offsetX,c=this.option.offsetY,f=(0|Math.sqrt(t.length))+1,h=this.option.startX,l=this.option.startY;return t.forEach(function(t,e){i=e%f|0,o=e/f|0,r.push({x:i*a+h,y:o*c+l})}),r}}]),t}();e.default=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(49),o=r(i),a=n(50),s=r(a),u=n(52),c=(r(u),n(51)),f=r(c),h=n(53),l=r(h),d=n(56),p=r(d),v=n(55),g=r(v);e.default={circular:o.default,d3force:l.default,cola:s.default,dagre:f.default,grid:p.default,gpuforce:g.default}},function(t,e,n){"use strict";function r(t,e,n,r,i){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.radius=n||8;var o=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=t+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.d=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Int16Array(o),this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function i(t,e,n,r,i,a,s){for(var u=0;u<e;u++){for(var c=0;c<n;c++)r[c]=t[c*e+u];for(o(r,i,a,s,n),c=0;c<n;c++)t[c*e+u]=i[c]}for(c=0;c<n;c++){for(u=0;u<e;u++)r[u]=t[c*e+u];for(o(r,i,a,s,e),u=0;u<e;u++)t[c*e+u]=Math.sqrt(i[u])}}function o(t,e,n,r,i){n[0]=0,r[0]=-a,r[1]=+a;for(var o=1,s=0;o<i;o++){for(var u=(t[o]+o*o-(t[n[s]]+n[s]*n[s]))/(2*o-2*n[s]);u<=r[s];)s--,u=(t[o]+o*o-(t[n[s]]+n[s]*n[s]))/(2*o-2*n[s]);s++,n[s]=o,r[s]=u,r[s+1]=+a}for(o=0,s=0;o<i;o++){for(;r[s+1]<o;)s++;e[o]=(o-n[s])*(o-n[s])+t[n[s]]}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var a=1e20;r.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.measureText(t).width+1|0,n=this.ctx.getImageData(0,0,this.size,this.size),r=n.data,o=0;o<this.size*this.size;o++){var s=r[4*o+3]/255;this.gridOuter[o]=1===s?0:0===s?a:Math.pow(Math.max(0,.5-s),2),this.gridInner[o]=1===s?a:0===s?0:Math.pow(Math.max(0,s-.5),2)}for(i(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),i(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),o=0;o<this.size*this.size;o++){var u=this.gridOuter[o]-this.gridInner[o],c=Math.max(0,Math.min(255,Math.round(255-255*(u/this.radius+this.cutoff))));r[4*o+0]=c,r[4*o+1]=c,r[4*o+2]=c,r[4*o+3]=255}var r={data:n,charWidth:e+2*this.buffer};return r}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(5),c=r(u),f=n(1),h=(r(f),function(t){function e(t,n,r){i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.gl=n,a.unit=r||0,a.textureIconWidth=t.textureIconWidth,a.textureIconHeight=t.textureIconHeight,a.fontSize=60,a.fontFamily=t.textureIconFontFamily,a.border=2,a.width=70,a.height=80,a.startx=a.border,a.starty=a.border,a.canvas=null,a.iconinfo=null,a.icons=[],a.texture=null,a.createTexture(!0),a.canvas=document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.resize(a.textureIconWidth,a.textureIconHeight),a}return a(e,t),s(e,[{key:"resize",value:function(t,e){this.canvas.width=t,this.canvas.height=e;var n=this.ctx;n.fillStyle="#000000",n.fillRect(0,0,this.canvas.width,this.canvas.height),n.font=this.fontSize+"px "+this.fontFamily,n.textAlign="center",n.textBaseline="middle",n.fillStyle="#ffffff",this.iconinfo={fontSize:this.fontSize,img:this.canvas,width:this.width,height:this.height,infos:{}},this.ctx=n}},{key:"needResize",value:function(t){var e=this.canvas.width,n=this.canvas.height,r=Math.floor((n-this.starty-this.height-this.border)/this.height),i=Math.floor((e-2*this.border)/this.width),o=r*i;return o<=t}},{key:"getSize",value:function(t){var e,n,r,i=this.canvas.width,o=this.canvas.height;do o<i?o*=2:i*=2,e=Math.floor((o-2*this.border)/this.height),n=Math.floor((i-2*this.border)/this.width),r=e*n;while(r<t);return{width:i,height:o}}},{key:"addIcons",value:function(t){var e,n={},r=[],i=this;if(t.forEach(function(t){i.iconinfo.infos[t]||n[t]||(r.push(t),n[t]=!0)}),t=r,t&&0!=t.length){this.needResize(t.length)?(e=this.getSize(t.length+this.icons.length),t.forEach(function(t){i.icons.push({content:t})}),this.resize(e.width,e.height),this.icons.forEach(function(t){return t.flag=!1}),this.startx=this.border,this.starty=this.border):t.forEach(function(t){i.icons.push({content:t})}),t=this.icons;for(var o,a=this.ctx,s=this.canvas,u=this.iconinfo.infos,c=0;c<t.length;c++)o=t[c],o.flag||(o.width=this.width,o.height=this.height,this.startx+this.width/2+this.border>s.width&&(this.startx=this.border,this.starty+=this.height),o.startX=this.startx,o.startY=this.starty,a.fillText(o.content,o.startX+this.width/2,o.startY+this.height/2),u[o.content]={startX:o.startX,startY:o.startY,width:o.width,height:o.height,wScale:1},this.icons.push(o),o.flag=!0,this.startx+=this.width);this.createTexture()}}},{key:"createTexture",value:function(t){var e=this.gl;this.texture||(this.texture=e.createTexture()),e.activeTexture(e.TEXTURE0+this.unit),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),t?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,4,4,0,e.RGBA,e.UNSIGNED_BYTE,null):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.iconinfo.img)}},{key:"clear",value:function(){this.startx=this.border,this.starty=this.border,this.icons=[],this.resize(this.canvas.width,this.canvas.height)}},{key:"destroy",value:function(){this.ctx=null,this.gl=null,this.canvas=null,this.iconinfo=null,this.icons=[],this.texture=null}}]),e}(c.default));e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(5),c=r(u),f=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.cache={},t.textures=[],t.texturesIndex=[0,1,2,3,4,5,6,7,8,9],t}return a(e,t),s(e,[{key:"loadImgs",value:function(t){Array.isArray(t)?t.forEach(function(t){this._load(t)}.bind(this)):this._load(t)}},{key:"_load",value:function(t){if(!this.cache[t]){var e=document.createElement("IMG");e.src=t,e.onload=function(){var n=this.createTexture(e);this.cache[t]=this.textures.length,this.textures.push(n),this.updateGPUTexture(),
this.emit("load",[t])}.bind(this)}}},{key:"attachGl",value:function(t){this.defaultTexture=this.createTexture(t),this.texturesIndex.forEach(function(e){t.activeTexture(t["TEXTURE"+e]),e>this.textures.length-1?t.bindTexture(t.TEXTURE_2D,this.defaultTexture):t.bindTexture(t.TEXTURE_2D,this.textures[e])}.bind(this))}},{key:"createTexture",value:function(t,e){var n=t.createTexture();return t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),e?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,2,2,0,t.RGBA,t.UNSIGNED_BYTE,null),n}}]),e}(c.default);e.default=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(5),c=r(u),f=n(58),h=r(f),l=n(1),d=(r(l),function(t){function e(t,n){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.border=2,r.gl=n,r.fontSize=48,r.fontFamily=t.textureTextFontFamily,r.textureTextWidth=t.textureTextWidth,r.textureTextHeight=t.textureTextHeight,r.canvas=null,r.textinfo=null,r.texture=null,r.startx=r.border,r.starty=r.border,r.texts=[],r.sdf=new h.default(r.fontSize,r.fontSize/8,r.fontSize/3,null,r.fontFamily),r.createTexture(!0),r.canvas=document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.resize(r.textureTextWidth,r.textureTextHeight),r}return a(e,t),s(e,[{key:"resize",value:function(t,e){var n=this.ctx;this.canvas.width=t,this.canvas.height=e,n.fillStyle="#000000",n.fillRect(0,0,this.canvas.width,this.canvas.height),this.textinfo={fontSize:this.fontSize,img:this.canvas,width:this.sdf.size,height:this.sdf.sizes,infos:{}}}},{key:"needResize",value:function(t){var e=this.canvas.width,n=this.canvas.height,r=this.sdf.size+2,i=Math.floor((n-this.starty-r-this.border)/r),o=Math.floor((e-2*this.border)/r),a=i*o;return a<=t}},{key:"getSize",value:function(t){var e,n,r,i=this.canvas.width,o=this.canvas.height,a=this.sdf.size+2;do o<i?o*=2:i*=2,e=Math.floor((o-2*this.border)/a),n=Math.floor((i-2*this.border)/a),r=e*n;while(r<t);return{width:i,height:o}}},{key:"addTexts",value:function(t){var e,n=this,r=[],i={};if(t.forEach(function(t){n.textinfo.infos[t]||i[t]||(r.push(t),i[t]=!0)}),t=r,t&&!(t.length<1)){this.needResize(t.length)?(e=this.getSize(t.length+this.texts.length),t.forEach(function(t){n.texts.push({content:t})}),this.resize(e.width,e.height),this.texts.forEach(function(t){return t.flag=!1}),this.startx=this.border,this.starty=this.border):t.forEach(function(t){n.texts.push({content:t})}),t=this.texts;for(var o,a,s=this.canvas,u=this.ctx,c=this.startx,f=this.starty,h=this.textinfo.infos,l=0;l<t.length;l++)a=t[l],a.flag||(o=this.sdf.draw(a.content),a.sdf=o.data,a.width=o.charWidth,a.height=this.sdf.size,c+o.charWidth+this.border>s.width&&(c=this.border,f+=this.sdf.size),a.startX=c,a.startY=f,u.putImageData(a.sdf,a.startX,a.startY,0,0,a.width,a.height),h[a.content]={startX:a.startX,startY:a.startY,width:a.width,height:a.height,wScale:a.width/this.sdf.size},a.flag=!0,c+=a.width);this.startx=c,this.starty=f,this.createTexture()}}},{key:"createTexture",value:function(t){var e=this.gl;this.texture||(this.texture=e.createTexture()),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),t?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,4,4,0,e.RGBA,e.UNSIGNED_BYTE,null):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.textinfo.img)}},{key:"clear",value:function(){this.startx=this.border,this.starty=this.border,this.texts=[],this.resize(this.canvas.width,this.canvas.height)}},{key:"destroy",value:function(){this.canvas=null,this.textinfo=null,this.texture=null,this.gl=null,this.texts=[],this.sdf=null}}]),e}(c.default));e.default=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){var r=new Image;r.src=e,r.onload=function(){n(null,o(t,r))},r.onerror=function(){n(err,null)}}function o(t,e){var n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),e?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,4,4,0,t.RGBA,t.UNSIGNED_BYTE,null),n}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=r(a),u=n(140),c=r(u),f=n(139),h=r(f);e.default={shaderVert:c.default,shaderFrag:h.default,instanceData:{a_uv:{components:2,data:[0,0,1,0,0,1,1,0,0,1,1,1]},a_p:{components:2,data:[-1,1,1,1,-1,-1,1,1,-1,-1,1,-1]}},init:function(t){var e=t.config;t.gl;this.bgTextrue=o(t.gl,null),this.hasBg=!1;var n=(this.option.backgroundImage||e.backgroundImage,this);e.backgroundImage&&i(t.gl,e.backgroundImage,function(e,r){e||(n.bgTextrue=r,n.hasBg=!0,t.forceRender())})},getUniforms:function(t){var e=(t.matrix,t.camera,t.config),n=(t.renderOptions,t.render),r=t.option,i=s.default.parseColor(r.backgroundColor||e.backgroundColor);return{u_bgColor:[i.r,i.g,i.b,i.a],u_hasBg:this.hasBg?1:0,u_rotation:e.backgroundRotation||r.backgroundRotation||0,u_cameraSize:[n.container.clientWidth,n.container.clientHeight],u_bgTexture:this.bgTextrue,u_alpha:r.backgroundAlpha||e.backgroundAlpha||1,u_repeatX:r.backgroundRepeatX||e.backgroundRepeatX||n.container.clientWidth,u_repeatY:r.backgroundRepeatY||e.backgroundRepeatY||n.container.clientHeight}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return t.replace(/#include<([a-zA-Z]+)>/gi,function(t,e){return s[e]||""})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(141),a=r(o),s={lib:a.default}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e,n,r,i=t.data,o=t.cacheIndex,a=t.gl,s=t.layers,u=t.renderLayerMap,f={},h=this;i.length<1||(i.forEach(function(t){t.filter||s.forEach(function(n){o[t.id][n]&&o[t.id][n].data&&u[n].enable&&u[n].show&&(f[n]=f[n]||[],e=o[t.id][n].data.indices,r=o[t.id][n].vertexStart,e&&e.forEach(function(t){f[n].push(t+r)}))})}),s.forEach(function(t){f[t]&&0!=f[t].length&&(n=u[t].program,a.useProgram(n),a.bindBuffer(a.ARRAY_BUFFER,n.vertexBuffer),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,h.indexBuffer),(0,c.vertexAttribPointer)(a,n.activeAttributes,n.offsetConfig),(0,c.setUniforms)(a,n.activeUniforms,n.uniforms),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint32Array(f[t]),a.STATIC_DRAW),a.drawElements(a.TRIANGLES,f[t].length,a.UNSIGNED_INT,0))}))}function o(t,e,n){var r=u.default.parseColor(n.bgColor||"rgba(255,255,255,0.8)");t.useProgram(e.program),t.bindBuffer(t.ARRAY_BUFFER,e.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.indexBuffer),t.vertexAttribPointer(e.positionLocation,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(e.positionLocation),t.uniform4f(e.bgLocation,r.r,r.g,r.b,r.a),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_INT,0)}function a(t,e){var n=t.renderLayerMap,r=t.gl;if(e=e||{},!e||e.over!==!1){this.indexBuffer||(this.indexBuffer=r.createBuffer()),this.grayBg||(this.grayBg={},this.grayBg.program=(0,c.loadProgram)(r,[(0,c.loadShader)(r,h.default,r.VERTEX_SHADER),(0,c.loadShader)(r,d.default,r.FRAGMENT_SHADER)]),this.grayBg.vertexBuffer=r.createBuffer(),this.grayBg.indexBuffer=r.createBuffer(),this.grayBg.positionLocation=r.getAttribLocation(this.grayBg.program,"a_position"),this.grayBg.bgLocation=r.getUniformLocation(this.grayBg.program,"u_bg_color"),r.bindBuffer(r.ARRAY_BUFFER,this.grayBg.vertexBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,1,1]),r.STATIC_DRAW),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.grayBg.indexBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Int32Array([0,1,2,1,2,3]),r.STATIC_DRAW));var a,s,u=t.context.overInfo.currentNode,f=e.data,l=[],p=[],v=t.context.graph;s=t.context.selection.getNodes(),u||f?(f?(p=f.edges.filter(function(t){return v.edgesIndex[t.id]}),l=f.nodes.filter(function(t){return v.nodesIndex[t.id]}),s=[]):((a=v.inEdgesIndex[u.id])&&a.forEach(function(t){p.push(v.edgesIndex[t]),l.push(v.nodesIndex[v.edgesIndex[t].source])}),(a=v.outEdgesIndex[u.id])&&a.forEach(function(t){p.push(v.edgesIndex[t]),l.push(v.nodesIndex[v.edgesIndex[t].target])}),l.push(u)),o(r,this.grayBg,e),p.length&&i.call(this,{data:p,cacheIndex:t.renderCache.edge.index,gl:r,layers:["edge","edgeCurve","edgeLabel","edgeCurveLabel"],renderLayerMap:n}),i.call(this,{data:l,cacheIndex:t.renderCache.node.index,gl:r,layers:["node","rectNode"],renderLayerMap:n}),s.length&&i.call(this,{data:s,cacheIndex:t.renderCache.node.index,gl:r,layers:["node","rectNode"],renderLayerMap:n}),i.call(this,{data:l,cacheIndex:t.renderCache.node.index,gl:r,layers:["nodeLabel"],renderLayerMap:n})):s.length&&i.call(this,{data:s,cacheIndex:t.renderCache.node.index,gl:r,layers:["node","rectNode"],renderLayerMap:n})}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var s=n(1),u=r(s),c=n(12),f=n(143),h=r(f),l=n(142),d=r(l)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e={bg:{name:"bg",context:"graph",render:t.bg},node:{name:"node",context:"node",render:t.node},edge:{name:"edge",context:"edge",render:t.edge},nodeLabel:{name:"nodeLabel",context:"node",render:t.nodeLabel},edgeLabel:{name:"edgeLabel",context:"edge",render:t.edgeLabel}};t.defaultLayers=e,t.defaultLayersConfig=[e.bg,e.edge,e.edgeLabel,e.node,e.nodeLabel]};var i=n(64);r(i)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=new Array(t),n=0;n<t;n++)e[n]=[0,0];return e}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(1),s=r(a),u=n(145),c=r(u),f=n(144),h=r(f),l=n(23);e.default={shaderVert:c.default,shaderFrag:h.default,instanceData:o({},l.instanceDataDefault,{a_flag:{components:1,data:[1,2,3,4,5,6]}}),attributes:{a_animation:{components:1},a_sourcePos:{components:4},a_targetPos:{components:4},a_sourcePos1:{components:4},a_targetPos1:{components:4},a_color:{components:4},a_size:{components:1},a_sizeInfo:{components:4},a_curveInfo:{components:2},a_isArrow:{components:1},a_isCurve:{components:1}},getUniforms:function(t){var e=t.matrix,n=t.camera,r=t.config,i=(t.sampleRatio,t.textureLoader,t.textureIcon,t.renderOptions);return{u_matrix:e,u_cameraScale:n.scale,u_curveFactor:r.edgeCurveFactor,u_time:i.hasOwnProperty("time")?i.time:0}},render:function(t){function e(){var t,e,r,o=n.animation&&c._destPos&&u._destPos&&n._destPaths&&n.paths.length===n._destPaths.length,d=n.paths.slice(0),p=d.length,v=s.default.normalize([d[0][0]-c.x,d[0][1]-c.y]),g=[c.x+v[0]*c.size,c.y+v[1]*c.size];if(v=s.default.normalize([d[p-1][0]-u.x,d[p-1][1]-u.y]),e=[u.x+v[0]*(h+u.size),u.y+v[1]*(h+u.size)],d.unshift(g),d.push(e),o){t=n._destPaths.slice(0),v=s.default.normalize([t[0][0]-c._destPos[0],t[0][1]-c._destPos[1]]),g=[c._destPos[0]+v[0]*c.size,c._destPos[1]+v[1]*c.size];var y=t.length;v=s.default.normalize([t[y-1][0]-u._destPos[0],t[y-1][1]-u._destPos[1]]),r=[u._destPos[0]+v[0]*(h+u.size),u._destPos[1]+v[1]*(h+u.size)],t.unshift(g),t.push(r)}else t=i(d.length);for(var _,m,x,b,E,w,P,k,T=[],A=0;A<d.length-1;A++)A-1<0?(_=d[A],E=t[A]):(_=d[A-1],E=t[A-1]),m=d[A],x=d[A+1],w=t[A],P=t[A+1],A+2>d.length-1?(b=d[A+1],k=t[A+1]):(b=d[A+2],k=t[A+2]),T.push({a_sourcePos:[_[0],_[1],E[0],E[1]],a_sourcePos1:[m[0],m[1],w[0],w[1]],a_targetPos:[x[0],x[1],P[0],P[1]],a_targetPos1:[b[0],b[1],k[0],k[1]],a_animation:o,a_color:[a.r,a.g,a.b,a.a],a_size:l,a_sizeInfo:[f,h,c.size,u.size],a_curveInfo:[0,0],a_isArrow:0,a_isCurve:2});return T.push({a_animation:o,a_color:[a.r,a.g,a.b,a.a],a_size:l,a_sizeInfo:[f,h,c.size,u.size],a_sourcePos:[d[d.length-2][0],d[d.length-2][1],t[d.length-2][0],t[d.length-2][1]],a_targetPos:[d[d.length-1][0],d[d.length-1][1],t[d.length-1][0],t[d.length-1][1]],a_curveInfo:[0,0],a_isArrow:1,a_isCurve:2}),T}var n=t.data,r=t.config,o=(t.textureLoader,t.textureIcon,t.graph),a=s.default.parseColor(n.color||r.defaultEdgeColor),u=o.nodesIndex[n.target],c=o.nodesIndex[n.source];n.selected&&(a=s.default.parseColor(r.edgeSelectColor));var f=n.dashSize||0,h=n.arrowSize||0,l=n.size||r.defaultEdgeSize,d=c._destPos?c._destPos:[0,0],p=u._destPos?u._destPos:[0,0];return n.paths&&n.paths.length>0?e():[{a_animation:n.animation?1:0,a_color:[a.r,a.g,a.b,a.a],a_size:l,a_sizeInfo:[f,h,c.size,u.size],a_sourcePos:[c.x,c.y,d[0],d[1]],a_targetPos:[u.x,u.y,p[0],p[1]],a_curveInfo:[n.curveCount||0,n.curveOrder?1:-1],a_isArrow:0,a_isCurve:n.curveCount>0?1:0},{a_animation:n.animation?1:0,a_color:[a.r,a.g,a.b,a.a],a_size:l,a_sizeInfo:[f,h,c.size,u.size],a_sourcePos:[c.x,c.y,d[0],d[1]],a_targetPos:[u.x,u.y,p[0],p[1]],a_curveInfo:[n.curveCount||0,n.curveOrder?1:-1],a_isArrow:1,a_isCurve:n.curveCount>0?1:0}]}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=r(i),a=n(147),s=r(a),u=n(146),c=r(u);e.default={shaderVert:s.default,shaderFrag:c.default,attributes:{a_sourcePosDest:{components:2},a_targetPosDest:{components:2},a_animation:{components:1},a_curveInfo:{components:2},a_sourcePos:{components:2},a_targetPos:{components:2},a_center:{components:2},a_position:{components:2},a_color:{components:4},a_uvStart:{components:2},a_uvInfo:{components:2},a_uvColor:{components:4},a_size:{components:2},a_dir:{components:2}},getUniforms:function(t){var e=t.matrix,n=t.camera,r=t.config,i=(t.sampleRatio,t.textureLoader,t.textureIcon,t.textureText),o=t.renderOptions;return{u_matrix:e,u_cameraScale:n.scale,u_textTexture:i.texture,u_textTextureSize:[i.canvas.width,i.canvas.height],u_curveFactor:r.edgeCurveFactor,u_time:o.hasOwnProperty("time")?o.time:0}},render:function(t){var e=t.data,n=t.config,r=(t.textureLoader,t.textureIcon,t.graph),i=t.textureText;if(!e.label)return null;e.size=e.size||n.defaultEdgeSize;var a=r.nodesIndex[e.target],s=r.nodesIndex[e.source],u=o.default.parseColor(e.fontColor||n.defaultEdgeLabelColor),c=o.default.parseColor(e.fontBgColor||n.defaultEdgeLabelBgColor),f=i.textinfo.infos,h=[],l=e.fontSize||3*e.size,d=[s.x,s.y],p=[a.x,a.y],v=[e.curveCount||0,e.curveOrder?1:-1],g=s._destPos?s._destPos:[0,0],y=a._destPos?a._destPos:[0,0],_=e.animation?1:0;if(e.paths&&e.paths.length>0){var m,x=e.paths.length;1==x?(p=e.paths[0],_&&e._destPaths&&(y=e._destPaths[0])):(m=Math.floor((x-1)/2),d=e.paths[m],p=e.paths[m+1],_&&e._destPaths&&(g=e._destPaths[m],y=e._destPaths[m+1])),v=[0,0]}var b,E,w,P,k,T=l,A=1.1*l;k=0;for(var I=0;I<e.label.length;I++)b=e.label.charAt(I),f[b]&&(E=f[b],w=E.wScale*T,P=6*w/8,h.push({a_sourcePosDest:g,a_targetPosDest:y,a_animation:_,a_sourcePos:d,a_targetPos:p,a_curveInfo:v,a_position:[k+P/2,0],a_color:[c.r,c.g,c.b,c.a],a_uvStart:[E.startX,E.startY],a_uvInfo:[E.width,E.height],a_uvColor:[u.r,u.g,u.b,u.a],a_size:[w,A]}),k+=P);return h.forEach(function(t){t.a_position[0]+=-k/2}),h.unshift({a_sourcePosDest:g,a_targetPosDest:y,a_animation:_,a_sourcePos:d,a_targetPos:p,a_curveInfo:v,a_position:[0,0],a_color:[c.r,c.g,c.b,c.a],a_uvStart:[0,0],a_uvInfo:[0,0],a_uvColor:[0,0,0,0],a_size:[k+T,A]}),h}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={TR:[1,1],TL:[-1,1],BL:[-1,-1],BR:[1,-1]};t=t.toUpperCase(),n[t]||(t="TR");var r=a.default.normalize(n[t]);return[r[0]*e,r[1]*e]}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=r(o),s=n(149),u=r(s),c=n(148),f=r(c);e.default={shaderVert:u.default,shaderFrag:f.default,attributes:{a_positionDest:{components:2},a_animation:{components:1},a_position:{components:2},a_color:{components:4},a_uvStart:{components:2},a_uvWidth:{components:1},a_uvHeight:{components:1},a_uvColor:{components:4},a_size:{components:2},a_text:{components:1},a_borderSize:{components:1},a_borderColor:{components:4}},getUniforms:function(t){var e=t.matrix,n=t.camera,r=(t.config,t.sampleRatio,t.textureText),i=(t.textureLoader,t.textureIcon),o=t.renderOptions;return{u_matrix:e,u_cameraScale:n.scale,u_iconsTexture:i.texture,u_textTexture:r.texture,u_textTextureSize:[r.canvas.width,r.canvas.height],u_iconTextureSize:[i.canvas.width,i.canvas.height],u_time:o.hasOwnProperty("time")?o.time:0}},render:function(t){function e(t,e){var c,f=a.default.parseColor(e.color||o.defaultNodeColor),h=a.default.parseColor(e.iconColor||"#000000"),l=e.fontSize||8,d=e.icon&&s.iconinfo.infos[e.icon],v=s.iconinfo.infos[e.icon],y=e.position||"TR";c=a.default.isString(y)?i(y,r.size):y;var _={a_positionDest:[g[0]+c[0],g[1]+c[1]],a_animation:r.animation?1:0,a_position:[r.x+c[0],r.y+c[1]],a_color:[f.r,f.g,f.b,f.a],a_size:[8,8],a_borderSize:0,a_borderColor:p,a_text:0,a_uvStart:d?[v.startX,v.startY]:[0,0],a_uvWidth:d?v.width:0,a_uvHeight:d?v.height:0,a_uvColor:[h.r,h.g,h.b,h.a]};if(t.push(_),e.text){var m=n(t,e.text,l,u.textinfo.infos,f,h,c);_.a_size[1]=_.a_size[0]=m/2}}function n(t,e,n,i,o,a,s){var u,c,f,h,l,d=n,v=1.1*n,y=[];l=0;for(var _=0;_<e.length;_++)u=e.charAt(_),i[u]&&(c=i[u],f=c.wScale*d,h=6*f/8,y.push({a_positionDest:[l+h/2,0],a_animation:r.animation?1:0,a_position:[l+h/2,0],a_color:[0,0,0,0],a_size:[.5*f,.5*v],a_borderSize:0,a_borderColor:p,a_text:1,a_uvStart:[c.startX,c.startY],a_uvWidth:c.width,a_uvHeight:c.height,a_uvColor:[a.r,a.g,a.b,a.a]}),l+=h);return y.forEach(function(e){e.a_position[0]+=-l/2,e.a_positionDest[0]+=-l/2,e.a_positionDest[0]+=g[0]+s[0],e.a_positionDest[1]+=g[1]+s[1],e.a_position[0]+=r.x+s[0],e.a_position[1]+=r.y+s[1],t.push(e)}),l+d}var r=t.data,o=t.config,s=(t.textureLoader,t.textureIcon),u=(t.graph,t.textureText),c=a.default.parseColor(o.nodeSelectColor);r.size=r.size||o.defaultNodeSize,r.x=r.x||0,r.y=r.y||0;var f=a.default.parseColor(r.color||o.defaultNodeColor),h=a.default.parseColor(r.iconColor||o.defaultNodeIconColor),l=r.icon&&s.iconinfo.infos[r.icon],d=s.iconinfo.infos[r.icon],p=a.default.parseColor(r.borderColor||"rgba(0,0,0,0)"),v=r.borderSize||0;p=[p.r,p.g,p.b,p.a],r.selected&&(p=[c.r,c.g,c.b,c.a],v=o.nodeSelectBorderSize);var g=r._destPos||[0,0],y=[];return y.push({a_positionDest:g,a_animation:r.animation?1:0,a_position:[r.x,r.y],a_color:[f.r,f.g,f.b,f.a],a_size:[r.size,r.size],a_borderSize:v,a_borderColor:p,a_uvStart:l?[d.startX,d.startY]:[0,0],a_uvWidth:l?d.width:0,a_uvHeight:l?d.height:0,a_text:0,a_uvColor:[h.r,h.g,h.b,h.a]}),r.tag&&(a.default.isArray(r.tag)?r.tag.forEach(function(t){e(y,t)}):e(y,r.tag)),y}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=r(i),a=n(151),s=r(a),u=n(150),c=r(u);e.default={shaderVert:s.default,shaderFrag:c.default,attributes:{a_positionDest:{components:2},a_animation:{components:1},a_nodePos:{components:2},a_position:{components:2},a_color:{components:4},a_uvStart:{components:2},a_uvWidth:{components:1},a_uvHeight:{components:1},a_uvColor:{components:4},a_size:{components:2}},getUniforms:function(t){var e=t.matrix,n=t.camera,r=(t.config,t.sampleRatio,t.textureLoader,t.textureIcon,t.textureText),i=t.renderOptions;return{u_matrix:e,u_cameraScale:n.scale,u_textTexture:r.texture,u_textTextureSize:[r.canvas.width,r.canvas.height],u_time:i.hasOwnProperty("time")?i.time:0}},render:function(t){var e=t.data,n=t.config,r=(t.textureLoader,t.textureIcon,t.graph,t.textureText);if(!e.label)return null;e.size=e.size||n.defaultNodeSize,e.x=e.x||0,e.y=e.y||0;var i,a,s,u,c,f=e.size,h=e._destPos||[0,0],l=e.animation?1:0,d=o.default.parseColor(e.fontColor||n.defaultNodeLabelColor),p=o.default.parseColor(e.fontBgColor||n.defaultNodeLabelBgColor),v=r.textinfo.infos,g=e.fontSize||f,y=[],_=g,m=1.1*g;c=0;var x=new Array(e.label.length),b=0,E=0,w=[],P=n.maxNodeLineLength;w[E]={len:0};for(var k=0;k<e.label.length;k++)i=e.label.charAt(k),v[i]&&(a=v[i],s=a.wScale*_,u=6*s/8,b+u>=P&&(w[E].len=b,E++,w[E]={len:0},b=0),y.push({a_positionDest:h,a_animation:l,a_nodePos:[e.x,e.y],a_position:[b+u/2,0],a_color:[p.r,p.g,p.b,p.a],a_uvStart:[a.startX,a.startY],a_uvWidth:a.width,a_uvHeight:a.height,a_uvColor:[d.r,d.g,d.b,d.a],a_size:[s,m]}),b+=u,x[y.length-1]=E);w[E].len=b;var T=[0,1.1*e.size*-1],A=0;y.forEach(function(t,e){var n=w[x[e]];A=Math.max(A,n.len),t.a_position[0]+=-n.len/2,t.a_position[1]+=-1*x[e]*m-m/2,t.a_position[0]+=T[0],t.a_position[1]+=T[1]});var I=0+T[0],S=w.length*m*-1/2+T[1];return y.unshift({a_positionDest:h,a_animation:l,a_nodePos:[e.x,e.y],a_position:[I,S],a_color:[p.r,p.g,p.b,p.a],a_uvStart:[0,0],a_uvWidth:0,a_uvHeight:0,a_uvColor:[0,0,0,0],a_size:[A+_,w.length*m+.5*m]}),y}}},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(13)},function(t,e,n){"use strict";function r(){}function i(t,e){var n=new r;if(t instanceof r)t.each(function(t){n.add(t)});else if(t){var i=-1,o=t.length;if(null==e)for(;++i<o;)n.add(t[i]);else for(;++i<o;)n.add(e(t[i],i,t))}return n}var o=n(13),a=o.a.prototype;r.prototype=i.prototype={constructor:r,has:a.has,add:function(t){return t+="",this[o.b+t]=t,this},remove:a.remove,clear:a.clear,values:a.keys,size:a.size,empty:a.empty,each:a.each}},function(t,e,n){"use strict"},function(t,e,n){"use strict";var r=n(76);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";function r(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new i(r)}function i(t){this._=t}function o(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function a(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function s(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=u,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}var u={value:function(){}};i.prototype=r.prototype={constructor:i,on:function(t,e){var n,r=this._,i=o(t+"",r),u=-1,c=i.length;{if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++u<c;)if(n=(t=i[u]).type)r[n]=s(r[n],t.name,e);else if(null==e)for(n in r)r[n]=s(r[n],t.name,null);return this}for(;++u<c;)if((n=(t=i[u]).type)&&(n=a(r[n],t.name)))return n}},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new i(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],o=0,n=r.length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}},e.a=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(78);n.d(e,"forceCenter",function(){return r.a});var i=n(79);n.d(e,"forceCollide",function(){return i.a});var o=n(80);n.d(e,"forceLink",function(){return o.a});var a=n(81);n.d(e,"forceManyBody",function(){return a.a});var s=n(82);n.d(e,"forceRadial",function(){return s.a});var u=n(26);n.d(e,"forceSimulation",function(){return u.a});var c=n(83);n.d(e,"forceX",function(){return c.a});var f=n(84);n.d(e,"forceY",function(){return f.a})},function(t,e,n){"use strict";e.a=function(t,e){function n(){var n,i,o=r.length,a=0,s=0;for(n=0;n<o;++n)i=r[n],a+=i.x,s+=i.y;for(a=a/o-t,s=s/o-e,n=0;n<o;++n)i=r[n],i.x-=a,i.y-=s}var r;return null==t&&(t=0),null==e&&(e=0),n.initialize=function(t){r=t},n.x=function(e){return arguments.length?(t=+e,n):t},n.y=function(t){return arguments.length?(e=+t,n):e},n}},function(t,e,n){"use strict";function r(t){return t.x+t.vx}function i(t){return t.y+t.vy}var o=n(6),a=n(14),s=n(27);e.a=function(t){function e(){function t(t,e,r,i,o){var s=t.data,u=t.r,f=g+u;{if(!s)return e>p+f||i<p-f||r>v+f||o<v-f;if(s.index>c.index){var h=p-s.x-s.vx,d=v-s.y-s.vy,_=h*h+d*d;_<f*f&&(0===h&&(h=n.i(a.a)(),_+=h*h),0===d&&(d=n.i(a.a)(),_+=d*d),_=(f-(_=Math.sqrt(_)))/_*l,c.vx+=(h*=_)*(f=(u*=u)/(y+u)),c.vy+=(d*=_)*f,s.vx-=h*(f=1-f),s.vy-=d*f)}}}for(var e,o,c,p,v,g,y,_=f.length,m=0;m<d;++m)for(o=n.i(s.a)(f,r,i).visitAfter(u),e=0;e<_;++e)c=f[e],g=h[c.index],y=g*g,p=c.x+c.vx,v=c.y+c.vy,o.visit(t)}function u(t){if(t.data)return t.r=h[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function c(){if(f){var e,n,r=f.length;for(h=new Array(r),e=0;e<r;++e)n=f[e],h[n.index]=+t(n,e,f)}}var f,h,l=1,d=1;return"function"!=typeof t&&(t=n.i(o.a)(null==t?1:+t)),e.initialize=function(t){f=t,c()},e.iterations=function(t){return arguments.length?(d=+t,e):d},e.strength=function(t){return arguments.length?(l=+t,e):l},e.radius=function(r){return arguments.length?(t="function"==typeof r?r:n.i(o.a)(+r),c(),e):t},e}},function(t,e,n){"use strict";function r(t){return t.index}function i(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}var o=n(6),a=n(14),s=n(25);e.a=function(t){function e(t){return 1/Math.min(v[t.source.index],v[t.target.index])}function u(e){for(var r=0,i=t.length;r<x;++r)for(var o,s,u,c,f,h,p,v=0;v<i;++v)o=t[v],s=o.source,u=o.target,c=u.x+u.vx-s.x-s.vx||n.i(a.a)(),f=u.y+u.vy-s.y-s.vy||n.i(a.a)(),h=Math.sqrt(c*c+f*f),h=(h-d[v])/h*e*l[v],c*=h,f*=h,u.vx-=c*(p=g[v]),u.vy-=f*p,s.vx+=c*(p=1-p),s.vy+=f*p}function c(){if(p){var e,r,o=p.length,a=t.length,u=n.i(s.a)(p,y);for(e=0,v=new Array(o);e<a;++e)r=t[e],r.index=e,"object"!=typeof r.source&&(r.source=i(u,r.source)),"object"!=typeof r.target&&(r.target=i(u,r.target)),v[r.source.index]=(v[r.source.index]||0)+1,v[r.target.index]=(v[r.target.index]||0)+1;for(e=0,g=new Array(a);e<a;++e)r=t[e],g[e]=v[r.source.index]/(v[r.source.index]+v[r.target.index]);l=new Array(a),f(),d=new Array(a),h()}}function f(){if(p)for(var e=0,n=t.length;e<n;++e)l[e]=+_(t[e],e,t)}function h(){if(p)for(var e=0,n=t.length;e<n;++e)d[e]=+m(t[e],e,t)}var l,d,p,v,g,y=r,_=e,m=n.i(o.a)(30),x=1;return null==t&&(t=[]),u.initialize=function(t){p=t,c()},u.links=function(e){return arguments.length?(t=e,c(),u):t},u.id=function(t){return arguments.length?(y=t,u):y},u.iterations=function(t){return arguments.length?(x=+t,u):x},u.strength=function(t){return arguments.length?(_="function"==typeof t?t:n.i(o.a)(+t),f(),u):_},u.distance=function(t){return arguments.length?(m="function"==typeof t?t:n.i(o.a)(+t),h(),u):m},u}},function(t,e,n){"use strict";var r=n(6),i=n(14),o=n(27),a=n(26);e.a=function(){function t(t){var e,r=c.length,i=n.i(o.a)(c,a.b,a.c).visitAfter(s);for(h=t,e=0;e<r;++e)f=c[e],i.visit(u)}function e(){if(c){var t,e,n=c.length;for(l=new Array(n),t=0;t<n;++t)e=c[t],l[e.index]=+d(e,t,c)}}function s(t){var e,n,r,i,o,a=0,s=0;if(t.length){for(r=i=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(a+=e.value,s+=n,r+=n*e.x,i+=n*e.y);t.x=r/s,t.y=i/s}else{e=t,e.x=e.data.x,e.y=e.data.y;do a+=l[e.data.index];while(e=e.next)}t.value=a}function u(t,e,r,o){if(!t.value)return!0;var a=t.x-f.x,s=t.y-f.y,u=o-e,c=a*a+s*s;if(u*u/g<c)return c<v&&(0===a&&(a=n.i(i.a)(),c+=a*a),0===s&&(s=n.i(i.a)(),c+=s*s),c<p&&(c=Math.sqrt(p*c)),f.vx+=a*t.value*h/c,f.vy+=s*t.value*h/c),!0;if(!(t.length||c>=v)){(t.data!==f||t.next)&&(0===a&&(a=n.i(i.a)(),c+=a*a),0===s&&(s=n.i(i.a)(),c+=s*s),c<p&&(c=Math.sqrt(p*c)));do t.data!==f&&(u=l[t.data.index]*h/c,f.vx+=a*u,f.vy+=s*u);while(t=t.next)}}var c,f,h,l,d=n.i(r.a)(-30),p=1,v=1/0,g=.81;return t.initialize=function(t){c=t,e()},t.strength=function(i){return arguments.length?(d="function"==typeof i?i:n.i(r.a)(+i),e(),t):d},t.distanceMin=function(e){return arguments.length?(p=e*e,t):Math.sqrt(p)},t.distanceMax=function(e){return arguments.length?(v=e*e,t):Math.sqrt(v)},t.theta=function(e){return arguments.length?(g=e*e,t):Math.sqrt(g)},t}},function(t,e,n){"use strict";var r=n(6);e.a=function(t,e,i){function o(t){for(var n=0,r=s.length;n<r;++n){var o=s[n],a=o.x-e||1e-6,f=o.y-i||1e-6,h=Math.sqrt(a*a+f*f),l=(c[n]-h)*u[n]*t/h;o.vx+=a*l,o.vy+=f*l}}function a(){if(s){var e,n=s.length;for(u=new Array(n),c=new Array(n),e=0;e<n;++e)c[e]=+t(s[e],e,s),u[e]=isNaN(c[e])?0:+f(s[e],e,s)}}var s,u,c,f=n.i(r.a)(.1);return"function"!=typeof t&&(t=n.i(r.a)(+t)),null==e&&(e=0),null==i&&(i=0),o.initialize=function(t){s=t,a()},o.strength=function(t){return arguments.length?(f="function"==typeof t?t:n.i(r.a)(+t),a(),o):f},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:n.i(r.a)(+e),a(),o):t},o.x=function(t){return arguments.length?(e=+t,o):e},o.y=function(t){return arguments.length?(i=+t,o):i},o}},function(t,e,n){"use strict";var r=n(6);e.a=function(t){function e(t){for(var e,n=0,r=o.length;n<r;++n)e=o[n],e.vx+=(s[n]-e.x)*a[n]*t}function i(){if(o){var e,n=o.length;for(a=new Array(n),s=new Array(n),e=0;e<n;++e)a[e]=isNaN(s[e]=+t(o[e],e,o))?0:+u(o[e],e,o)}}var o,a,s,u=n.i(r.a)(.1);return"function"!=typeof t&&(t=n.i(r.a)(null==t?0:+t)),e.initialize=function(t){o=t,i()},e.strength=function(t){return arguments.length?(u="function"==typeof t?t:n.i(r.a)(+t),i(),e):u},e.x=function(o){return arguments.length?(t="function"==typeof o?o:n.i(r.a)(+o),i(),e):t},e}},function(t,e,n){"use strict";var r=n(6);e.a=function(t){function e(t){for(var e,n=0,r=o.length;n<r;++n)e=o[n],e.vy+=(s[n]-e.y)*a[n]*t}function i(){if(o){var e,n=o.length;for(a=new Array(n),s=new Array(n),e=0;e<n;++e)a[e]=isNaN(s[e]=+t(o[e],e,o))?0:+u(o[e],e,o)}}var o,a,s,u=n.i(r.a)(.1);return"function"!=typeof t&&(t=n.i(r.a)(null==t?0:+t)),e.initialize=function(t){o=t,i()},e.strength=function(t){return arguments.length?(u="function"==typeof t?t:n.i(r.a)(+t),i(),e):u},e.y=function(o){return arguments.length?(t="function"==typeof o?o:n.i(r.a)(+o),i(),e):t},e}},function(t,e,n){"use strict";function r(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,c,f,h,l,d=t._root,p={data:r},v=t._x0,g=t._y0,y=t._x1,_=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(o=(v+y)/2))?v=o:y=o,(f=n>=(a=(g+_)/2))?g=a:_=a,i=d,!(d=d[h=f<<1|c]))return i[h]=p,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&n===u)return p.next=d,i?i[h]=p:t._root=p,t;do i=i?i[h]=new Array(4):t._root=new Array(4),(c=e>=(o=(v+y)/2))?v=o:y=o,(f=n>=(a=(g+_)/2))?g=a:_=a;while((h=f<<1|c)===(l=(u>=a)<<1|s>=o));return i[l]=d,i[h]=p,t}function i(t){var e,n,i,o,a=t.length,s=new Array(a),u=new Array(a),c=1/0,f=1/0,h=-(1/0),l=-(1/0);for(n=0;n<a;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(s[n]=i,u[n]=o,i<c&&(c=i),i>h&&(h=i),o<f&&(f=o),o>l&&(l=o));for(h<c&&(c=this._x0,h=this._x1),l<f&&(f=this._y0,l=this._y1),this.cover(c,f).cover(h,l),n=0;n<a;++n)r(this,s[n],u[n],t[n]);return this}e.b=i,e.a=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);
return r(this.cover(e,n),e,n,t)}},function(t,e,n){"use strict";e.a=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{if(!(n>t||t>i||r>e||e>o))return this;var a,s,u=i-n,c=this._root;switch(s=(e<(r+o)/2)<<1|t<(n+i)/2){case 0:do a=new Array(4),a[s]=c,c=a;while(u*=2,i=n+u,o=r+u,t>i||e>o);break;case 1:do a=new Array(4),a[s]=c,c=a;while(u*=2,n=i-u,o=r+u,n>t||e>o);break;case 2:do a=new Array(4),a[s]=c,c=a;while(u*=2,i=n+u,r=o-u,t>i||r>e);break;case 3:do a=new Array(4),a[s]=c,c=a;while(u*=2,n=i-u,r=o-u,n>t||r>e)}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}},function(t,e,n){"use strict";e.a=function(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}},function(t,e,n){"use strict";e.a=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}},function(t,e,n){"use strict";var r=n(15);e.a=function(t,e,n){var i,o,a,s,u,c,f,h=this._x0,l=this._y0,d=this._x1,p=this._y1,v=[],g=this._root;for(g&&v.push(new r.a(g,h,l,d,p)),null==n?n=1/0:(h=t-n,l=e-n,d=t+n,p=e+n,n*=n);c=v.pop();)if(!(!(g=c.node)||(o=c.x0)>d||(a=c.y0)>p||(s=c.x1)<h||(u=c.y1)<l))if(g.length){var y=(o+s)/2,_=(a+u)/2;v.push(new r.a(g[3],y,_,s,u),new r.a(g[2],o,_,y,u),new r.a(g[1],y,a,s,_),new r.a(g[0],o,a,y,_)),(f=(e>=_)<<1|t>=y)&&(c=v[v.length-1],v[v.length-1]=v[v.length-1-f],v[v.length-1-f]=c)}else{var m=t-+this._x.call(null,g.data),x=e-+this._y.call(null,g.data),b=m*m+x*x;if(b<n){var E=Math.sqrt(n=b);h=t-E,l=e-E,d=t+E,p=e+E,i=g.data}}return i}},function(t,e,n){"use strict";function r(t,e,n){var r=new i(null==e?g.a:e,null==n?y.a:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function i(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function o(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var a=n(85),s=n(86),u=n(87),c=n(88),f=n(89),h=n(91),l=n(92),d=n(93),p=n(94),v=n(95),g=n(96),y=n(97);e.a=r;var _=r.prototype=i.prototype;_.copy=function(){var t,e,n=new i(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=o(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var a=0;a<4;++a)(e=r.source[a])&&(e.length?t.push({source:e,target:r.target[a]=new Array(4)}):r.target[a]=o(e));return n},_.add=a.a,_.addAll=a.b,_.cover=s.a,_.data=u.a,_.extent=c.a,_.find=f.a,_.remove=h.a,_.removeAll=h.b,_.root=l.a,_.size=d.a,_.visit=p.a,_.visitAfter=v.a,_.x=g.b,_.y=y.b},function(t,e,n){"use strict";function r(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}e.b=r,e.a=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,c,f,h,l,d=this._root,p=this._x0,v=this._y0,g=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((c=o>=(s=(p+g)/2))?p=s:g=s,(f=a>=(u=(v+y)/2))?v=u:y=u,e=d,!(d=d[h=f<<1|c]))return this;if(!d.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,l=h)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[l]=d:this._root=d),this):(this._root=i,this)}},function(t,e,n){"use strict";e.a=function(){return this._root}},function(t,e,n){"use strict";e.a=function(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}},function(t,e,n){"use strict";var r=n(15);e.a=function(t){var e,n,i,o,a,s,u=[],c=this._root;for(c&&u.push(new r.a(c,this._x0,this._y0,this._x1,this._y1));e=u.pop();)if(!t(c=e.node,i=e.x0,o=e.y0,a=e.x1,s=e.y1)&&c.length){var f=(i+a)/2,h=(o+s)/2;(n=c[3])&&u.push(new r.a(n,f,h,a,s)),(n=c[2])&&u.push(new r.a(n,i,h,f,s)),(n=c[1])&&u.push(new r.a(n,f,o,a,h)),(n=c[0])&&u.push(new r.a(n,i,o,f,h))}return this}},function(t,e,n){"use strict";var r=n(15);e.a=function(t){var e,n=[],i=[];for(this._root&&n.push(new r.a(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var o=e.node;if(o.length){var a,s=e.x0,u=e.y0,c=e.x1,f=e.y1,h=(s+c)/2,l=(u+f)/2;(a=o[0])&&n.push(new r.a(a,s,u,h,l)),(a=o[1])&&n.push(new r.a(a,h,u,c,l)),(a=o[2])&&n.push(new r.a(a,s,l,h,f)),(a=o[3])&&n.push(new r.a(a,h,l,c,f))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this}},function(t,e,n){"use strict";function r(t){return t[0]}e.a=r,e.b=function(t){return arguments.length?(this._x=t,this):this._x}},function(t,e,n){"use strict";function r(t){return t[1]}e.a=r,e.b=function(t){return arguments.length?(this._y=t,this):this._y}},function(t,e,n){"use strict";var r=n(16);n.d(e,"a",function(){return r.a});n(100),n(99)},function(t,e,n){"use strict";n(16)},function(t,e,n){"use strict";n(16)},function(t,e,n){t.exports={graphlib:n(4),layout:n(108),debug:n(106),util:{time:n(2).time,notime:n(2).notime},version:n(125)}},function(t,e,n){"use strict";function r(t){function e(t){return function(e){return t.edge(e).weight}}var n="greedy"===t.graph().acyclicer?s(t,e(t)):i(t);a.forEach(n,function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,a.uniqueId("rev"))})}function i(t){function e(o){a.has(i,o)||(i[o]=!0,r[o]=!0,a.forEach(t.outEdges(o),function(t){a.has(r,t.w)?n.push(t):e(t.w)}),delete r[o])}var n=[],r={},i={};return a.forEach(t.nodes(),e),n}function o(t){a.forEach(t.edges(),function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}var a=n(0),s=n(107);t.exports={run:r,undo:o}},function(t,e,n){function r(t){function e(n){var r=t.children(n),a=t.node(n);if(r.length&&o.forEach(r,e),o.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var s=a.minRank,u=a.maxRank+1;s<u;++s)i(t,"borderLeft","_bl",n,a,s),i(t,"borderRight","_br",n,a,s)}}o.forEach(t.children(),e)}function i(t,e,n,r,i,o){var s={width:0,height:0,rank:o,borderType:e},u=i[e][o-1],c=a.addDummyNode(t,"border",s,n);i[e][o]=c,t.setParent(c,r),u&&t.setEdge(u,c,{weight:1})}var o=n(0),a=n(2);t.exports=r},function(t,e,n){"use strict";function r(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||o(t)}function i(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||s(t),"lr"!==e&&"rl"!==e||(c(t),o(t))}function o(t){h.forEach(t.nodes(),function(e){a(t.node(e))}),h.forEach(t.edges(),function(e){a(t.edge(e))})}function a(t){var e=t.width;t.width=t.height,t.height=e}function s(t){h.forEach(t.nodes(),function(e){u(t.node(e))}),h.forEach(t.edges(),function(e){var n=t.edge(e);h.forEach(n.points,u),h.has(n,"y")&&u(n)})}function u(t){t.y=-t.y}function c(t){h.forEach(t.nodes(),function(e){f(t.node(e))}),h.forEach(t.edges(),function(e){var n=t.edge(e);h.forEach(n.points,f),h.has(n,"x")&&f(n)})}function f(t){var e=t.x;t.x=t.y,t.y=e}var h=n(0);t.exports={adjust:r,undo:i}},function(t,e){function n(){var t={};t._next=t._prev=t,this._sentinel=t}function r(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function i(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=n,n.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return r(e),e},n.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&r(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},n.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,i)),n=n._prev;return"["+t.join(", ")+"]"}},function(t,e,n){function r(t){var e=o.buildLayerMatrix(t),n=new a({compound:!0,multigraph:!0}).setGraph({});return i.forEach(t.nodes(),function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)}),i.forEach(t.edges(),function(t){n.setEdge(t.v,t.w,{},t.name)}),i.forEach(e,function(t,e){var r="layer"+e;n.setNode(r,{rank:"same"}),i.reduce(t,function(t,e){return n.setEdge(t,e,{style:"invis"}),e})}),n}var i=n(0),o=n(2),a=n(4).Graph;t.exports={debugOrdering:r}},function(t,e,n){function r(t,e){if(t.nodeCount()<=1)return[];var n=a(t,e||h),r=i(n.graph,n.buckets,n.zeroIdx);return u.flatten(u.map(r,function(e){return t.outEdges(e.v,e.w)}),!0)}function i(t,e,n){for(var r,i=[],a=e[e.length-1],s=e[0];t.nodeCount();){for(;r=s.dequeue();)o(t,e,n,r);for(;r=a.dequeue();)o(t,e,n,r);if(t.nodeCount())for(var u=e.length-2;u>0;--u)if(r=e[u].dequeue()){i=i.concat(o(t,e,n,r,!0));break}}return i}function o(t,e,n,r,i){var o=i?[]:void 0;return u.forEach(t.inEdges(r.v),function(r){var a=t.edge(r),u=t.node(r.v);i&&o.push({v:r.v,w:r.w}),u.out-=a,s(e,n,u)}),u.forEach(t.outEdges(r.v),function(r){var i=t.edge(r),o=r.w,a=t.node(o);a.in-=i,s(e,n,a)}),t.removeNode(r.v),o}function a(t,e){var n=new c,r=0,i=0;u.forEach(t.nodes(),function(t){n.setNode(t,{v:t,in:0,out:0})}),u.forEach(t.edges(),function(t){var o=n.edge(t.v,t.w)||0,a=e(t),s=o+a;n.setEdge(t.v,t.w,s),i=Math.max(i,n.node(t.v).out+=a),r=Math.max(r,n.node(t.w).in+=a)});var o=u.range(i+r+3).map(function(){return new f}),a=r+1;return u.forEach(n.nodes(),function(t){s(o,a,n.node(t))}),{graph:n,buckets:o,zeroIdx:a}}function s(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}var u=n(0),c=n(4).Graph,f=n(105);t.exports=r;var h=u.constant(1)},function(t,e,n){"use strict";function r(t,e){var n=e&&e.debugTiming?L.time:L.notime;n("layout",function(){var e=n("  buildLayoutGraph",function(){return a(t)});n("  runLayout",function(){i(e,n)}),n("  updateInputGraph",function(){o(t,e)})})}function i(t,e){e("    makeSpaceForEdgeLabels",function(){s(t)}),e("    removeSelfEdges",function(){g(t)}),e("    acyclic",function(){E.run(t)}),e("    nestingGraph.run",function(){I.run(t)}),e("    rank",function(){P(L.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){u(t)}),e("    removeEmptyRanks",function(){A(t)}),e("    nestingGraph.cleanup",function(){I.cleanup(t)}),e("    normalizeRanks",function(){k(t)}),e("    assignRankMinMax",function(){c(t)}),e("    removeEdgeLabelProxies",function(){f(t)}),e("    normalize.run",function(){w.run(t)}),e("    parentDummyChains",function(){T(t)}),e("    addBorderSegments",function(){S(t)}),e("    order",function(){M(t)}),e("    insertSelfEdges",function(){y(t)}),e("    adjustCoordinateSystem",function(){C.adjust(t)}),e("    position",function(){O(t)}),e("    positionSelfEdges",function(){_(t)}),e("    removeBorderNodes",function(){v(t)}),e("    normalize.undo",function(){w.undo(t)}),e("    fixupEdgeLabelCoords",function(){d(t)}),e("    undoCoordinateSystem",function(){C.undo(t)}),e("    translateGraph",function(){h(t)}),e("    assignNodeIntersects",function(){l(t)}),e("    reversePoints",function(){p(t)}),e("    acyclic.undo",function(){E.undo(t)})}function o(t,e){b.forEach(t.nodes(),function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))}),b.forEach(t.edges(),function(n){var r=t.edge(n),i=e.edge(n);r.points=i.points,b.has(i,"x")&&(r.x=i.x,r.y=i.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}function a(t){var e=new R({multigraph:!0,compound:!0}),n=x(t.graph());return e.setGraph(b.merge({},N,m(n,z),b.pick(n,D))),b.forEach(t.nodes(),function(n){var r=x(t.node(n));e.setNode(n,b.defaults(m(r,j),F)),e.setParent(n,t.parent(n))}),b.forEach(t.edges(),function(n){var r=x(t.edge(n));e.setEdge(n,b.merge({},U,m(r,B),b.pick(r,G)))}),e}function s(t){var e=t.graph();e.ranksep/=2,b.forEach(t.edges(),function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function u(t){b.forEach(t.edges(),function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i=t.node(e.w),o={rank:(i.rank-r.rank)/2+r.rank,e:e};L.addDummyNode(t,"edge-proxy",o,"_ep")}})}function c(t){var e=0;b.forEach(t.nodes(),function(n){var r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=b.max(e,r.maxRank))}),t.graph().maxRank=e}function f(t){b.forEach(t.nodes(),function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}function h(t){function e(t){var e=t.x,a=t.y,s=t.width,u=t.height;n=Math.min(n,e-s/2),r=Math.max(r,e+s/2),i=Math.min(i,a-u/2),o=Math.max(o,a+u/2)}var n=Number.POSITIVE_INFINITY,r=0,i=Number.POSITIVE_INFINITY,o=0,a=t.graph(),s=a.marginx||0,u=a.marginy||0;b.forEach(t.nodes(),function(n){e(t.node(n))}),b.forEach(t.edges(),function(n){var r=t.edge(n);b.has(r,"x")&&e(r)}),n-=s,i-=u,b.forEach(t.nodes(),function(e){var r=t.node(e);r.x-=n,r.y-=i}),b.forEach(t.edges(),function(e){var r=t.edge(e);b.forEach(r.points,function(t){t.x-=n,t.y-=i}),b.has(r,"x")&&(r.x-=n),b.has(r,"y")&&(r.y-=i)}),a.width=r-n+s,a.height=o-i+u}function l(t){b.forEach(t.edges(),function(e){var n,r,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(L.intersectRect(o,n)),i.points.push(L.intersectRect(a,r))})}function d(t){b.forEach(t.edges(),function(e){var n=t.edge(e);if(b.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}function p(t){b.forEach(t.edges(),function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}function v(t){b.forEach(t.nodes(),function(e){if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),o=t.node(b.last(n.borderLeft)),a=t.node(b.last(n.borderRight));n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),b.forEach(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}function g(t){b.forEach(t.edges(),function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}function y(t){var e=L.buildLayerMatrix(t);b.forEach(e,function(e){var n=0;b.forEach(e,function(e,r){var i=t.node(e);i.order=r+n,b.forEach(i.selfEdges,function(e){L.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:r+ ++n,e:e.e,label:e.label},"_se")}),delete i.selfEdges})})}function _(t){b.forEach(t.nodes(),function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}})}function m(t,e){return b.mapValues(b.pick(t,e),Number)}function x(t){var e={};return b.forEach(t,function(t,n){e[n.toLowerCase()]=t}),e}var b=n(0),E=n(102),w=n(110),P=n(123),k=n(2).normalizeRanks,T=n(120),A=n(2).removeEmptyRanks,I=n(109),S=n(103),C=n(104),M=n(115),O=n(122),L=n(2),R=n(4).Graph;t.exports=r;var z=["nodesep","edgesep","ranksep","marginx","marginy"],N={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},D=["acyclicer","ranker","rankdir","align"],j=["width","height"],F={width:0,height:0},B=["minlen","weight","width","height","labeloffset"],U={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},G=["labelpos"]},function(t,e,n){function r(t){var e=c.addDummyNode(t,"root",{},"_root"),n=o(t),r=u.max(u.values(n))-1,s=2*r+1;t.graph().nestingRoot=e,u.forEach(t.edges(),function(e){t.edge(e).minlen*=s});var f=a(t)+1;u.forEach(t.children(),function(o){i(t,e,s,f,r,n,o)}),t.graph().nodeRankFactor=s}function i(t,e,n,r,o,a,s){var f=t.children(s);if(!f.length)return void(s!==e&&t.setEdge(e,s,{weight:0,minlen:n}));var h=c.addBorderNode(t,"_bt"),l=c.addBorderNode(t,"_bb"),d=t.node(s);t.setParent(h,s),d.borderTop=h,t.setParent(l,s),d.borderBottom=l,u.forEach(f,function(u){i(t,e,n,r,o,a,u);var c=t.node(u),f=c.borderTop?c.borderTop:u,d=c.borderBottom?c.borderBottom:u,p=c.borderTop?r:2*r,v=f!==d?1:o-a[s]+1;t.setEdge(h,f,{weight:p,minlen:v,nestingEdge:!0}),t.setEdge(d,l,{weight:p,minlen:v,nestingEdge:!0})}),t.parent(s)||t.setEdge(e,h,{weight:0,minlen:o+a[s]})}function o(t){function e(r,i){var o=t.children(r);o&&o.length&&u.forEach(o,function(t){e(t,i+1)}),n[r]=i}var n={};return u.forEach(t.children(),function(t){e(t,1)}),n}function a(t){return u.reduce(t.edges(),function(e,n){return e+t.edge(n).weight},0)}function s(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,u.forEach(t.edges(),function(e){var n=t.edge(e);n.nestingEdge&&t.removeEdge(e)})}var u=n(0),c=n(2);t.exports={run:r,cleanup:s}},function(t,e,n){"use strict";function r(t){t.graph().dummyChains=[],a.forEach(t.edges(),function(e){i(t,e)})}function i(t,e){var n=e.v,r=t.node(n).rank,i=e.w,o=t.node(i).rank,a=e.name,u=t.edge(e),c=u.labelRank;if(o!==r+1){t.removeEdge(e);var f,h,l;for(l=0,++r;r<o;++l,++r)u.points=[],h={width:0,height:0,edgeLabel:u,edgeObj:e,rank:r},f=s.addDummyNode(t,"edge",h,"_d"),r===c&&(h.width=u.width,h.height=u.height,h.dummy="edge-label",h.labelpos=u.labelpos),t.setEdge(n,f,{weight:u.weight},a),0===l&&t.graph().dummyChains.push(f),n=f;t.setEdge(n,i,{weight:u.weight},a)}}function o(t){a.forEach(t.graph().dummyChains,function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)})}var a=n(0),s=n(2);t.exports={run:r,undo:o}},function(t,e,n){function r(t,e,n){var r,o={};i.forEach(n,function(n){for(var i,a,s=t.parent(n);s;){if(i=t.parent(s),i?(a=o[i],o[i]=s):(a=r,r=s),a&&a!==s)return void e.setEdge(a,s);s=i}})}var i=n(0);t.exports=r},function(t,e,n){function r(t,e){return i.map(e,function(e){var n=t.inEdges(e);if(n.length){var r=i.reduce(n,function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}},{sum:0,weight:0});return{v:e,barycenter:r.sum/r.weight,weight:r.weight}}return{v:e}})}var i=n(0);t.exports=r},function(t,e,n){function r(t,e,n){var r=i(t),s=new a({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(e){return t.node(e)});return o.forEach(t.nodes(),function(i){var a=t.node(i),u=t.parent(i);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(s.setNode(i),s.setParent(i,u||r),o.forEach(t[n](i),function(e){var n=e.v===i?e.w:e.v,r=s.edge(n,i),a=o.isUndefined(r)?0:r.weight;s.setEdge(n,i,{weight:t.edge(e).weight+a})}),o.has(a,"minRank")&&s.setNode(i,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))}),s}function i(t){for(var e;t.hasNode(e=o.uniqueId("_root")););return e}var o=n(0),a=n(4).Graph;t.exports=r},function(t,e,n){"use strict";function r(t,e){for(var n=0,r=1;r<e.length;++r)n+=i(t,e[r-1],e[r]);return n}function i(t,e,n){for(var r=o.zipObject(n,o.map(n,function(t,e){return e})),i=o.flatten(o.map(e,function(e){return o.chain(t.outEdges(e)).map(function(e){return{pos:r[e.w],weight:t.edge(e).weight}}).sortBy("pos").value()}),!0),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var u=o.map(new Array(s),function(){return 0}),c=0;return o.forEach(i.forEach(function(t){var e=t.pos+a;u[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=u[e+1]),e=e-1>>1,u[e]+=t.weight;c+=t.weight*n})),c}var o=n(0);t.exports=r},function(t,e,n){"use strict";function r(t){var e=p.maxRank(t),n=i(t,s.range(1,e+1),"inEdges"),r=i(t,s.range(e-1,-1,-1),"outEdges"),f=u(t);a(t,f);for(var h,l=Number.POSITIVE_INFINITY,d=0,v=0;v<4;++d,++v){o(d%2?n:r,d%4>=2),f=p.buildLayerMatrix(t);var g=c(t,f);g<l&&(v=0,h=s.cloneDeep(f),l=g)}a(t,h)}function i(t,e,n){return s.map(e,function(e){return h(t,e,n)})}function o(t,e){var n=new d;s.forEach(t,function(t){var r=t.graph().root,i=f(t,r,n,e);s.forEach(i.vs,function(e,n){t.node(e).order=n}),l(t,n,i.vs)})}function a(t,e){s.forEach(e,function(e){s.forEach(e,function(e,n){t.node(e).order=n})})}var s=n(0),u=n(116),c=n(114),f=n(118),h=n(113),l=n(111),d=n(4).Graph,p=n(2);t.exports=r},function(t,e,n){"use strict";function r(t){function e(r){if(!i.has(n,r)){n[r]=!0;var o=t.node(r);a[o.rank].push(r),i.forEach(t.successors(r),e)}}var n={},r=i.filter(t.nodes(),function(e){return!t.children(e).length}),o=i.max(i.map(r,function(e){return t.node(e).rank})),a=i.map(i.range(o+1),function(){return[]}),s=i.sortBy(r,function(e){return t.node(e).rank});return i.forEach(s,e),a}var i=n(0);t.exports=r},function(t,e,n){"use strict";function r(t,e){var n={};a.forEach(t,function(t,e){var r=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};a.isUndefined(t.barycenter)||(r.barycenter=t.barycenter,r.weight=t.weight)}),a.forEach(e.edges(),function(t){var e=n[t.v],r=n[t.w];a.isUndefined(e)||a.isUndefined(r)||(r.indegree++,e.out.push(n[t.w]))});var r=a.filter(n,function(t){return!t.indegree});return i(r)}function i(t){function e(t){return function(e){e.merged||(a.isUndefined(e.barycenter)||a.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&o(t,e)}}function n(e){return function(n){n.in.push(e),0===--n.indegree&&t.push(n)}}for(var r=[];t.length;){var i=t.pop();r.push(i),a.forEach(i.in.reverse(),e(i)),a.forEach(i.out,n(i))}return a.chain(r).filter(function(t){return!t.merged}).map(function(t){return a.pick(t,["vs","i","barycenter","weight"])}).value()}function o(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}var a=n(0);t.exports=r},function(t,e,n){function r(t,e,n,f){var h=t.children(e),l=t.node(e),d=l?l.borderLeft:void 0,p=l?l.borderRight:void 0,v={};d&&(h=a.filter(h,function(t){return t!==d&&t!==p}));var g=s(t,h);a.forEach(g,function(e){if(t.children(e.v).length){var i=r(t,e.v,n,f);v[e.v]=i,a.has(i,"barycenter")&&o(e,i)}});var y=u(g,n);i(y,v);var _=c(y,f);if(d&&(_.vs=a.flatten([d,_.vs,p],!0),t.predecessors(d).length)){var m=t.node(t.predecessors(d)[0]),x=t.node(t.predecessors(p)[0]);a.has(_,"barycenter")||(_.barycenter=0,_.weight=0),_.barycenter=(_.barycenter*_.weight+m.order+x.order)/(_.weight+2),_.weight+=2}return _}function i(t,e){a.forEach(t,function(t){t.vs=a.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)})}function o(t,e){a.isUndefined(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}var a=n(0),s=n(112),u=n(117),c=n(119);t.exports=r},function(t,e,n){function r(t,e){var n=s.partition(t,function(t){return a.has(t,"barycenter")}),r=n.lhs,u=a.sortBy(n.rhs,function(t){return-t.i}),c=[],f=0,h=0,l=0;r.sort(o(!!e)),l=i(c,u,l),a.forEach(r,function(t){l+=t.vs.length,c.push(t.vs),f+=t.barycenter*t.weight,h+=t.weight,l=i(c,u,l)});var d={vs:a.flatten(c,!0)};return h&&(d.barycenter=f/h,d.weight=h),d}function i(t,e,n){for(var r;e.length&&(r=a.last(e)).i<=n;)e.pop(),t.push(r.vs),n++;return n}function o(t){return function(e,n){return e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}}var a=n(0),s=n(2);t.exports=r},function(t,e,n){function r(t){var e=o(t);a.forEach(t.graph().dummyChains,function(n){for(var r=t.node(n),o=r.edgeObj,a=i(t,e,o.v,o.w),s=a.path,u=a.lca,c=0,f=s[c],h=!0;n!==o.w;){if(r=t.node(n),h){for(;(f=s[c])!==u&&t.node(f).maxRank<r.rank;)c++;f===u&&(h=!1)}if(!h){for(;c<s.length-1&&t.node(f=s[c+1]).minRank<=r.rank;)c++;f=s[c]}t.setParent(n,f),n=t.successors(n)[0]}})}function i(t,e,n,r){var i,o,a=[],s=[],u=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);i=n;do i=t.parent(i),a.push(i);while(i&&(e[i].low>u||c>e[i].lim));for(o=i,i=r;(i=t.parent(i))!==o;)s.push(i);return{path:a.concat(s.reverse()),lca:o}}function o(t){function e(i){var o=r;a.forEach(t.children(i),e),n[i]={low:o,lim:r++}}var n={},r=0;return a.forEach(t.children(),e),n}var a=n(0);t.exports=r},function(t,e,n){"use strict";function r(t,e){function n(e,n){var i=0,s=0,u=e.length,c=y.last(n);return y.forEach(n,function(e,f){var h=o(t,e),l=h?t.node(h).order:u;(h||e===c)&&(y.forEach(n.slice(s,f+1),function(e){y.forEach(t.predecessors(e),function(n){var o=t.node(n),s=o.order;!(s<i||l<s)||o.dummy&&t.node(e).dummy||a(r,n,e)})}),s=f+1,i=l)}),n}var r={};return y.reduce(e,n),r}function i(t,e){function n(e,n,r,o,s){var u;y.forEach(y.range(n,r),function(n){u=e[n],t.node(u).dummy&&y.forEach(t.predecessors(u),function(e){var n=t.node(e);n.dummy&&(n.order<o||n.order>s)&&a(i,e,u)})})}function r(e,r){var i,o=-1,a=0;return y.forEach(r,function(s,u){if("border"===t.node(s).dummy){var c=t.predecessors(s);c.length&&(i=t.node(c[0]).order,n(r,a,u,o,i),a=u,o=i)}n(r,a,r.length,i,e.length)}),r}var i={};return y.reduce(e,r),i}function o(t,e){if(t.node(e).dummy)return y.find(t.predecessors(e),function(e){return t.node(e).dummy})}function a(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function s(t,e,n){if(e>n){var r=e;e=n,n=r}return y.has(t[e],n)}function u(t,e,n,r){var i={},o={},a={};return y.forEach(e,function(t){y.forEach(t,function(t,e){i[t]=t,o[t]=t,a[t]=e})}),y.forEach(e,function(t){var e=-1;y.forEach(t,function(t){var u=r(t);if(u.length){u=y.sortBy(u,function(t){return a[t]});for(var c=(u.length-1)/2,f=Math.floor(c),h=Math.ceil(c);f<=h;++f){var l=u[f];o[t]===t&&e<a[l]&&!s(n,t,l)&&(o[l]=t,o[t]=i[t]=i[l],e=a[l])}}})}),{root:i,align:o}}function c(t,e,n,r,i){function o(t,e){for(var n=c.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}function a(t){u[t]=c.inEdges(t).reduce(function(t,e){return Math.max(t,u[e.v]+c.edge(e))},0)}function s(e){var n=c.outEdges(e).reduce(function(t,e){return Math.min(t,u[e.w]-c.edge(e))},Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==h&&(u[e]=Math.max(u[e],n))}var u={},c=f(t,e,n,i),h=i?"borderLeft":"borderRight";return o(a,y.bind(c.predecessors,c)),o(s,y.bind(c.successors,c)),y.forEach(r,function(t){u[t]=u[n[t]]}),u}function f(t,e,n,r){var i=new _,o=t.graph(),a=v(o.nodesep,o.edgesep,r);return y.forEach(e,function(e){var r;y.forEach(e,function(e){var o=n[e];if(i.setNode(o),r){var s=n[r],u=i.edge(s,o);i.setEdge(s,o,Math.max(a(t,e,r),u||0))}r=e})}),i}function h(t,e){return y.minBy(y.values(e),function(e){var n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return y.forIn(e,function(e,i){var o=g(t,i)/2;n=Math.max(e+o,n),r=Math.min(e-o,r)}),n-r})}function l(t,e){var n=y.values(e),r=y.min(n),i=y.max(n);y.forEach(["u","d"],function(n){y.forEach(["l","r"],function(o){var a,s=n+o,u=t[s];if(u!==e){var c=y.values(u);a="l"===o?r-y.min(c):i-y.max(c),a&&(t[s]=y.mapValues(u,function(t){return t+a}))}})})}function d(t,e){return y.mapValues(t.ul,function(n,r){if(e)return t[e.toLowerCase()][r];var i=y.sortBy(y.map(t,r));return(i[1]+i[2])/2})}function p(t){var e,n=m.buildLayerMatrix(t),o=y.merge(r(t,n),i(t,n)),a={};y.forEach(["u","d"],function(r){e="u"===r?n:y.values(n).reverse(),y.forEach(["l","r"],function(n){"r"===n&&(e=y.map(e,function(t){return y.values(t).reverse()}));var i=y.bind("u"===r?t.predecessors:t.successors,t),s=u(t,e,o,i),f=c(t,e,s.root,s.align,"r"===n);"r"===n&&(f=y.mapValues(f,function(t){return-t})),a[r+n]=f})});var s=h(t,a);return l(a,s),d(a,t.graph().align)}function v(t,e,n){return function(r,i,o){var a,s=r.node(i),u=r.node(o),c=0;if(c+=s.width/2,y.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2}if(a&&(c+=n?a:-a),a=0,c+=(s.dummy?e:t)/2,c+=(u.dummy?e:t)/2,c+=u.width/2,y.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":a=u.width/2;break;case"r":a=-u.width/2}return a&&(c+=n?a:-a),a=0,c}}function g(t,e){return t.node(e).width}var y=n(0),_=n(4).Graph,m=n(2);t.exports={positionX:p,findType1Conflicts:r,findType2Conflicts:i,addConflict:a,hasConflict:s,verticalAlignment:u,horizontalCompaction:c,alignCoordinates:l,findSmallestWidthAlignment:h,balance:d}},function(t,e,n){"use strict";function r(t){t=a.asNonCompoundGraph(t),i(t),o.forEach(s(t),function(e,n){t.node(n).x=e})}function i(t){var e=a.buildLayerMatrix(t),n=t.graph().ranksep,r=0;o.forEach(e,function(e){var i=o.max(o.map(e,function(e){return t.node(e).height}));o.forEach(e,function(e){t.node(e).y=r+i/2}),r+=i+n})}var o=n(0),a=n(2),s=n(121).positionX;t.exports=r},function(t,e,n){"use strict";function r(t){switch(t.graph().ranker){case"network-simplex":o(t);break;case"tight-tree":i(t);break;case"longest-path":f(t);break;default:o(t)}}function i(t){s(t),u(t)}function o(t){c(t)}var a=n(9),s=a.longestPath,u=n(28),c=n(124);t.exports=r;var f=s},function(t,e,n){"use strict";function r(t){t=b(t),_(t);var e=g(t);s(e),i(e,t);for(var n,r;n=c(e);)r=f(e,t,n),h(e,t,n,r)}function i(t,e){var n=x(t,t.nodes());n=n.slice(0,n.length-1),v.forEach(n,function(n){o(t,e,n)})}function o(t,e,n){var r=t.node(n),i=r.parent;t.edge(n,i).cutvalue=a(t,e,n)}function a(t,e,n){var r=t.node(n),i=r.parent,o=!0,a=e.edge(n,i),s=0;return a||(o=!1,a=e.edge(i,n)),s=a.weight,v.forEach(e.nodeEdges(n),function(r){var a=r.v===n,u=a?r.w:r.v;if(u!==i){var c=a===o,f=e.edge(r).weight;if(s+=c?f:-f,d(t,n,u)){var h=t.edge(n,u).cutvalue;s+=c?-h:h}}}),s}function s(t,e){arguments.length<2&&(e=t.nodes()[0]),u(t,{},1,e)}function u(t,e,n,r,i){var o=n,a=t.node(r);return e[r]=!0,v.forEach(t.neighbors(r),function(i){v.has(e,i)||(n=u(t,e,n,i,r))}),a.low=o,a.lim=n++,i?a.parent=i:delete a.parent,n}function c(t){return v.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function f(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var o=t.node(r),a=t.node(i),s=o,u=!1;o.lim>a.lim&&(s=a,u=!0);var c=v.filter(e.edges(),function(e){return u===p(t,t.node(e.v),s)&&u!==p(t,t.node(e.w),s)});return v.minBy(c,function(t){return y(e,t)})}function h(t,e,n,r){var o=n.v,a=n.w;t.removeEdge(o,a),t.setEdge(r.v,r.w,{}),s(t),i(t,e),l(t,e)}function l(t,e){var n=v.find(t.nodes(),function(t){return!e.node(t).parent}),r=m(t,n);r=r.slice(1),v.forEach(r,function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)})}function d(t,e,n){return t.hasEdge(e,n)}function p(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}var v=n(0),g=n(28),y=n(9).slack,_=n(9).longestPath,m=n(4).alg.preorder,x=n(4).alg.postorder,b=n(2).simplify;t.exports=r,r.initLowLimValues=s,r.initCutValues=i,r.calcCutValue=a,r.leaveEdge=c,r.enterEdge=f,r.exchangeEdges=h},function(t,e){t.exports="0.8.2"},function(t,e,n){var r=n(136);t.exports={Graph:r.Graph,json:n(137),alg:n(131),version:r.version}},function(t,e,n){function r(t){function e(o){i.has(r,o)||(r[o]=!0,n.push(o),i.each(t.successors(o),e),i.each(t.predecessors(o),e))}var n,r={},o=[];return i.each(t.nodes(),function(t){n=[],e(t),n.length&&o.push(n)}),o}var i=n(3);t.exports=r},function(t,e,n){function r(t,e,n){return o.transform(t.nodes(),function(r,o){r[o]=i(t,o,e,n)},{})}var i=n(30),o=n(3);t.exports=r},function(t,e,n){function r(t){return i.filter(o(t),function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})}var i=n(3),o=n(31);t.exports=r},function(t,e,n){function r(t,e,n){return i(t,e||a,n||function(e){return t.outEdges(e)})}function i(t,e,n){var r={},i=t.nodes();return i.forEach(function(t){r[t]={},r[t][t]={distance:0},i.forEach(function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})}),n(t).forEach(function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}})}),i.forEach(function(t){var e=r[t];i.forEach(function(n){var o=r[n];i.forEach(function(n){var r=o[t],i=e[n],a=o[n],s=r.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)})})}),r}var o=n(3);t.exports=r;var a=o.constant(1)},function(t,e,n){t.exports={components:n(127),dijkstra:n(30),dijkstraAll:n(128),findCycles:n(129),floydWarshall:n(130),isAcyclic:n(132),postorder:n(133),preorder:n(134),prim:n(135),tarjan:n(31),topsort:n(32)}},function(t,e,n){function r(t){try{i(t)}catch(t){if(t instanceof i.CycleException)return!1;throw t}return!0}var i=n(32);t.exports=r},function(t,e,n){function r(t,e){return i(t,e,"post")}var i=n(29);t.exports=r},function(t,e,n){function r(t,e){return i(t,e,"pre")}var i=n(29);t.exports=r},function(t,e,n){function r(t,e){function n(t){var n=t.v===r?t.w:t.v,i=c.priority(n);if(void 0!==i){var o=e(t);o<i&&(u[n]=r,c.decrease(n,o))}}var r,s=new o,u={},c=new a;
if(0===t.nodeCount())return s;i.each(t.nodes(),function(t){c.add(t,Number.POSITIVE_INFINITY),s.setNode(t)}),c.decrease(t.nodes()[0],0);for(var f=!1;c.size()>0;){if(r=c.removeMin(),i.has(u,r))s.setEdge(r,u[r]);else{if(f)throw new Error("Input graph is not connected: "+t);f=!0}t.nodeEdges(r).forEach(n)}return s}var i=n(3),o=n(17),a=n(33);t.exports=r},function(t,e,n){t.exports={Graph:n(17),version:n(138)}},function(t,e,n){function r(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:i(t),edges:o(t)};return s.isUndefined(t.graph())||(e.value=s.clone(t.graph())),e}function i(t){return s.map(t.nodes(),function(e){var n=t.node(e),r=t.parent(e),i={v:e};return s.isUndefined(n)||(i.value=n),s.isUndefined(r)||(i.parent=r),i})}function o(t){return s.map(t.edges(),function(e){var n=t.edge(e),r={v:e.v,w:e.w};return s.isUndefined(e.name)||(r.name=e.name),s.isUndefined(n)||(r.value=n),r})}function a(t){var e=new u(t.options).setGraph(t.value);return s.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),s.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}var s=n(3),u=n(17);t.exports={write:r,read:a}},function(t,e){t.exports="2.1.5"},function(t,e){t.exports="precision mediump float;\n\n\nuniform vec2 u_cameraSize;\nuniform float u_repeatX;\nuniform float u_repeatY;\nuniform float u_alpha;\nuniform float u_hasBg;\nuniform vec4 u_bgColor;\nuniform float u_rotation;\nuniform sampler2D u_bgTexture;\n\nvarying vec2 uv;\n\n#include<lib>\n\nvoid main() {\n    vec4 color = u_bgColor/255.0;\n    if(u_hasBg == 1.0){\n        vec2 _uv = mod(uv * u_cameraSize,vec2(u_repeatX,u_repeatY)) / vec2(u_repeatX,u_repeatY);\n        vec4 txColor = texture2D(u_bgTexture,_uv);\n        // txColor.rgb = txColor.rgb * txColor.a;\n        // txColor.a = 1.0;\n        // color = mix(color,txColor,0.5);\n        color = mix(color,txColor,txColor.a * u_alpha);\n        // color = vec4(txColor.a,0,0,1);\n    }\n    gl_FragColor = color;\n        // gl_FragColor = vec4(250,100,100,1);\n    \n\n    \n}\n"},function(t,e){t.exports="precision mediump float;\n\nattribute vec2 a_p;\nattribute vec2 a_uv;\n\nuniform float u_rotation;\n\nvarying vec2 uv;\n\n#include<lib>\n\nvoid main() {\n\n    gl_Position = vec4(rotateV2(a_p*2.0,u_rotation*PI180),0,1);\n\n    uv = a_uv;\n}\n"},function(t,e){t.exports="// const\nconst float PI = 3.1415926535897932384626433832795;\nconst float PI_2 = 1.57079632679489661923;\nconst float PI_4 = 0.785398163397448309616;\nfloat PI180 = float(PI / 180.0);\n\n\n// 函数\n\nfloat rescale(float s1,float s2,float t1,float t2,float value){\n    return t1 + (value-s1)/(s2-s1)*(t2-t1);\n}\n\nmat3 rotation(float angle ) {\n\treturn mat3(\tcos(angle),\t\t-sin(angle),\t0,\n\t\t\t \t\tsin(angle),\t\tcos(angle),\t\t0,\n\t\t\t\t\t\t\t0,\t\t\t\t0,\t\t1);\n}\n\nvec2 rotateV2(vec2 v,float angle){\n    return (vec3(v,1) * rotation(angle)).xy;\n}\n\nfloat getVectorsAngle(vec2 v1,vec2 v2){\n    float _cos = (v1.x*v2.x+v1.y*v2.y)/(length(v1)*length(v2));\n    return acos(_cos);\n}\n\nvec2 getPointOnQuadraticCurve(float t,vec2 p1,vec2 p2,vec2 c) {\n    return vec2(\n        pow(1.0 - t, 2.0) * p1.x + 2.0 * (1.0 - t) * t * c.x + pow(t, 2.0) * p2.x,\n        pow(1.0 - t, 2.0) * p1.y + 2.0 * (1.0 - t) * t * c.y + pow(t, 2.0) * p2.y\n    );\n}\n\nvec2 getPointTangentOnQuadraticCurve(float t,vec2 p1,vec2 p2,vec2 c) {\n    vec2 pos1 = getPointOnQuadraticCurve(t,p1,p2,c);\n    vec2 pos2 = getPointOnQuadraticCurve(t+0.001,p1,p2,c);\n    return normalize(pos2 - pos1);\n}\n\nvec2 getControlPos(vec2 p1,vec2 p2,float count,float order,float factor) {\n\n    float ratio = mod(count,2.0) == 1.0 ? 1.0 : -1.0;\n    ratio *= order;\n\n    factor *= ratio * (float(int((count + 1.0) / 2.0)));\n\n    vec2 norV = normalize(vec2(p1.y-p2.y,p2.x-p1.x));\n    return (p1+p2)/2.0 + norV * factor;\n}\n\nvec2 getTextureUV(vec2 uv,vec2 uvStart, vec2 uvSize,vec2 textureSize){\n    return uvStart / textureSize + uv * uvSize / textureSize;\n}\n"},function(t,e){t.exports=" precision mediump float;\n\nvec4 color = vec4(0.8,0.8,0.8,0.8);\n\n\nuniform vec4 u_bg_color;\n\n\nvoid main() {\n    vec4 color = u_bg_color / 255.0;\n    color = vec4(color.rgb * color.a,color.a);\n   gl_FragColor = color;\n}"},function(t,e){t.exports="attribute vec2 a_position;\n//attribute vec2 a_uv;\n\n//varying vec2 v_texCoord;\n//varying float size;\n\nvoid main() {\ngl_Position = vec4(a_position,0,1);\n//v_texCoord = a_uv;\n}\n"},function(t,e){t.exports="\nprecision mediump float;\n\nvarying vec4 baseColor;\n// varying vec2 ctrolPos;\n// varying vec2 sourcePos;\n// varying vec2 targetPos;\n// varying vec2 gridPos;\nvarying vec4 edgePos;\nvarying vec4 ctlGridPos;\nvarying float isArrow; \nvarying float arrowFlag;\nvarying vec4 sizeInfo;\n// varying float sourceSize;\n// varying float targetSize;\n// varying float arrowSize;\n// varying float size;\nvarying float isCurve;\nvarying float discardLen;\nvarying float dashSize;\n\nuniform float u_cameraScale;\n\n\nfloat det(vec2 a, vec2 b) { return a.x*b.y-b.x*a.y; }\n\nvec2 closestPointInSegment( vec2 a, vec2 b )\n{\n  vec2 ba = b - a;\n  return a + ba*clamp( -dot(a,ba)/dot(ba,ba), 0.0, 1.0 );\n}\n\n// From: http://research.microsoft.com/en-us/um/people/hoppe/ravg.pdf\nvec2 get_distance_vector(vec2 b0, vec2 b1, vec2 b2) {\n\t\n  float a=det(b0,b2), b=2.0*det(b1,b0), d=2.0*det(b2,b1); \n  \n  if( abs(2.0*a+b+d) < 1000.0 ) return closestPointInSegment(b0,b2);\n\t\n  float f=b*d-a*a; // \n  vec2 d21=b2-b1, d10=b1-b0, d20=b2-b0;\n  vec2 gf=2.0*(b*d21+d*d10+a*d20);\n  gf=vec2(gf.y,-gf.x); //\n  vec2 pp=-f*gf/dot(gf,gf); // \n  vec2 d0p=b0-pp; // \n  float ap=det(d0p,d20), bp=2.0*det(d10,d0p); // \n  // (note that 2*ap+bp+dp=2*a+b+d=4*area(b0,b1,b2))\n  float t=clamp((ap+bp)/(2.0*a+b+d), 0.0 ,1.0); // \n  return mix(mix(b0,b1,t),mix(b1,b2,t),t); // \n\n}\n\nfloat approx_distance(vec2 p, vec2 b0, vec2 b1, vec2 b2) {\n  return length(get_distance_vector(b0-p, b1-p, b2-p));\n}\n\nvoid main() {\n\n    // varying float sourceSize;\n// varying float targetSize;\n// varying float arrowSize;\n// varying float size;\n    float sourceSize = sizeInfo.x;\n    float targetSize = sizeInfo.y;\n    float arrowSize = sizeInfo.z;\n    float size = sizeInfo.w;\n\n    vec2 sourcePos = edgePos.xy;\n    vec2 targetPos = edgePos.zw;\n    vec2 gridPos =  ctlGridPos.xy;\n    vec2 ctrolPos =  ctlGridPos.zw;\n\n    float dashRatio = 0.6;\n\n    // curve edge\n    if(isArrow == 0.0 && isCurve == 1.0){\n        if(length(gridPos-sourcePos) < sourceSize || length(gridPos - targetPos) < discardLen) discard;\n\n        // dashed\n        if(dashSize > 0.0){\n            float len = min(length(gridPos-sourcePos),length(gridPos - targetPos));\n            if(mod(len,dashSize)/dashSize > dashRatio) discard;\n        }\n\n        float d = approx_distance(gridPos, sourcePos, ctrolPos, targetPos);\n        float thickness = size / 2.0;\n\t\n        float a;\n        float blur = 2.0 * u_cameraScale;\n        \n        if(d > thickness + blur/2.0) discard;\n        else{\n            a = 1.0 - smoothstep(thickness-blur/2.0, thickness+blur/2.0,d);\n        }\n\n        gl_FragColor = baseColor * a;\n        \n        // gl_FragColor = vec4(a,0,0,1.0);\n\t\n    }else{ // line and arrow\n        if(isArrow == 1.0 && arrowFlag == 0.0) discard;\n\n        if(isArrow == 1.0 &&  arrowSize == 0.0) discard;\n\n        // line dashed\n        if(isArrow == 0.0 &&  dashSize > 0.0 && mod(length(gridPos-sourcePos),dashSize) / dashSize > dashRatio) discard;\n\n         gl_FragColor = baseColor;\n    }\n   \n}\n"},function(t,e){t.exports="precision mediump float;\n\nattribute vec2 a_p;\nattribute vec2 a_uv;\nattribute float a_flag;\n\n// attribute vec4 a_sourcePosDest;\n// attribute vec2 a_sourcePosDest1;\n// attribute vec4 a_targetPosDest;\n// attribute vec2 a_targetPosDest1;\nattribute float a_animation;\n\nattribute vec4 a_sourcePos;\nattribute vec4 a_sourcePos1;\nattribute vec4 a_targetPos;\nattribute vec4 a_targetPos1;\n\nattribute vec4 a_color;\nattribute vec2 a_curveInfo;\nattribute float a_size;\nattribute vec4 a_sizeInfo;\nattribute float a_isArrow;\nattribute float a_isCurve;\n\n\nuniform mat3 u_matrix;\nuniform float u_curveFactor;\nuniform float u_time;\n\nvarying vec4 baseColor;\n// varying vec2 ctrolPos;\n// varying vec2 gridPos;\n// varying vec2 sourcePos;\n// varying vec2 targetPos;\nvarying vec4 edgePos;\nvarying vec4 ctlGridPos;\nvarying float isArrow;\nvarying float arrowFlag;\nvarying vec4 sizeInfo;\n// varying float sourceSize;\n// varying float targetSize;\n// varying float arrowSize;\n// varying float size;\nvarying float isCurve;\nvarying float discardLen;\nvarying float dashSize;\n\n#include<lib>\n\nvec2 scaleArrow(vec2 p){\n    // scalse arrow\n    vec2 pos = rotateV2(p,45.0*PI180);\n    pos.x = pos.x * 1.44;\n    pos = pos / 1.44;\n    return pos;\n}\n\nvoid pathCrossPos(vec2 p1,vec2 p2,vec2 p3,float size, vec2 alignDir, out vec2 out1,out vec2 out2){\n    vec2 v1 = p1 - p2;\n    vec2 v2 = p3 - p2;\n\n    float scaleSize;\n    vec2 dir = (normalize(v1) + normalize(v2))/2.0;\n\n    if(length(v1) == 0.0){\n         dir = rotateV2(v2,90.0 * PI180); \n         scaleSize = size;\n    }else if(length(v2) == 0.0){\n         dir = rotateV2(v1,90.0 * PI180 * -1.0);\n         scaleSize = size;\n    }else if(abs(dot(v1,v2)) == length(v1)*length(v2)){\n         dir = rotateV2(v1,90.0 * PI180 * -1.0);\n         scaleSize = size;\n    }\n    else{\n        float angle = 90.0*PI180 - getVectorsAngle(normalize(v1) , normalize(v2)) / 2.0;\n        scaleSize = size / cos(angle);\n    }\n\n    dir = normalize(dir);\n\n    if(dot(alignDir,dir) < 0.0) dir = -1.0 * dir;\n\n\n    out1 = p2 + dir * scaleSize / 2.0;\n    out2 = p2 - dir * scaleSize / 2.0;\n}\n\nvoid main() {\n\n    discardLen = 0.0;\n    \n    vec2 gridPos;\n\n    float a_dashSize = a_sizeInfo.r;\n    float a_arrowSize = a_sizeInfo.g;\n    float a_sourceSize = a_sizeInfo.b;\n    float a_targetSize = a_sizeInfo.a;\n\n    // pos animation \n    vec2 _sourcePos = a_sourcePos.xy;\n    vec2 _targetPos = a_targetPos.xy;\n    if(a_animation > 0.0){\n        _sourcePos = mix(_sourcePos,a_sourcePos.zw,u_time);\n        _targetPos = mix(_targetPos,a_targetPos.zw,u_time);\n    }\n\n    float arrowNum = a_flag > 3.0 ? 1.0 : 0.0;\n\n    vec2 a_ctrolPos = getControlPos(_sourcePos,_targetPos,a_curveInfo.x,a_curveInfo.y,u_curveFactor);\n\n    vec2 dir = _targetPos - _sourcePos;\n    //angle\n    float angle = getVectorsAngle(dir,vec2(1,0));\n    if(dir.y < 0.0) angle = 2.0*PI - angle;\n\n    // line\n    if(a_isCurve == 0.0){\n        vec2 startPos = _sourcePos + normalize(dir) * a_sourceSize;\n        vec2 endPos = _targetPos - normalize(dir) * (a_targetSize + a_arrowSize);\n\n        if(arrowNum == 1.0 && a_isArrow == 1.0){//arrow\n            vec2 pos = scaleArrow(a_p);\n            vec2 rotatePos = rotateV2(pos * a_arrowSize,angle);\n            gl_Position = vec4((u_matrix*vec3(rotatePos + endPos,1)).xy,0,1);\n        }else{// edge\n            vec2 scale = vec2(length(dir) - a_arrowSize - a_sourceSize - a_targetSize ,a_size);\n            // center pos\n            vec2 position = (startPos + endPos) / 2.0;\n\n            vec2 rotatePos =  rotateV2(a_p * scale ,angle);\n            gridPos = rotatePos + position;\n\n            gl_Position = vec4((u_matrix*vec3(gridPos,1)).xy,0,1);\n        }\n           \n    }else if(a_isCurve == 1.0){// curve\n        if(arrowNum == 1.0 && a_isArrow == 1.0){//arrow\n            vec2 pos = scaleArrow(a_p);\n             float arrowPosRatio = (1.0 - (a_targetSize + a_arrowSize)/length(_targetPos - a_ctrolPos))*0.5 + 0.5;\n             vec2 arrowPos = getPointOnQuadraticCurve(arrowPosRatio,_sourcePos,_targetPos,a_ctrolPos);\n             vec2 arrowTangent = getPointTangentOnQuadraticCurve(arrowPosRatio,_sourcePos,_targetPos,a_ctrolPos);\n\n            vec2 arrowDir = arrowTangent;\n             float angle = getVectorsAngle(arrowDir,vec2(1,0));\n             if(arrowDir.y < 0.0) angle = 2.0*PI - angle;\n\n             vec2 rotatePos = rotateV2(pos * a_arrowSize,angle);\n             gl_Position = vec4((u_matrix*vec3(rotatePos + arrowPos,1)).xy,0,1);\n        }else{// edge\n            vec2 position = (_targetPos + _sourcePos) / 2.0;\n            float width = length(dir);\n            float height = length(a_ctrolPos-position)*2.0;\n\n            vec2 rotatePos =  rotateV2(a_p * vec2(width,height) ,angle);\n            gridPos = rotatePos + position;\n            gl_Position = vec4((u_matrix*vec3(gridPos,1)).xy,0,1);\n\n            float arrowPosRatio = (1.0 - (a_targetSize + a_arrowSize)/length(_targetPos - a_ctrolPos))*0.5 + 0.5;\n            vec2 arrowPos = getPointOnQuadraticCurve(arrowPosRatio,_sourcePos,_targetPos,a_ctrolPos);\n            discardLen = length(arrowPos - _targetPos);\n        }\n    }else if(a_isCurve == 2.0){// path\n        if(arrowNum == 1.0 && a_isArrow == 1.0){//arrow\n            vec2 pos = scaleArrow(a_p);\n\n            vec2 arrowPos = _targetPos;\n            vec2 dir = _targetPos - _sourcePos;\n            //angle\n            float angle = getVectorsAngle(dir,vec2(1,0));\n            if(dir.y < 0.0) angle = 2.0*PI - angle;\n            vec2 rotatePos = rotateV2(pos * a_arrowSize,angle);\n            gl_Position = vec4((u_matrix*vec3(rotatePos + arrowPos,1)).xy,0,1);\n        }else{// edge\n            vec2 p1 = a_sourcePos.xy;\n            vec2 p2 = a_sourcePos1.xy;\n            vec2 p3 = a_targetPos.xy;\n            vec2 p4 = a_targetPos1.xy;\n\n            vec2 _p1 = a_sourcePos.zw;\n            vec2 _p2 = a_sourcePos1.zw;\n            vec2 _p3 = a_targetPos.zw;\n            vec2 _p4 = a_targetPos1.zw;\n            // vec2 _p1,_p2,_p3,_p4;\n\n            if(a_animation > 0.0){\n                p1 = mix(p1,_p1,u_time);\n                p2 = mix(p2,_p2,u_time);\n                p3 = mix(p3,_p3,u_time);\n                p4 = mix(p4,_p4,u_time);\n            }\n\n            vec2 alignDir = cross(vec3(p3 - p2,0),vec3(0,0,1)).xy;\n\n            pathCrossPos(p1,p2,p3,a_size,alignDir,_p1,_p2);\n            pathCrossPos(p2,p3,p4,a_size,alignDir,_p3,_p4);\n\n            if(a_flag == 1.0) gridPos = _p1;\n            if(a_flag == 2.0 || a_flag == 4.0) gridPos = _p3;\n            if(a_flag == 3.0 || a_flag == 5.0) gridPos = _p2;\n            if(a_flag == 6.0) gridPos = _p4;\n\n            gl_Position = vec4((u_matrix*vec3(gridPos,1)).xy,0,1);\n\n            _targetPos = p3;\n\n            // if(a_flag == 1.0 || a_flag == 3.0 || a_flag == 5.0){\n            //     gridPos = (_p1 + _p2) / 2.0;\n            // }else{\n            //     gridPos = (_p3 + _p4) / 2.0;\n            // }\n\n        }\n    }\n\n    isArrow = a_isArrow;\n    isCurve = a_isCurve;\n    arrowFlag = arrowNum;\n\n    // sourceSize = a_sourceSize;\n    // targetSize = a_targetSize;\n    // arrowSize = a_arrowSize;\n    // size = a_size;\n    sizeInfo.x = a_sourceSize;\n    sizeInfo.y = a_targetSize;\n    sizeInfo.z = a_arrowSize;\n    sizeInfo.w = a_size;\n\n\tbaseColor = a_color / 255.0;\n    // ctrolPos = a_ctrolPos;\n    // sourcePos = _sourcePos;\n    // targetPos = _targetPos;\n    edgePos.xy = _sourcePos;\n    edgePos.zw = _targetPos;\n\n    ctlGridPos.xy = gridPos;\n    ctlGridPos.zw = a_ctrolPos;\n    \n    dashSize = a_dashSize;\n}\n"},function(t,e){t.exports="precision mediump float;\n\nvarying vec4 baseColor;\nvarying vec4 bgColor;\nvarying vec2 uv;\nvarying vec2 uvStart;\nvarying float uvWidth;\nvarying float uvHeight;\nvarying float charSize;\n\nuniform float u_cameraScale;\nuniform vec2 u_textTextureSize;\nuniform sampler2D u_textTexture;\n\n\n#include<lib>\n\n\nvoid main() {\n    \n     bool isBg = (uvWidth == 0.0 && uvHeight == 0.0); \n\n    if(isBg){\n        gl_FragColor = bgColor;\n    }\n    else {\n        vec2 textUV = getTextureUV(uv,uvStart,vec2(uvWidth,uvHeight),u_textTextureSize);\n        float dist = texture2D(u_textTexture, textUV).r;\n\n        float cutoff = 0.75;\n        float gamma = 3.0*u_cameraScale/charSize;\n        float alpha = smoothstep(cutoff - gamma, cutoff + gamma, dist);\n        gl_FragColor = baseColor * alpha;\n   \n    }\n}\n"},function(t,e){t.exports="precision mediump float;\n\nattribute vec2 a_p;\nattribute vec2 a_uv;\n\nattribute vec2 a_sourcePosDest;\nattribute vec2 a_targetPosDest;\nattribute vec2 a_sourcePos;\nattribute vec2 a_targetPos;\nattribute vec2 a_curveInfo;\nattribute float a_animation;\n\nattribute vec2 a_dir;\nattribute vec2 a_center;\nattribute vec2 a_position;\nattribute vec4 a_color;\nattribute vec4 a_uvColor;\nattribute vec2 a_size;\n\nattribute vec2 a_uvStart;\nattribute vec2 a_uvInfo;\n// attribute float a_uvWidth;\n// attribute float a_uvHeight;\n\nuniform mat3 u_matrix;\nuniform float u_curveFactor;\nuniform float u_time;\n\nvarying vec4 baseColor;\nvarying vec4 bgColor;\nvarying vec2 uv;\nvarying vec2 uvStart;\nvarying float uvWidth;\nvarying float uvHeight;\nvarying float charSize;\n\n#include<lib>\n\nvoid main() {\n\n    // layout animation\n    vec2 _sourcePos = a_sourcePos;\n    vec2 _targetPos = a_targetPos;\n    if(a_animation > 0.0){\n        _sourcePos = mix(_sourcePos,a_sourcePosDest,u_time);\n        _targetPos = mix(_targetPos,a_targetPosDest,u_time);\n    }\n\n    vec2 center,dir,ctrolPos;\n    if(a_curveInfo.x > 0.0){\n       ctrolPos = getControlPos(_sourcePos,_targetPos,a_curveInfo.x,a_curveInfo.y,u_curveFactor);\n       center = getPointOnQuadraticCurve(0.5,_sourcePos,_targetPos,ctrolPos);\n       dir = getPointTangentOnQuadraticCurve(0.5,_sourcePos,_targetPos,ctrolPos);\n    }else{\n        center = (_sourcePos + _targetPos) / 2.0;\n        dir = _targetPos - _sourcePos;\n    }\n\n\n\n    float angle = getVectorsAngle(dir,vec2(1,0));\n    if(dir.y < 0.0) angle = 2.0*PI - angle;\n    if(angle > 0.5*PI && angle < 1.5*PI) angle = angle - PI;\n\n\n    vec2 pos = a_p * a_size + a_position;\n    vec2 rotatedPos = rotateV2(pos,angle);\n\n    gl_Position = vec4((u_matrix*vec3((rotatedPos+ center),1)).xy,0,1);\n\n\tbaseColor = a_uvColor / 255.0;\n\tbgColor = a_color / 255.0;\n\n    bgColor *= bgColor.a;\n\n    uv = a_uv;\n    uvStart = a_uvStart;\n    uvWidth = a_uvInfo.x;\n    uvHeight = a_uvInfo.y;\n    charSize = a_size.y;\n}\n"},function(t,e){t.exports="precision mediump float;\n\nvarying vec4 baseColor;\nvarying vec4 uvColor;\nvarying vec2 uv;\nvarying vec4 borderColor;\nvarying float borderSize;\nvarying vec2 size;\nvarying vec2 uvStart;\n// varying float uvWidth;\n// varying float uvHeight;\nvarying vec2 uvInfo;\nvarying float isText;\n\nuniform float u_cameraScale;\nuniform sampler2D u_iconsTexture;\nuniform sampler2D u_textTexture;\nuniform vec2 u_textTextureSize;\nuniform vec2 u_iconTextureSize;\n\n#include<lib>\n\nint getTypeCircle(float borderSize, float size ,float r, vec2 uv){\n    int type = 0;//default base\n    float borderRatio = (size - borderSize) / size;\n\n    if(r > borderRatio) type = 1; //border\n    else type = 0; //base\n    \n\n    return type;\n}\n\n\nvoid main() {\n    float uvWidth = uvInfo.x;\n    float uvHeight = uvInfo.y;\n\n\tfloat smoothSize = 1.0;\n    vec4 color = baseColor;\n    bool hasIcon = uvWidth > 0.0 && uvHeight > 0.0;\n\n    // node tag text\n    if(isText > 0.0){\n        // float u = uvStart.x + uv.x * uvWidth;\n        // float v = uvStart.y + uv.y * uvHeight;\n        vec2 textUV = getTextureUV(uv,uvStart,vec2(uvWidth,uvHeight),u_textTextureSize);\n        float dist = texture2D(u_textTexture, textUV).r;\n\n        float cutoff = 0.75;\n        float gamma = 3.0*u_cameraScale/size.y;\n        float alpha = smoothstep(cutoff - gamma, cutoff + gamma, dist);\n        // gl_FragColor = mix(vec4(1,0,0,1),vec4(0,0,0,1),alpha);\n        gl_FragColor = uvColor * alpha;\n        return;\n    }\n\n    vec2 cxy = 2.0 * uv - 1.0;\n    float r = length(cxy);\n    float blurOffset = smoothSize / (size.x / u_cameraScale);\n    float blurRatio = 1.0;\n\n    if(r > 1.0 ){\n        discard;\n    }\n\n    int type = getTypeCircle(borderSize,size.x,r,uv);\n\n    // base\n    if(type == 0){\n        color = baseColor;\n\n        float _size = size.x;\n        float iconRatio = ((_size - borderSize) * (1.0 - cos(45.0 * PI180)) + borderSize) / (_size * 2.0 ) ;\n\n        // icon\n        if(hasIcon \n        && uv.x > iconRatio && uv.x < (1.0-iconRatio) \n        && uv.y > iconRatio && uv.y < (1.0-iconRatio)\n        ){\n            float x = rescale(iconRatio,1.0-iconRatio,0.0,1.0,uv.x);\n            float y = rescale(iconRatio,1.0-iconRatio,0.0,1.0,uv.y);\n            \n            vec2 textUV = getTextureUV(vec2(x,y),uvStart,vec2(uvWidth,uvHeight),u_iconTextureSize);\n            float alpha = 1.0;\n\n            alpha = texture2D(u_iconsTexture,textUV).r;\n            \n            color =  mix(baseColor,uvColor,alpha);\n        }\n\n    }\n    //border\n    if(type == 1){\n        color = borderColor;\n    }\n\n    //blur\n    if(r > 1.0-blurOffset){\n        blurRatio = 1.0 -  smoothstep(1.0-blurOffset, 1.0, r) ;\n    }\n\n    gl_FragColor = color * blurRatio;\n}\n"},function(t,e){t.exports="precision mediump float;\n\nattribute vec2 a_p;\nattribute vec2 a_uv;\n\nattribute vec2 a_position;\nattribute vec2 a_positionDest;\nattribute float a_animation;\nattribute vec4 a_color;\nattribute vec4 a_uvColor;\nattribute vec2 a_size;\nattribute vec4 a_borderColor;\nattribute float a_borderSize;\nattribute float a_text;\n\n\n\nattribute vec2 a_uvStart;\nattribute float a_uvWidth;\nattribute float a_uvHeight;\n\nuniform mat3 u_matrix;\nuniform float u_time;\n\nvarying vec4 baseColor;\nvarying vec4 uvColor;\nvarying vec2 uv;\nvarying vec4 borderColor;\nvarying vec2 size;\nvarying vec2 uvStart;\nvarying float borderSize;\n// varying float uvWidth;\n// varying float uvHeight;\nvarying vec2 uvInfo;\nvarying float isText;\n\nvoid main() {\n\n    vec2 scale = (a_size + a_borderSize) * 2.0;\n\n    vec2 pos = a_position;\n\n    // layout animaiton\n    if(a_animation > 0.0) pos = mix(a_position,a_positionDest,u_time);\n\n    gl_Position = vec4((u_matrix*vec3((a_p * scale + pos),1)).xy,0,1);\n\n\tbaseColor = a_color / 255.0;\n    uv = a_uv;\n\tborderColor = a_borderColor / 255.0;\n\tborderSize = a_borderSize;\n    size = a_size +  a_borderSize;\n    uvStart = a_uvStart;\n    // uvWidth = a_uvWidth;\n    // uvHeight = a_uvHeight;\n    uvInfo.x = a_uvWidth;\n    uvInfo.y = a_uvHeight;\n    uvColor = a_uvColor / 255.0;\n    isText = a_text;\n}\n"},function(t,e){t.exports="precision mediump float;\n\nvarying vec4 baseColor;\nvarying vec4 bgColor;\nvarying vec2 uv;\nvarying vec2 uvStart;\nvarying float uvWidth;\nvarying float uvHeight;\nvarying float charSize;\n\nuniform float u_cameraScale;\nuniform vec2 u_textTextureSize;\nuniform sampler2D u_textTexture;\n\n\n#include<lib>\n\n\nvoid main() {\n    \n     bool isBg = (uvWidth == 0.0 && uvHeight == 0.0); \n\n    if(isBg){\n        gl_FragColor = bgColor;\n    }\n    else {\n        // float u = uvStart.x + uv.x * uvWidth;\n        // float v = uvStart.y + uv.y * uvHeight;\n        // float dist = texture2D(u_textTexture, vec2(u,v)).r;\n        vec2 textUV = getTextureUV(uv,uvStart,vec2(uvWidth,uvHeight),u_textTextureSize);\n        float dist = texture2D(u_textTexture, textUV).r;\n\n        float cutoff = 0.75;\n        float gamma = 3.0*u_cameraScale/charSize;\n        float alpha = smoothstep(cutoff - gamma, cutoff + gamma, dist);\n        gl_FragColor = baseColor * alpha;\n   \n    }\n}\n"},function(t,e){t.exports="precision mediump float;\n\nattribute vec2 a_p;\nattribute vec2 a_uv;\n\n// animation\nattribute vec2 a_positionDest;\nattribute float a_animation;\n\nattribute vec2 a_nodePos;\nattribute vec2 a_position;\nattribute vec4 a_color;\nattribute vec4 a_uvColor;\nattribute vec2 a_size;\n\nattribute vec2 a_uvStart;\nattribute float a_uvWidth;\nattribute float a_uvHeight;\n\nuniform mat3 u_matrix;\nuniform float u_time;\n\nvarying vec4 baseColor;\nvarying vec4 bgColor;\nvarying vec2 uv;\nvarying vec2 uvStart;\nvarying float uvWidth;\nvarying float uvHeight;\nvarying float charSize;\n\nvoid main() {\n\n    vec2 pos = a_nodePos;\n\n    // layout animaiton\n    if(a_animation > 0.0) pos = mix(pos,a_positionDest,u_time);\n\n\n    gl_Position = vec4((u_matrix*vec3((a_p * a_size + a_position + pos),1)).xy,0,1);\n\n\tbaseColor = a_uvColor / 255.0;\n\tbgColor = a_color / 255.0;\n\n    bgColor *= bgColor.a;\n\n    uv = a_uv;\n    uvStart = a_uvStart;\n    uvWidth = a_uvWidth;\n    uvHeight = a_uvHeight;\n    charSize = a_size.y;\n}\n"},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(153)),r(n(155)),r(n(18)),r(n(35)),r(n(36)),r(n(37)),r(n(7)),r(n(158)),r(n(19)),r(n(38)),r(n(39)),r(n(40)),r(n(8)),r(n(10)),r(n(20)),r(n(154))},function(t,e,n){"use strict";function r(t){return new a(t)}var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(7),a=function(t){function e(e){var n=t.call(this)||this,r=e;return r.trigger&&(n.trigger=r.trigger),r.kick&&(n.kick=r.kick),r.drag&&(n.drag=r.drag),r.on&&(n.on=r.on),n.dragstart=n.dragStart=o.Layout.dragStart,n.dragend=n.dragEnd=o.Layout.dragEnd,n}return i(e,t),e.prototype.trigger=function(t){},e.prototype.kick=function(){},e.prototype.drag=function(){},e.prototype.on=function(t,e){return this},e}(o.Layout);e.LayoutAdaptor=a,e.adaptor=r},function(t,e,n){"use strict";function r(t,e,n,r){t.cola.start(0,0,0,10,!1);var o=i(t.cola.nodes(),t.cola.groups(),n,r);return o.routeEdges(t.powerGraph.powerEdges,e,function(t){return t.source.routerNode.id},function(t){return t.target.routerNode.id})}function i(t,e,n,r){t.forEach(function(t){t.routerNode={name:t.name,bounds:t.bounds.inflate(-n)}}),e.forEach(function(e){e.routerNode={bounds:e.bounds.inflate(-r),children:("undefined"!=typeof e.groups?e.groups.map(function(e){return t.length+e.id}):[]).concat("undefined"!=typeof e.leaves?e.leaves.map(function(t){return t.index}):[])}});var i=t.concat(e).map(function(t,e){return t.routerNode.id=e,t.routerNode});return new s.GridRouter(i,{getChildren:function(t){return t.children},getBounds:function(t){return t.bounds}},n-r)}function o(t,e,n){var r;t.nodes.forEach(function(t,e){return t.index=e}),(new a.Layout).avoidOverlaps(!1).nodes(t.nodes).links(t.links).powerGraphGroups(function(t){r=t,r.groups.forEach(function(t){return t.padding=n})});var i=t.nodes.length,o=[],s=t.nodes.slice(0);return s.forEach(function(t,e){return t.index=e}),r.groups.forEach(function(t){var e=t.index=t.id+i;s.push(t),"undefined"!=typeof t.leaves&&t.leaves.forEach(function(t){return o.push({source:e,target:t.index})}),"undefined"!=typeof t.groups&&t.groups.forEach(function(t){return o.push({source:e,target:t.id+i})})}),r.powerEdges.forEach(function(t){o.push({source:t.source.index,target:t.target.index})}),(new a.Layout).size(e).nodes(s).links(o).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new a.Layout).convergenceThreshold(.001).size(e).avoidOverlaps(!0).nodes(t.nodes).links(t.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(t){r=t,r.groups.forEach(function(t){t.padding=n})}).start(50,0,100,0,!1),powerGraph:r}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(7),s=n(36);e.gridify=r,e.powerGraphGridLayout=o},function(t,e,n){"use strict";function r(t){return!t||i(t)?new o.D3StyleLayoutAdaptor:new a.D3StyleLayoutAdaptor(t)}function i(t){var e=/^3\./;return t.version&&null!==t.version.match(e)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(156),a=n(157);e.d3adaptor=r},function(t,e,n){"use strict";function r(){return new a}var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(7),a=function(t){function e(){var e=t.call(this)||this;e.event=d3.dispatch(o.EventType[o.EventType.start],o.EventType[o.EventType.tick],o.EventType[o.EventType.end]);var n=e;return e.drag=function(){if(!t)var t=d3.behavior.drag().origin(o.Layout.dragOrigin).on("dragstart.d3adaptor",o.Layout.dragStart).on("drag.d3adaptor",function(t){o.Layout.drag(t,d3.event),n.resume()}).on("dragend.d3adaptor",o.Layout.dragEnd);return arguments.length?void this.call(t):t},e}return i(e,t),e.prototype.trigger=function(t){var e={type:o.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event[e.type](e)},e.prototype.kick=function(){var e=this;d3.timer(function(){return t.prototype.tick.call(e)})},e.prototype.on=function(t,e){return"string"==typeof t?this.event.on(t,e):this.event.on(o.EventType[t],e),this},e}(o.Layout);e.D3StyleLayoutAdaptor=a,e.d3adaptor=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),o=function(t){function e(e){var n=t.call(this)||this;n.d3Context=e,n.event=e.dispatch(i.EventType[i.EventType.start],i.EventType[i.EventType.tick],i.EventType[i.EventType.end]);var r=n;return n.drag=function(){if(!t)var t=e.drag().subject(i.Layout.dragOrigin).on("start.d3adaptor",i.Layout.dragStart).on("drag.d3adaptor",function(t){i.Layout.drag(t,e.event),r.resume()}).on("end.d3adaptor",i.Layout.dragEnd);return arguments.length?void arguments[0].call(t):t},n}return r(e,t),e.prototype.trigger=function(t){var e={type:i.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event.call(e.type,e)},e.prototype.kick=function(){var e=this,n=this.d3Context.timer(function(){return t.prototype.tick.call(e)&&n.stop()})},e.prototype.on=function(t,e){return"string"==typeof t?this.event.on(t,e):this.event.on(i.EventType[t],e),this},e}(i.Layout);e.D3StyleLayoutAdaptor=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),i=n(18),o=n(8),a=n(19),s=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.actualLength=function(t){var e=this;return Math.sqrt(t.reduce(function(t,n){var r=n[e.target]-n[e.source];return t+r*r},0))},t}();e.Link3D=s;var u=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n}return t}();e.Node3D=u;var c=function(){function t(e,n,r){void 0===r&&(r=1);var i=this;this.nodes=e,this.links=n,this.idealLinkLength=r,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(t.k);for(var o=0;o<t.k;++o)this.result[o]=new Array(e.length);e.forEach(function(e,n){for(var r=0,o=t.dims;r<o.length;r++){var a=o[r];"undefined"==typeof e[a]&&(e[a]=Math.random())}i.result[0][n]=e.x,i.result[1][n]=e.y,i.result[2][n]=e.z})}return t.prototype.linkLength=function(t){return t.actualLength(this.result)},t.prototype.start=function(t){var e=this;void 0===t&&(t=100);var n=this.nodes.length,s=new f;this.useJaccardLinkLengths&&a.jaccardLinkLengths(this.links,s,1.5),this.links.forEach(function(t){return t.length*=e.idealLinkLength});var u=new r.Calculator(n,this.links,function(t){return t.source},function(t){return t.target},function(t){return t.length}).DistanceMatrix(),c=i.Descent.createSquareMatrix(n,function(t,e){
return u[t][e]}),h=i.Descent.createSquareMatrix(n,function(){return 2});this.links.forEach(function(t){var e=t.source,n=t.target;return h[e][n]=h[n][e]=1}),this.descent=new i.Descent(this.result,c),this.descent.threshold=.001,this.descent.G=h,this.constraints&&(this.descent.project=new o.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var l=0;l<this.nodes.length;l++){var d=this.nodes[l];d.fixed&&this.descent.locks.add(l,[d.x,d.y,d.z])}return this.descent.run(t),this},t.prototype.tick=function(){this.descent.locks.clear();for(var t=0;t<this.nodes.length;t++){var e=this.nodes[t];e.fixed&&this.descent.locks.add(t,[e.x,e.y,e.z])}return this.descent.rungeKutta()},t.dims=["x","y","z"],t.k=t.dims.length,t}();e.Layout3D=c;var f=function(){function t(){}return t.prototype.getSourceIndex=function(t){return t.source},t.prototype.getTargetIndex=function(t){return t.target},t.prototype.getLength=function(t){return t.length},t.prototype.setLength=function(t,e){t.length=e},t}()},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Tween=e.mat3=e.GLUtil=e.util=e.GraphView=e.WebGLRender=e.Graph=void 0;var o=n(22);Object.defineProperty(e,"Graph",{enumerable:!0,get:function(){return i(o).default}});var a=n(42);Object.defineProperty(e,"WebGLRender",{enumerable:!0,get:function(){return i(a).default}});var s=n(41);Object.defineProperty(e,"GraphView",{enumerable:!0,get:function(){return i(s).default}});var u=n(1);Object.defineProperty(e,"util",{enumerable:!0,get:function(){return i(u).default}});var c=n(21);Object.defineProperty(e,"mat3",{enumerable:!0,get:function(){return i(c).default}});var f=n(11);Object.defineProperty(e,"Tween",{enumerable:!0,get:function(){return i(f).default}});var h=n(12),l=r(h);e.GLUtil=l}])});
//# sourceMappingURL=klgraph.js.map